System.register("chunks:///_virtual/AllAnimationComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameConfig2.ts","./Common.ts","./Config.ts","./AnimationUtil.ts","./GameApp.ts"],(function(i){var o,t,e,n,s,a,r,c,l,p,m,f,_,d,h,u,v,y,A;return{setters:[function(i){o=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,r=i.Prefab,c=i.Vec3,l=i.ParticleSystem,p=i.instantiate,m=i.find,f=i.Animation},function(i){_=i.BaseComp},function(i){d=i.GameAnimitionEvent},function(i){h=i.common},function(i){u=i.EventName,v=i.Bundle},function(i){y=i.animationUtil},function(i){A=i.GameApp}],execute:function(){var g,w,C,I,b;s._RF.push({},"d2801KT6D9PqbM33iCBT8mc","AllAnimationComp",void 0);var P=a.ccclass,V=a.property;i("AllAnimationComp",(g=P("AllAnimationComp"),w=V(r),g((b=o((I=function(i){function o(){for(var o,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return o=i.call.apply(i,[this].concat(s))||this,e(o,"prefab_animation",b,n(o)),o.node_pool=[],o.init_num=20,o.temp_vec3_pos=new c(0,0,0),o.index_num=0,o}t(o,i);var s=o.prototype;return s.start=function(){for(this.on(u.GAME_GOLD_ANIMITION,this.runGameGoldAnimition.bind(this)),h.sleep(100);this.node_pool.length<=this.init_num;)this.node_pool.push(this.setItemView()),h.sleep(50)},s.runGameGoldAnimition=function(i){var o=this;if(i.type!=d.BOTTOM)if(i.type!=d.PUSH_NODE)if(i.type!=d.SPECIAL)if(i.type!=d.GUIDE_ARROW){var t=this.getAnimitionView();if(t.root.parent=this.node,t.root.active=!0,i.postion&&(t.root.worldPosition=i.postion),i.type==d.DISAPEAR)y.showAndPlayParticle(t.disappear_effects,1,(function(){o.pushNodeView(t)}));else if(i.type==d.DISAPEAR_fly){var e=t.disappear_effects_fly.getChildByName("disappear_coin").getComponent(l);A.res.load(v.GAME,"material/particle/colorcoin"+i.game_color,(function(i,n){if(i)return console.error(i),void o.pushNodeView(t);e.setSharedMaterial(n,0),y.resetParticle(t.disappear_effects_fly),setTimeout((function(){o.node&&o.pushNodeView(t)}),1500)}))}else if(i.type==d.SYNTHESIS)t.synthesis_effects.startColor.colorMin=i.colorMin,t.synthesis_effects.startColor.colorMax=i.colorMax,this.scheduleOnce((function(){t.root.worldPosition=i.postion,t.synthesis_effects.node.position=o.temp_vec3_pos.clone(),y.showAndPlayParticle(t.synthesis_effects,1,(function(){o.pushNodeView(t)}))}));else if(i.type==d.COLISION){t.colision_animiation.active=!0;var n=0;t.colision_animiation_child.forEach((function(i){i&&(n++,y.showAndPlayParticle(i,1.5,(function(){0==--n&&o.pushNodeView(t)})))}))}else this.pushNodeView(t),console.error("没有对应的动画类型")}else{var s=this.getAnimitionView();i.bottom_an_node_item.setGuideArrow(s)}else{var a=this.getAnimitionView();i.bottom_an_node_item.setSpecial(a)}else i.push_node?this.pushNodeView(i.push_node):console.error("有传递空的数据过来!!!!!");else{var r=this.getAnimitionView();i.bottom_an_node_item.setBottomMoveAn(r)}},s.setItemView=function(){var i=p(this.prefab_animation),o=m("move_bottom_animation",i),t={animation:m("plane",o).getComponent(f),particle:null},e=m("colision_animiation",i),n=e.getComponentsInChildren(l),s={id:this.index_num++,colision_animiation:e,colision_animiation_child:n,disappear_effects:m("disappear_effects",i).getComponent(l),disappear_effects_fly:m("disappear_effects_fly",i),move_bottom_animation:o,move_bottom_animation_child:t,root:i,synthesis_effects:m("synthesis_effects",i).getComponent(l),goldcoin_animiation:m("goldcoin_animiation",i),guide1_arrow:m("guide1_arrow",i)};return this.initItem(s),s},s.getAnimitionView=function(){if(this.node_pool.length<=0)return this.setItemView();var i=this.node_pool.shift();return this.initItem(i),i},s.pushNodeView=function(i){!this.node_pool.find((function(o){return o.id==i.id}))?(this.initItem(i),this.node_pool.push(i)):console.error("回收失败，已经存在")},s.initItem=function(i){i.root.active=!1,i.root.position=this.temp_vec3_pos.clone(),i.root.parent=null,i.colision_animiation.active=!1,i.colision_animiation_child.forEach((function(i){i.node.active=!1})),i.move_bottom_animation.active=!1,i.move_bottom_animation_child.animation.node.active=!1,i.disappear_effects.node.active=!1,i.disappear_effects_fly.active=!1,i.synthesis_effects.node.active=!1,i.goldcoin_animiation.active=!1,i.goldcoin_animiation.getComponentsInChildren(f).forEach((function(i){i&&(i.stop(),i.node.active=!1)})),i.guide1_arrow.active=!1},s.onDestroy=function(){if(i.prototype.onDestroy.call(this),this.node_pool&&this.node_pool.length>0)for(;this.node_pool.length>0;){this.node_pool.shift().root.destroy()}},o}(_)).prototype,"prefab_animation",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=I))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/BarrierComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameConfig2.ts","./ViewUtil.ts","./Config.ts","./GameModel.ts","./GameApp.ts","./SoundModel.ts"],(function(e){var r,t,n,o,i,a,s,c,l,d,p,u,_,f,h,m,y,B;return{setters:[function(e){r=e.inheritsLoose,t=e.asyncToGenerator,n=e.regeneratorRuntime,o=e.createClass},function(e){i=e.cclegacy,a=e._decorator,s=e.Vec3,c=e.tween,l=e.Tween},function(e){d=e.BaseComp},function(e){p=e.GameAnimitionEvent},function(e){u=e.ViewUtil},function(e){_=e.Bundle,f=e.Sound,h=e.EventName},function(e){m=e.game_model},function(e){y=e.GameApp},function(e){B=e.SoundModel}],execute:function(){var v;i._RF.push({},"accf9l1L0FEoY/8wx+WtmVL","BarrierComp",void 0);var w=a.ccclass;a.property,e("BarrierComp",w("BarrierComp")(v=function(e){function i(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this)._joyStick=null,r.data_list=void 0,r.barrier_node_list=[],r.temp_pos=new s,r}r(i,e);var a=i.prototype;return a.onSetBarrierUI=function(e){var r=this;this.data_list=e,this.data_list.barrier_map&&this.data_list.barrier_map.length>0&&this.data_list.barrier_map.forEach(t(n().mark((function e(t){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.createPrefabNodeAsync("/prefab/barrier/"+t.name,_.GAME);case 2:o=e.sent,r.node.addChild(o),o.position=new s(t.postion.x,t.postion.y,t.postion.z),o.scale=new s(t.scale.x,t.scale.y,t.scale.z),o.setRotation(t.rotation),t.hex_id_list.forEach((function(e){m.getPostionById(e).isBarrier=!0})),r.barrier_node_list.push({node:o,world_postion:new s(t.world_postion.x,t.world_postion.y,t.world_postion.z),postion_id:t.hex_id_list,scale:new s(t.scale.x,t.scale.y,t.scale.z)});case 9:case"end":return e.stop()}}),e)}))))},a.onClearBarrierDelay=function(){var e=this;return new Promise((function(r){var t=0,n=!1;e.barrier_node_list.forEach((function(o){o&&(n=!0,c(e.node).delay(.1*t).call((function(){B.getInstance().audioPlay(f.accomplish,e),e.onClearBarrierUIByBarrierType(o.node),0==--t&&r(null)})).start(),t++)})),n||r(null)}))},a.onClearBarrierUI=function(e){for(void 0===e&&(e=!0);this.barrier_node_list.length>0;)this.onClearBarrierUIByBarrierType(this.barrier_node_list[0].node,e)},a.onClearBarrierUIByBarrierType=function(e,r){void 0===r&&(r=!0);var t=this.barrier_node_list.findIndex((function(r){return r.node==e})),n=this.barrier_node_list[t];n&&(n.node.destroy(),n.postion_id.forEach((function(e){m.getPostionById(e).isBarrier=!1})),this.barrier_node_list.splice(t,1),r&&y.event.emit(h.GAME_GOLD_ANIMITION,{type:p.DISAPEAR,postion:n.world_postion.clone()}))},a.onShowPropHammer=function(){var e=this;this.barrier_node_list.forEach((function(r){var t=c(r.node).call((function(){e.temp_pos.set(r.scale.x-.2,1,r.scale.z-.2)})).to(m.prop_time,{scale:e.temp_pos}).call((function(){e.temp_pos.set(r.scale)})).to(m.prop_time,{scale:e.temp_pos});c(r.node).repeatForever(t).start()}))},a.onHidePropHammer=function(){var e=this;this.barrier_node_list.forEach((function(r){l.stopAllByTarget(r.node),e.temp_pos.set(r.scale),r.node.scale=e.temp_pos}))},a.isNodeBarrier=function(e){return-1!=this.barrier_node_list.findIndex((function(r){return r.node==e}))},a.getNodeToID=function(e){var r;return null==(r=this.barrier_node_list.find((function(r){return r.node==e})))?void 0:r.postion_id},o(i,[{key:"joyStick",get:function(){return this._joyStick},set:function(e){this._joyStick=e}}]),i}(d))||v);i._RF.pop()}}}));

System.register("chunks:///_virtual/Camera3DComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./BaseComp.ts","./EventConfig.ts"],(function(e){var t,r,i,a,o,n,s,c,p,l,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,s=e.CCInteger,c=e.Camera,p=e.renderer},function(e){l=e.GameApp},function(e){u=e.BaseComp},function(e){m=e.EventMessage}],execute:function(){var f,h,v,C,g,y,d;o._RF.push({},"5177eEW2MNPFIrdiP72Pxsb","Camera3DComp",void 0);var z=n.ccclass,A=n.property;e("Camera3DComp",(f=z("Camera3DComp"),h=A({displayName:"horizontal",type:s}),v=A({displayName:"vertical",type:s}),f((y=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"horizontal",y,a(t)),i(t,"vertical",d,a(t)),t}r(t,e);var o=t.prototype;return o.start=function(){this.resize(),this.on(m.GAME_RESIZE,this.resize.bind(this))},o.resize=function(){if(l.game){var e=this.node.getComponent(c);l.game.portrait?(e.fovAxis=p.scene.CameraFOVAxis.HORIZONTAL,e.fov=this.horizontal):(e.fovAxis=p.scene.CameraFOVAxis.VERTICAL,e.fov=this.vertical),console.log("设置3D游戏尺寸竖屏：",l.game.portrait)}},t}(u)).prototype,"horizontal",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=t(g.prototype,"vertical",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=g))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/CleanDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameUIConfig.ts","./GameApp.ts","./UserModel.ts","./GameConfig2.ts","./Config.ts","./video-button.ts"],(function(t){var o,e,n,i,a,r,s,u,c,l,m;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Button},function(t){a=t.BaseComp},function(t){r=t.ViewName},function(t){s=t.GameApp},function(t){u=t.userModel},function(t){c=t.GamePropMode},function(t){l=t.EventName},function(t){m=t.default}],execute:function(){var p;e._RF.push({},"0284cNETtRDuK4fl8OVVRj7","CleanDialog",void 0);var f=n.ccclass;n.property,t("CleanDialog",f("CleanDialog")(p=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.onNextBtn=function(){s.Layer.remove(r.CleanDialog)},n.onRemoveBottom=function(t,o){u.isExistsProp(c.remove_bottom)?(s.event.emit(l.PROP_REMOVE_BOTTOM_DATA),this.onNextBtn()):t.target.getComponent(m).onClick(t.target.getComponent(i))},n.onVideoBtn=function(){console.log("清底视频成功"),u.addProp({id:c.remove_bottom,num:1}),s.event.emit(l.PROP_REMOVE_BOTTOM_DATA),this.onNextBtn()},e}(a))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentPlanComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts","./Item.ts","./BaseComp.ts","./GameApp.ts","./Game.ts"],(function(o){var n,t,i,e,s,l,r,c;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,i=o._decorator},function(o){e=o.game_model},function(o){s=o.item},function(o){l=o.BaseComp},function(o){r=o.GameApp},function(o){c=o.Game}],execute:function(){var a;t._RF.push({},"46c3010pVdO9bFKo921rq0k","ContentPlanComp",void 0);var u=i.ccclass;i.property,o("ContentPlanComp",u("ContentPlanComp")(a=function(o){function t(){for(var n,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(n=o.call.apply(o,[this].concat(i))||this).is_run_an=!1,n.is_new_postion=!1,n.postion_id_list=[],n}n(t,o);var i=t.prototype;return i.init=function(){console.log("---重置桌面数据---ContentPlanComp"),this.is_run_an=!1,this.is_new_postion=!1,this.postion_id_list=[]},i.getMoveAllPostion=function(){var o=this;if(console.log("-getMoveAllPostion:",this.is_run_an),this.is_run_an)return console.log("动画中-等待下次"),void(this.is_new_postion=!0);this.is_new_postion=!1,this.is_run_an=!0,e.getPostionList().forEach((function(n){n.isFixed&&n.color&&n.color.length>0&&o.postion_id_list.push(n.id)})),this.onMoveFun()},i.onMoveFun=function(){if(r.game.getGameRoot().getComponent(c).getTopGame().isFinishGame())return this.postion_id_list=[],this.is_run_an=!1,void console.log("----游戏结束，不在播放动画----");console.log("*----43---判断是否需要移动");var o=[];if(e.getPostionList().forEach((function(n){var t=n.id,i=e.getMovePostionList(t);i&&o.push(i)})),this.node.children.forEach((function(o){if(o){var n=o.getComponent(s);n&&n.isShow()}})),console.log("---53---",o),o.length<=0)return console.log("---没有需要移动的1---"),void(this.is_new_postion?(this.is_run_an=!1,this.getMoveAllPostion()):this.onFlyData());console.log("---65---");var n=o.find((function(o){return o.is_other}));n?this.showMoveAnItem(n,this.onMoveFun.bind(this)):this.showMoveAnItem(o[0],this.onMoveFun.bind(this)),console.log("---75---")},i.showMoveAnItem=function(o,n){return console.log("temp_postion:",o),o&&0!=o.length?(this.node.children.forEach((function(n){if(n){var e=n.getComponent(s);e&&(e.getPostionID()==o.end_position_id?t=e:e.getPostionID()==o.start_position_id&&(i=e))}})),t&&i?void this.scheduleOnce((function(){i.runAnMove(t,o.color,(function(){console.log("*----102---结束"),n&&n()}))})):(console.log("---187---fun_finish"),console.log("---187---end_item",t),console.log("---187---start_item",i),console.error("移动动画的起始点或者终点是空的："),void(n&&n()))):(console.log("---2---fun_finish"),void(n&&n()));var t,i},i.onFlyData=function(){var o=this;console.log("计算飞升数据");var n=[];if(console.log("game_model.getPostionList():",e.getPostionList()),e.getPostionList().forEach((function(o,t){if(o.isFixed&&o.color){var i=o.color;if(i.length>=10){for(var e=-1,s=0,l=i.length-1;l>=0;l--)-1==e?(e=i[l],s++):e==i[l]&&s++;s>=10&&n.push({id:o.id,color:e})}}})),0==n.length)return console.log("没有飞升数据"),this.is_run_an=!1,r.game.getGameRoot().getComponent(c).showCloseView(),void r.game.getGameRoot().getComponent(c).node_joystick.onItemNum();console.log("有飞升数据：",n),console.log("--mode:",this.node.children);var t=!1;r.game.getGameRoot().getComponent(c).getTopGame().node_combo.initData();var i=0;this.node.children.forEach((function(e){if(e){var l=e.getComponent(s);if(l){var a=l.getPostionID();n.forEach((function(n){n.id==a&&(i++,l.onFlyAn(n.color,(function(){0==--i&&o.onMoveFun(),t||(t=!0,r.game.getGameRoot().getComponent(c).getTopGame().node_combo.onRunCombo())})))}))}}}))},i.isPlayAn=function(){return this.is_run_an},t}(l))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/DeveloperDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationUtil.ts","./GameApp.ts","./GameUIConfig.ts"],(function(e){var n,o,t,i,r,a,l,c,p,s,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,c=e.Component},function(e){p=e.animationUtil},function(e){s=e.GameApp},function(e){u=e.ViewName}],execute:function(){var f,v,d,D,m;r._RF.push({},"9da85S1SKtOurQ5evTRd3sf","DeveloperDialog",void 0);var y=a.ccclass,g=a.property;e("DeveloperDialog",(f=y("DeveloperDialog"),v=g(l),f((m=n((D=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,t(n,"node_an",m,i(n)),n}o(n,e);var r=n.prototype;return r.start=function(){p.playAnimationOnce(this.node_an,"developer1")},r.closeClock=function(){p.showAndPlayAnimation(this.node_an,"developer2",(function(){s.Layer.remove(u.DeveloperDialog)}))},n}(c)).prototype,"node_an",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=D))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/FunUIRound.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o,i,u,c,a,l;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,u=t._decorator,c=t.Node,a=t.Vec3,l=t.Component}],execute:function(){var s,f,p,d,h,y,q,b,v;i._RF.push({},"b04a8IjB5FPTZs8UxcE+EqC","FunUIRound",void 0);var w=u.ccclass,g=u.property;t("FunUIRound",(s=w("FunUIRound"),f=g(c),p=g(c),d=g(c),s((q=n((y=function(t){function n(){for(var n,r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return n=t.call.apply(t,[this].concat(i))||this,e(n,"node_content",q,o(n)),e(n,"node_pos",b,o(n)),e(n,"prefab_1",v,o(n)),n.temp_pos1=new a,n}r(n,t);var i=n.prototype;return i.start=function(){},i.calculateHexCenter=function(t,n,r){var e=3*r/4,o=r*Math.sqrt(3)/2;return{x:t*e,y:n*o+(t%2==0?0:o/2)}},i.funUIround=function(t,n){Math.floor(t.width/(3*n/4)),Math.floor(t.height/(n*Math.sqrt(3)/2));return[]},i.getAdjacentHexes=function(t,n){var r=t.find((function(t){return t.id===n}));return r?[{col:1,row:0},{col:-1,row:0},{col:0,row:1},{col:0,row:-1},{col:1,row:-1},{col:-1,row:1}].map((function(n){return t.find((function(t){return t.offsets.q===r.offsets.q+n.col&&t.offsets.r===r.offsets.r+n.row}))})).filter((function(t){return void 0!==t})):[]},i.getAdjacentHexes1=function(t,n){return[{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1},{q:1,r:-1}].map((function(r){return{x:n.x+r.q*t*.75,y:n.y+r.r*t*Math.sqrt(3)/2}}))},i.calculateDistance=function(t,n){var r=t.x-n.x,e=t.y-n.y;return Math.sqrt(r*r+e*e)},i.findClosestPoint=function(t,n){if(0===n.length)return null;for(var r=n[0],e=this.calculateDistance(t.position,r.position),o=1;o<n.length;o++){var i=n[o],u=this.calculateDistance(t.position,i.position);u<e&&(e=u,r=i)}return r},n}(l)).prototype,"node_content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(y.prototype,"node_pos",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(y.prototype,"prefab_1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts","./GameTopComp.ts","./GameApp.ts","./GameManager.ts","./BaseComp.ts","./JoyStick.ts","./Config.ts","./GameMapModel.ts","./UserModel.ts","./ContentPlanComp.ts","./GameUIConfig.ts","./SoundModel.ts","./platform-const.ts","./VibrateManager.ts","./GameConfig2.ts","./PlatformModel.ts","./ViewUtil.ts","./GameGuideComp.ts","./GameTopCashierDesk.ts"],(function(e){var t,n,o,i,a,r,s,c,u,l,d,p,m,h,f,_,g,G,y,b,w,k,v,C,T,x,M,A,P,S,E,N,D,V,z,j,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Node,l=e.Camera,d=e.Prefab,p=e.Vec3,m=e.Vec2,h=e.instantiate,f=e.assetManager,_=e.JsonAsset},function(e){g=e.game_model},function(e){G=e.GameTopComp},function(e){y=e.GameApp},function(e){b=e.GameManager},function(e){w=e.BaseComp},function(e){k=e.JoyStick},function(e){v=e.Bundle,C=e.EventName,T=e.Sound},function(e){x=e.game_map_model},function(e){M=e.userModel},function(e){A=e.ContentPlanComp},function(e){P=e.ViewName},function(e){S=e.SoundModel},function(e){E=e.VibrateType},function(e){N=e.VibrateManager},function(e){D=e.GameState},function(e){V=e.platformModel},function(e){z=e.ViewUtil},function(e){j=e.GameGuideComp},function(e){I=e.GameTopCashierDesk}],execute:function(){var F,L,R,O,U,B,H,J,q,Z,X,K,Q,W,Y;s._RF.push({},"2adc1lRP/9NZZ47GXmChyuG","Game",void 0);var $=c.ccclass,ee=c.property;e("Game",(F=$("Game"),L=ee(u),R=ee(u),O=ee(l),U=ee(k),B=ee(d),H=ee(u),F((Z=t((q=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"node_content",Z,i(t)),o(t,"node_pos",X,i(t)),o(t,"camera_node",K,i(t)),o(t,"node_joystick",Q,i(t)),o(t,"prefab_1",W,i(t)),o(t,"prefab_2",Y,i(t)),t.top_node=null,t.node_cashier_desk=null,t.data_list=void 0,t.node_guide=null,t.isStartGame=!1,t.is_game_init=!1,t}n(t,e);var s=t.prototype;return s.start=function(){var e=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("游戏资源加载完成！！"),y.game||(y.game=new b(new u),y.game.game_root=this.node),e.next=4,Promise.all([this.onShowGuide(),this.onPostion(),this.createTopView(),this.createCashierDesk()]);case 4:return console.log("游戏初始化完成"),e.next=7,this.startGame();case 7:y.event.emit(C.GAME_STATE_CHANGE,D.wait),this.isStartGame&&this.readyStartGame(),this.is_game_init=!0,this.onPreload();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.update=function(e){},s.onShowGuide=function(){var e=this;return console.log("加载新手引导"),new Promise(a(r().mark((function t(n){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=M.game_pass&&2!=M.game_pass){t.next=10;break}return t.next=3,z.createPrefabNodeAsync("prefab/guide",v.GAME_TOP);case 3:o=t.sent,y.Layer.guide.addChild(o),e.node_guide=o.getComponent(j),console.log("加载新手引导成功！"),n(null),t.next=12;break;case 10:console.log("没有新手引导！"),n(null);case 12:case"end":return t.stop()}}),t)}))))},s.startGame=function(){var e=a(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),console.log("---加载游戏数据--",t),this.data_list){e.next=6;break}return e.next=5,x.getMapData();case 5:this.data_list=e.sent;case 6:this.node_joystick.startGame(this.data_list,t),this.top_node.setData(this.data_list,t),t&&V.addPass(),V.resetPass();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.nextGame=function(e){var t=this;void 0===e&&(e=!0),console.log("---开始游戏---nextGame:",e),g.finish_game=!1,this.data_list=null,this.closeGame(),this.scheduleOnce((function(){t.startGame(e),y.event.emit(C.GAME_STATE_CHANGE,D.playing)}))},s.finishGame=function(){var e=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("game_游戏完成"),g.finish_game=!0,y.event.emit(C.GAME_STATE_CHANGE,D.finish),N.getInstance().play(E.LONG),e.next=6,this.node_joystick.finishGame();case 6:this.getTopGame().onFinishGameAn(),V.finishPass(1,this.getTopGame().getResidueCiNum(),this.getTopGame().getTopTarGetNum().num),M.game_pass++,this.clearGuide();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.closeGame=function(){this.node_joystick.closeGame(),this.node_content.getComponent(A).init()},s.showCloseView=function(){this.getTopGame().isCloseGame()&&!this.getTopGame().getIsShowFinish()&&(console.log("---失败---"),this.getTopGame().setIsShowFinish(!0),y.Layer.open(P.GameFinishClose),this.node_guide&&this.node_guide.closeGuideUI(),V.finishPass(3,this.getTopGame().getResidueCiNum(),this.getTopGame().getTopTarGetNum().num))},s.readyStartGame=function(e){var t=this;void 0===e&&(e=!1),console.log("---点击重置---",e),e&&(S.getInstance().audioPlay(T.reset,this),this.nextGame(!1)),this.scheduleOnce((function(){t.getTopGame().startGameView(),t.node_joystick.onFirstAdd()&&t.node_joystick.onAddClick()}),.1)},s.createTopView=function(){var e=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.top_node){e.next=2;break}return e.abrupt("return");case 2:return console.log("初始化顶部预制体"),e.next=5,this.loadPrefab(v.GAME_TOP,v.GAME_TOP);case 5:if(t=e.sent,!this.top_node){e.next=8;break}return e.abrupt("return");case 8:n=h(t),y.Layer.game.addChild(n),this.top_node=n.getComponent(G),this.node_cashier_desk&&(this.top_node.node_cashier_desk=this.node_cashier_desk),console.log("顶部预制体加载成功");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.createCashierDesk=function(){var e=a(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.node_cashier_desk){e.next=2;break}return e.abrupt("return");case 2:return console.log("初始化收银台预制体"),e.next=5,z.createPrefabNodeAsync("prefab/cashier_desk",v.GAME);case 5:if(t=e.sent,!this.node_cashier_desk){e.next=8;break}return e.abrupt("return");case 8:this.node.getChildByName("node_cashier_desk").addChild(t),this.node_cashier_desk=t.getComponent(I),this.top_node&&(this.top_node.node_cashier_desk=this.node_cashier_desk),console.log("收银台预制体加载成功");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.clearGuide=function(){this.node_guide&&M.game_pass>2&&(this.node_guide.destroy(),this.node_guide=null)},s.onPreload=function(){var e=a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.bundles.get(v.GAME).preloadDir("prefab");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.onPostion=function(){var e=a(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("加载棋盘数据"),e.next=3,y.res.loadAsync(v.GAME,"map/gold_postion",_);case 3:if(t=e.sent){e.next=7;break}throw console.error("data:",t),new Error("桌面数据是空的！！！！");case 7:n=t.json,t.decRef(),g.setPostionList(n),console.log("加载棋盘数据成功");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.funUIround3=function(e,t,n,o){for(var i=o.width/2,a=Math.sqrt(3)*i,r=1.5*i,s=Math.floor(t/r),c=Math.floor(n/a),u=e.position,l=0,d=[],p=0;p<c;p++)for(var h=0;h<s;h++){var f=p*r,_=h*a+(p%2==0?0:a/2),g=u.x-t/2+i+_,G=u.y-n/2+i+f;d.push({id:l++,position:new m(g,G),offsets:{q:h,r:p}})}return d},s.getTopGame=function(){return this.top_node},s.getIsGuide=function(){return!(M.game_pass>2)&&(!!this.node_guide&&0!=this.node_guide.guide)},s.onDestroy=function(){e.prototype.onDestroy.call(this)},t}(w)).prototype,"node_content",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(q.prototype,"node_pos",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(q.prototype,"camera_node",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(q.prototype,"node_joystick",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(q.prototype,"prefab_1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(q.prototype,"prefab_2",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=q))||J));p.transformMat4=function(e,t,n){var o=t.x,i=t.y,a=t.z,r=n.m03*o+n.m07*i+n.m11*a+n.m15;return r=r?Math.abs(1/r):1,e.x=(n.m00*o+n.m04*i+n.m08*a+n.m12)*r,e.y=(n.m01*o+n.m05*i+n.m09*a+n.m13)*r,e.z=(n.m02*o+n.m06*i+n.m10*a+n.m14)*r,e},s._RF.pop()}}}));

System.register("chunks:///_virtual/GameFinishClose.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Game.ts","./GameUIConfig.ts","./UserModel.ts","./GameConfig2.ts","./Config.ts","./video-button.ts","./AnimationUtil.ts","./SoundModel.ts","./BaseComp.ts"],(function(n){var e,t,o,i,a,s,r,u,c,l,p,f,m,d,C,h,g,G,_,E;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,r=n.Node,u=n.Vec3,c=n.Button},function(n){l=n.GameApp},function(n){p=n.Game},function(n){f=n.ViewName},function(n){m=n.userModel},function(n){d=n.GamePropMode},function(n){C=n.Sound,h=n.EventName},function(n){g=n.default},function(n){G=n.animationUtil},function(n){_=n.SoundModel},function(n){E=n.BaseComp}],execute:function(){var v,y,b,P,A,M,N;a._RF.push({},"9b9a7Y83vtJNpp9SPREiYha","GameFinishClose",void 0);var R=s.ccclass,S=s.property;n("GameFinishClose",(v=R("GameFinishClose"),y=S(r),b=S(r),v((M=e((A=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a))||this,o(e,"node_an",M,i(e)),o(e,"node_btn",N,i(e)),e}t(e,n);var a=e.prototype;return a.start=function(){var n=this;1==m.game_pass&&(this.node_btn.position=new u(999,999,999)),this.scheduleOnce((function(){_.getInstance().audioPlay(C.lose,n)}),.3)},a.update=function(n){},a.onClickBtn=function(){l.game.getGameRoot().getComponent(p).readyStartGame(!0),this.onClose()},a.onClickBtn2=function(n,e){m.isExistsProp(d.resurgence)?(l.event.emit(h.GAME_TOP_RESURGENCE_GOLD_EVNET),this.onClose()):n.target.getComponent(g).onClick(n.target.getComponent(c))},a.onClickBtn2Video=function(){console.log("复活视频成功"),m.addProp({id:d.resurgence,num:1}),l.event.emit(h.GAME_TOP_RESURGENCE_GOLD_EVNET),this.onClose()},a.onClose=function(){G.showAndPlayAnimation(this.node_an,"fail_disapear",(function(){l.Layer.remove(f.GameFinishClose)}))},e}(E)).prototype,"node_an",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(A.prototype,"node_btn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=A))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameFinishNext.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Game.ts"],(function(e){var t,n,o,i,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.Component},function(e){r=e.GameApp},function(e){a=e.Game}],execute:function(){var s;n._RF.push({},"01e180V3mtB6p/YoTjz6s/S","GameFinishNext",void 0);var c=o.ccclass;o.property,e("GameFinishNext",c("GameFinishNext")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.update=function(e){},o.onBtnClick=function(){r.game.getGameRoot().getComponent(a).nextGame(),r.Layer.removeByNode(this.node)},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameGuideComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./UserModel.ts","./AnimationUtil.ts","./GameApp.ts","./Game.ts","./Item.ts","./platform.ts","./Common.ts"],(function(e){var t,i,n,u,d,r,c,s,o,_,a,h,g,p,l,m,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,u=e.assertThisInitialized,d=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,o=e.Node,_=e.Button},function(e){a=e.BaseComp},function(e){h=e.userModel},function(e){g=e.animationUtil},function(e){p=e.GameApp},function(e){l=e.Game},function(e){m=e.item},function(e){f=e.platform},function(e){v=e.common}],execute:function(){var y,k,C,B,N;c._RF.push({},"41305RJWQ1D9rkWMoEgZNEt","GameGuideComp",void 0);var G=s.ccclass,w=s.property;e("GameGuideComp",(y=G("GameGuideComp"),k=w(o),y((N=t((B=function(e){function t(){for(var t,i=arguments.length,d=new Array(i),r=0;r<i;r++)d[r]=arguments[r];return t=e.call.apply(e,[this].concat(d))||this,n(t,"node_top_chick",N,u(t)),t.step=0,t.guide=0,t.current_guide_node=null,t}i(t,e);var c=t.prototype;return c.start=function(){this.node.children.forEach((function(e){e&&(e.active=!1)}))},c.showGuide=function(){console.log("进入引导选择"),0!=this.guide&&0!=this.step||(1==h.game_pass?this.showGuide1():2==h.game_pass&&this.showGuide2())},c.showGuide1=function(){var e=d(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.current_guide_node=this.node.getChildByName("guide_1"),this.current_guide_node&&(this.guide=1,this.step=1,this.current_guide_node.active=!0,g.showAndPlayAnimation(this.current_guide_node,"guide_1",(function(){t.current_guide_node.active=!0;var e=t.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handSlide")}))),f.trackEvent("guide",{part:this.guide,stage:this.step});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showGuide12=function(){1!=this.guide||this.step>2||(this.current_guide_node&&(this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_1-2"),this.current_guide_node&&(this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_tipsappear"),p.game.getGameRoot().getComponent(l).node_content.children.forEach((function(e){if(e){var t=e.getComponent(m);t&&t.getGuideArrowAn()}}))),this.step=2,f.trackEvent("guide",{part:this.guide,stage:this.step}))},c.showGuide13=function(){var e=this;1==this.guide&&2==this.step&&(p.game.getGameRoot().getComponent(l).node_content.children.forEach((function(e){if(e){var t=e.getComponent(m);t&&t.getGuideArrow()}})),g.showAndPlayAnimation(this.current_guide_node,"guide_tipsdisappear",(function(){if(e.current_guide_node&&(e.current_guide_node.off("click"),e.current_guide_node.active=!1,e.current_guide_node=null),e.current_guide_node=e.node.getChildByName("guide_1-3"),e.current_guide_node){e.current_guide_node.active=!0,g.playAnimationOnce(e.current_guide_node);var t=e.current_guide_node.getChildByName("hand");g.playAnimationOnce(t,"guide_handclick"),e.current_guide_node.getComponent(_)||e.current_guide_node.addComponent(_),e.current_guide_node.off("click"),e.current_guide_node.on("click",(function(){e.current_guide_node.off("click"),e.showGuide14()}))}})),this.step=3,f.trackEvent("guide",{part:this.guide,stage:this.step}))},c.showGuide14=function(){var e=this;if(1==this.guide&&3==this.step){this.current_guide_node&&(this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_1-4"),this.current_guide_node&&(this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_1-4"));var t=this.current_guide_node.getChildByName("hand");g.playAnimationOnce(t,"guide_handclick"),this.current_guide_node.addComponent(_),this.current_guide_node.on("click",(function(){e.current_guide_node.off("click"),e.guide=0,e.step=0,e.current_guide_node&&(e.current_guide_node.active=!1,e.current_guide_node=null)})),this.step=4,f.trackEvent("guide",{part:this.guide,stage:this.step})}},c.showGuide2=function(){var e=d(r().mark((function e(){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node_top_chick.active=!0,e.next=3,v.sleep(500);case 3:this.node_top_chick.active=!1,this.current_guide_node=this.node.getChildByName("guide_2"),this.current_guide_node&&(this.guide=2,this.step=1,this.current_guide_node.active=!0,g.showAndPlayAnimation(this.current_guide_node,"guide_2",(function(){t.current_guide_node.active=!0;var e=t.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handclick")}))),f.trackEvent("guide",{part:this.guide,stage:this.step});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showGuide3=function(){if(2!=this.guide||1!=this.step)return!1;if(this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_3"),this.current_guide_node){this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2");var e=this.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handclick"),this.current_guide_node.getChildByName("node_chick").active=!1,this.current_guide_node.getChildByName("mask_square").active=!0,this.current_guide_node.getChildByName("text").active=!0,this.current_guide_node.getChildByName("hand").active=!0}return this.step=2,f.trackEvent("guide",{part:this.guide,stage:this.step}),!0},c.showGuide31=function(){2==this.guide&&2==this.step&&this.current_guide_node&&(this.current_guide_node.getChildByName("node_chick").active=!0,this.current_guide_node.getChildByName("mask_square").active=!1,this.current_guide_node.getChildByName("text").active=!1,this.current_guide_node.getChildByName("hand").active=!1)},c.showGuide4=function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2==this.guide&&2==this.step){e.next=2;break}return e.abrupt("return",!1);case 2:return this.node_top_chick.active=!0,e.next=5,v.sleep(500);case 5:this.node_top_chick.active=!1,this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_4"),this.current_guide_node&&(this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2"),t=this.current_guide_node.getChildByName("hand"),g.playAnimationOnce(t,"guide_handclick")),this.step=3,f.trackEvent("guide",{part:this.guide,stage:this.step});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showGuide41=function(){if(2!=this.guide||3!=this.step)return!1;this.current_guide_node&&(this.current_guide_node.getChildByName("mask_square").active=!1,this.current_guide_node.getChildByName("text").active=!1,this.current_guide_node.getChildByName("hand").active=!1)},c.showGuide5=function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2==this.guide&&3==this.step){e.next=2;break}return e.abrupt("return",!1);case 2:return this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.step=4,this.node_top_chick.active=!0,e.next=7,v.sleep(3e3);case 7:this.node_top_chick.active=!1,this.current_guide_node=this.node.getChildByName("guide_5"),this.current_guide_node&&(this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2"),t=this.current_guide_node.getChildByName("hand"),g.playAnimationOnce(t,"guide_handclick")),f.trackEvent("guide",{part:this.guide,stage:this.step});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showGuide6=function(){if(2!=this.guide||4!=this.step)return!1;if(this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_6"),this.current_guide_node){this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2");var e=this.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handclick")}return this.step=5,f.trackEvent("guide",{part:this.guide,stage:this.step}),!0},c.showGuide7=function(){if(2!=this.guide||5!=this.step)return!1;if(this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_7"),this.current_guide_node){this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2");var e=this.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handclick")}this.step=6,f.trackEvent("guide",{part:this.guide,stage:this.step})},c.showGuide71=function(){if(2!=this.guide||6!=this.step)return!1;this.current_guide_node&&(this.current_guide_node.getChildByName("mask_square").active=!1,this.current_guide_node.getChildByName("text").active=!1,this.current_guide_node.getChildByName("hand").active=!1)},c.showGuide8=function(){var e=d(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2==this.guide&&6==this.step){e.next=2;break}return e.abrupt("return",!1);case 2:return this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.step=7,this.node_top_chick.active=!0,e.next=7,v.sleep(4e3);case 7:this.node_top_chick.active=!1,this.current_guide_node=this.node.getChildByName("guide_8"),this.current_guide_node&&(this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2"),t=this.current_guide_node.getChildByName("hand"),g.playAnimationOnce(t,"guide_handclick")),f.trackEvent("guide",{part:this.guide,stage:this.step});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.showGuide9=function(){if(2!=this.guide||7!=this.step)return!1;if(this.current_guide_node&&(this.current_guide_node.off("click"),this.current_guide_node.active=!1,this.current_guide_node=null),this.current_guide_node=this.node.getChildByName("guide_9"),this.current_guide_node){this.current_guide_node.active=!0,g.playAnimationOnce(this.current_guide_node,"guide_2");var e=this.current_guide_node.getChildByName("hand");g.playAnimationOnce(e,"guide_handclick")}return this.step=8,f.trackEvent("guide",{part:this.guide,stage:this.step}),!0},c.closeGuideUI=function(){this.current_guide_node&&(this.current_guide_node.active=!1,this.current_guide_node=null),this.guide=0,this.step=0},t}(a)).prototype,"node_top_chick",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=B))||C));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Game.ts","./GameUIConfig.ts"],(function(e){var t,o,n,a,r,i,m;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,a=e.Component},function(e){r=e.GameApp},function(e){i=e.Game},function(e){m=e.ViewName}],execute:function(){var c;o._RF.push({},"60fdeM2oEFOi4ZICDdxaBFj","GameStart",void 0);var u=n.ccclass;n.property,e("GameStart",u("GameStart")(c=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var n=o.prototype;return n.start=function(){},n.update=function(e){},n.onBtnClick=function(){var e;r.game.getGameRoot()&&r.game.getGameRoot().getComponent(i)&&r.game.getGameRoot().getComponent(i).getTopGame()&&(r.Layer.remove(m.GAMESTART),r.Layer.removeByNode(this.node),null==(e=r.game.getGameRoot())||null==(e=e.getComponent(i))||e.readyStartGame())},n.onVideoBtn=function(){console.log("视频观看成功")},o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameStepComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./Config.ts"],(function(t){var e,n,i,o,a,r,s,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,p=t.Animation},function(t){l=t.BaseComp},function(t){u=t.EventName}],execute:function(){var c,m,f,h,y;a._RF.push({},"13a80Vqx3JAd7YkxCQi/ZHw","GameStepComp",void 0);var _=r.ccclass,C=r.property;t("GameStepComp",(c=_("GameStepComp"),m=C(s),c((y=e((h=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"label_max_num",y,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){this.on(u.GAME_STEP_EVENT,this.setCishu.bind(this))},a.setCishu=function(t){1==t.type?this.node.getComponent(p).play("title_idle1"):2==t.type&&this.node.getComponent(p).play("warning1"),this.label_max_num.string=t.num},e}(l)).prototype,"label_max_num",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopCashierDesk.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./BaseComp.ts","./animationEvent.ts","./AnimationUtil.ts","./GameConfig2.ts","./Item.ts","./GameApp.ts","./Game.ts","./SoundModel.ts"],(function(o){var t,n,e,i,a,r,l,s,_,c,u,d,p,f,m,h,g,w,v,y,G,A,b,D,T,P;return{setters:[function(o){t=o.applyDecoratedDescriptor,n=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){a=o.cclegacy,r=o._decorator,l=o.Enum,s=o.Prefab,_=o.Node,c=o.Animation,u=o.Vec3,d=o.MeshRenderer,p=o.tween,f=o.NodePool,m=o.instantiate,h=o.Tween},function(o){g=o.EventName,w=o.Sound},function(o){v=o.BaseComp},function(o){y=o.AnimationEventEnum},function(o){G=o.animationUtil},function(o){A=o.GameColor},function(o){b=o.ColorMaterialCofig},function(o){D=o.GameApp},function(o){T=o.Game},function(o){P=o.SoundModel}],execute:function(){var C,E,N,I,M,R,z,B,k,x,F,O,S,L,U,V,Y;a._RF.push({},"46793/+JqxFxYKP/bvB2Y0y","GameTopCashierDesk",void 0);var j=r.ccclass,q=r.property;l(A);o("GameTopCashierDesk",(C=j("GameTopCashierDesk"),E=q(s),N=q(_),I=q([_]),M=q([_]),R=q(_),z=q(_),B=q({type:[b],displayName:"金币材质"}),C((F=t((x=function(o){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=o.call.apply(o,[this].concat(a))||this,e(t,"prefab_gold",F,i(t)),e(t,"node_open",O,i(t)),e(t,"drawar_list",S,i(t)),e(t,"fly_gold_postion",L,i(t)),e(t,"node_game_top",U,i(t)),e(t,"node_cash",V,i(t)),e(t,"material_color",Y,i(t)),t.data_list=null,t.top_drawar_data_list=[],t.node_pool=void 0,t.game_top=null,t.gan_type_num=-1,t.is_close_temp=[],t}n(t,o);var a=t.prototype;return a.start=function(){var o=this;this.on(g.ANIMATION_EVENT,this.onDrawerAnim.bind(this)),this.fly_gold_postion[0].parent.active=!0,this.drawar_list.forEach((function(t,n){o.top_drawar_data_list.push({id:n,postion:t.position.clone(),color:null,num:0,node:t,fly_gold_postion:o.fly_gold_postion[n].worldPosition.clone(),node_item_content:t.getChildByName("node_item_content"),node_item_list:[],is_an_move:!1,is_an_move_num:[],is_gold_down:!1,is_gold_down_num:[],is_open:!1})})),this.fly_gold_postion[0].parent.active=!1,console.log(this.top_drawar_data_list),this.data_list&&this.setData(this.data_list)},a.setData=function(o){var t=this;this.data_list=o,0!=this.top_drawar_data_list.length&&(this.top_drawar_data_list.forEach((function(o,n){o.node.position=t.top_drawar_data_list[n].postion.clone()})),this.top_drawar_data_list[0].node.parent.getComponent(c).stop(),this.top_drawar_data_list[0].node.parent.eulerAngles=new u(0,0,0),this.top_drawar_data_list.forEach((function(o,n){o&&(o.num=0,o.color=null,o.node_item_list.forEach((function(o){t.pushNodePool(o)})),o.node_item_list=[],o.is_an_move=!1,o.is_an_move_num=[],o.is_gold_down=!1,o.is_gold_down_num=[],o.is_open=!1)})),this.data_list.color_target.forEach((function(o){if(o){var n=o.num;if(n<=10){var e=t.top_drawar_data_list.find((function(o){return 0==o.num}));e.color=o.color,e.num=n}else{var i=Math.floor(n/10),a=n%10;if(i>0)for(var r=0;r<i;r++){var l=t.top_drawar_data_list.find((function(o){return 0==o.num}));l.color=o.color,l.num=10}if(a>0){var s=t.top_drawar_data_list.find((function(o){return 0==o.num}));s.color=o.color,s.num=a}}}})),this.is_close_temp=[])},a.openAnimation=function(o){void 0===o&&(o=-1),this.gan_type_num=o,-1==o||this.is_close_temp.includes(o)||this.is_close_temp.push(o),G.playAnimationOnce(this.node_open),P.getInstance().audioPlay(w.pullRod,this)},a.openDrawarAn=function(){var o=this;if(-1==this.gan_type_num){var t=!1;this.top_drawar_data_list.forEach((function(o){o&&o.num>0&&(G.playAnimationOnce(o.node,"drawer_appear"),o.is_open=!0,t=!0)})),t&&P.getInstance().audioPlay(w.openDrawer,this)}else{var n=!1;this.is_close_temp.forEach((function(t){o.closeDrawar(t)&&(n=!0)})),n&&P.getInstance().audioPlay(w.closeDrawer,this)}},a.onDrawerAnim=function(o){o==y.DRAWER_ANIM&&this.openDrawarAn()},a.setDataGameTopColor=function(){var o=this,t=this.getGameTop().getTopColorData().filter((function(o){return o.fly_gold_color.length>0}));t&&t.forEach((function(t){t.fly_gold_color.forEach((function(n){o.setGoldDownAn(t.id,n)})),t.fly_gold_color=[]}))},a.setGoldDownAn=function(o,t){var n=this;console.log("setGoldDownAn:",o);var e=this.top_drawar_data_list.find((function(t){return t.id==o}));if(e)if(e.is_gold_down)e.is_gold_down_num.push(t);else{e.is_gold_down=!0,console.log("播放硬币下落动画:",e);var i=this.getNodePool();i.getComponent(d).material=this.getMeterial(t),i.parent=e.node_item_content,i.worldPosition=e.fly_gold_postion.clone(),p(i).by(.2,{position:new u(0,-2,0)}).call((function(){n.pushNodePool(i),n.getGameTop().setLabelNum(o),n.onRunGoldAntion(o,t)})).start(),setTimeout((function(){e.is_gold_down=!1,e.is_gold_down_num.length>0&&n.setGoldDownAn(o,e.is_gold_down_num.shift())}),100)}else console.error("没有找到颜色！！！")},a.onRunGoldAntion=function(o,t){var n=this;console.log("onRunGoldAntion:",o,"---color:",t);var e=this.top_drawar_data_list.find((function(t){return t.id==o}));if(e)if(e.is_open)if(e.is_an_move)e.is_an_move_num.push(t);else{e.is_an_move=!0;var i=this.getNodePool();i.getComponent(d).material=this.getMeterial(t),i.parent=e.node_item_content;var a=new u,r=new u;a.set(.026,.219+.7,-1.249),i.position=a.clone(),r.set(.7,.7,.7),i.scale=r.clone(),console.log("开始动画!!"),p(i).call((function(){a.y-=.7,r.set(1,1,1),e.node_item_list.forEach((function(o){p(o).to(.17,{position:new u(o.position.x,o.position.y,o.position.z+.2)}).start()})),P.getInstance().audioPlay(w.coinDrawer,n)})).to(.17,{position:a,scale:r}).call((function(){a.y+=.1})).to(.08,{position:a}).call((function(){a.y=.219})).to(.08,{position:a}).call((function(){e.node_item_list.push(i),e.is_an_move=!1,e.is_an_move_num.length>0?n.onRunGoldAntion(o,e.is_an_move_num.shift()):n.setDataGameTopColor()})).start()}else console.log("当前钱盒已经关闭，不在播放动画");else console.error("没有找到颜色！！！")},a.closeDrawar=function(o){var t=this;console.log("关闭盒子：",o);var n=this.top_drawar_data_list.find((function(t){return t.id==o}));if(!n)return console.error("没有找到颜色！！！"),!1;if(!n.is_open)return console.log("当前钱盒已经关闭，不在播放动画"),!1;n.is_open=!1,G.playAnimationOnce(n.node,"drawer_done"),G.playAnimationOnce(n.node.parent,"cashregister_done");var e=!0;return this.top_drawar_data_list.forEach((function(o){o.is_open&&(e=!1)})),e&&(console.log("所有盒子都关闭了，开始播放结束动画"),G.playAnimationAndChange(n.node.parent,"cashregister_done1","cashregister_win",(function(){t.getGameTop().isFinishGame()&&!t.getGameTop().getIsShowFinish()&&(console.log("game_top_comp_游戏结束"),t.getGameTop().setIsShowFinish(!0),t.getGameTop().getGameRoot().finishGame()),t.node_cash.active=!0,G.resetParticle(t.node_cash),t.getGameTop().node_cash.active=!0,G.resetParticle(t.getGameTop().node_cash),P.getInstance().audioPlay(w.spitOutBanknotes,t),P.getInstance().audioPlay(w.fallingBanknotes,t)}))),!0},a.getNodePool=function(){if(this.node_pool||(this.node_pool=new f),this.node_pool.size()>0)return this.node_pool.get();var o=m(this.prefab_gold),t=o.eulerAngles.clone();return t.x=90,o.eulerAngles=t,o},a.pushNodePool=function(o){o.parent=null,h.stopAllByTarget(o),this.node_pool.put(o)},a.getMeterial=function(o){var t;return console.log("getMeterial:",o),this.material_color.forEach((function(n){n.game_color==o&&(t=n.color_hex1)})),t},a.getGameTop=function(){return this.game_top||(this.game_top=D.game.getGameRoot().getComponent(T).getTopGame()),this.game_top},t}(v)).prototype,"prefab_gold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(x.prototype,"node_open",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(x.prototype,"drawar_list",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(x.prototype,"fly_gold_postion",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=t(x.prototype,"node_game_top",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(x.prototype,"node_cash",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(x.prototype,"material_color",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=x))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopComboComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./ViewUtil.ts","./Config.ts","./AnimationUtil.ts","./SoundModel.ts"],(function(t){var o,e,n,r,i,a,s,c,u,m,p,l,h,d;return{setters:[function(t){o=t.inheritsLoose,e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,a=t.Sprite,s=t.ParticleSystem2D,c=t.NodePool},function(t){u=t.BaseComp},function(t){m=t.ViewUtil},function(t){p=t.Sound,l=t.Bundle},function(t){h=t.animationUtil},function(t){d=t.SoundModel}],execute:function(){var f;r._RF.push({},"4cb1fR+J0VBKoEmrF/BXjAx","GameTopComboComp",void 0);var b=i.ccclass;i.property,t("GameTopComboComp",b("GameTopComboComp")(f=function(t){function r(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this).pool_node=null,o.combo_num=0,o}o(r,t);var i=r.prototype;return i.initData=function(){this.combo_num=0},i.addComboNum=function(t){var o=Math.floor(t/10);this.combo_num+=o},i.onRunCombo=function(){this.combo_num>=9&&(this.combo_num=9),this.playAn()},i.playAn=function(){var t=e(n().mark((function t(){var o,e,r,i,c,u,m,f,b,C,_=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.combo_num>1)){t.next=25;break}return t.next=3,this.getNode();case 3:return o=t.sent,this.node.addChild(o),e=o.getChildByName("node_combo"),r=e.getChildByName("combo_1").getComponent(a),i=e.getChildByName("combo").getComponent(a),c=e.getChildByName("star").getComponent(s),u=e.getChildByName("star_one").getComponent(s),m="texture/combo/combo"+(this.combo_num-1),t.next=13,this.loadSpriteFrame(m,l.GAME_TOP);case 13:return f=t.sent,r.spriteFrame=f,i.spriteFrame=f,b="texture/combo/light"+(this.combo_num-1),t.next=19,this.loadSpriteFrame(b,l.GAME_TOP);case 19:C=t.sent,c.spriteFrame=C,u.spriteFrame=C,h.resetParticle(e),h.showAndPlayAnimation(o,"Combo",(function(){_.setNode(o)})),d.getInstance().audioPlay(p.combo1,this);case 25:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.getNode=function(){var t=e(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pool_node||(this.pool_node=new c),!(this.pool_node.size()>0)){t.next=3;break}return t.abrupt("return",this.pool_node.get());case 3:return t.next=5,m.createPrefabNodeAsync("prefab/Combo",l.GAME_TOP);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.setNode=function(t){t.parent=null,this.pool_node.put(t)},r}(u))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig2.ts","./GameApp.ts","./Game.ts","./BaseComp.ts","./GameUIConfig.ts","./Common.ts","./UserModel.ts","./GameModel.ts","./AnimationUtil.ts","./GameTopFlyComp.ts","./SoundModel.ts","./Config.ts","./TimeUtil.ts","./ViewUtil.ts","./GameTopPropComp.ts","./GameTopComboComp.ts","./GameTopTargetGoldComp.ts"],(function(e){var t,n,o,i,r,a,s,l,c,u,_,h,m,p,d,f,g,w,y,v,b,C,G,T,x,N,k,P,S,A,F,E,D,z,V,M,I,R,B,U,L,W;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,o=e.inheritsLoose,i=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Enum,u=e.SpriteFrame,_=e.Prefab,h=e.Node,m=e.Label,p=e.Vec3,d=e.Color,f=e.Animation,g=e.tween,w=e.instantiate,y=e.ParticleSystem2D,v=e.Tween,b=e.NodePool,C=e.UITransform,G=e.Sprite},function(e){T=e.GameColor},function(e){x=e.GameApp},function(e){N=e.Game},function(e){k=e.BaseComp},function(e){P=e.ViewName},function(e){S=e.common},function(e){A=e.userModel},function(e){F=e.game_model},function(e){E=e.animationUtil},function(e){D=e.GameTopFlyComp},function(e){z=e.SoundModel},function(e){V=e.Sound,M=e.EventName,I=e.Bundle},function(e){R=e.timeUtil},function(e){B=e.ViewUtil},function(e){U=e.GameTopPropComp},function(e){L=e.GameTopComboComp},function(e){W=e.GameTopTargetGoldComp}],execute:function(){var O,j,H,Q,Y,q,J,K,X,Z,$,ee,te,ne,oe,ie,re,ae,se,le,ce,ue,_e,he,me,pe,de,fe,ge,we,ye,ve,be,Ce,Ge,Te,xe,Ne,ke,Pe,Se,Ae,Fe,Ee;s._RF.push({},"e48f1QIYD5G34N4rRDijM2V","GameTopComp",void 0);var De=l.ccclass,ze=l.property;c(T);var Ve=e("GameTopCompConfig",(O=De("GameTopCompConfig"),j=ze({displayName:"颜色",type:T}),H=ze({displayName:"图片",type:u}),Q=ze({displayName:"亮色"}),Y=ze({displayName:"描边色"}),O((K=t((J=function(){n(this,"game_color",K,this),n(this,"sprite_color",X,this),n(this,"color_hex1",Z,this),n(this,"color_hex2",$,this)}).prototype,"game_color",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.RED}}),X=t(J.prototype,"sprite_color",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(J.prototype,"color_hex1",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(0,0,0,0)}}),$=t(J.prototype,"color_hex2",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(0,0,0,0)}}),q=J))||q));e("GameTopComp",(ee=De("GameTopComp"),te=ze(_),ne=ze(_),oe=ze(h),ie=ze(m),re=ze(h),ae=ze(_),se=ze(L),le=ze(h),ce=ze(_),ue=ze(h),_e=ze(h),he=ze({type:Ve,displayName:"目标飞升以及目标需求硬币样式"}),me=ze({type:Ve,displayName:"游戏中新版顶部目标显示"}),pe=ze({type:p,displayName:"飞升贝塞尔曲线一阶位置"}),de=ze({displayName:"飞升时间"}),ee((we=t((ge=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"node_prefab",we,i(t)),n(t,"node_fly_prefab",ye,i(t)),n(t,"node_contetn",ve,i(t)),n(t,"label_guanka_num",be,i(t)),n(t,"win_firework",Ce,i(t)),n(t,"firework_prefab",Ge,i(t)),n(t,"node_combo",Te,i(t)),n(t,"node_fly_cion",xe,i(t)),n(t,"traget_gold",Ne,i(t)),n(t,"node_chick",ke,i(t)),n(t,"node_cash",Pe,i(t)),n(t,"gameTopCompConfigs",Se,i(t)),n(t,"game_top_target_coin",Ae,i(t)),n(t,"node_item_fly_postion",Fe,i(t)),n(t,"fly_an_tiome",Ee,i(t)),t.node_cashier_desk=null,t.v3_to_v2=new p,t.data_list=null,t.ci_num=0,t.top_color=[],t.node_top_item=[],t.isFinish=!1,t.isShowFinish=!1,t.node_fly_pool=null,t.node_item_pool=null,t.node_fly_item_list=[],t.prop_btn_node=null,t.is_run_an=!1,t.is_show_prop_node=!1,t.rare_color=null,t.game_node_root=null,t.target_gold=null,t.play_target=!1,t.start_time=0,t}o(t,e);var s=t.prototype;return s.start=function(){this.initTragetGoldView(),this.initPropView(),this.createGM(),this.time_game()},s.initPropView=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.createPrefabNodeAsync("prefab/prop_layout",I.GAME_TOP);case 2:t=e.sent,this.node.addChild(t),this.prop_btn_node=t.getComponent(U),this.prop_btn_node.node.active=this.is_show_prop_node;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.initTragetGoldView=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.createPrefabNodeAsync("prefab/game_target_gold",I.GAME_TOP);case 2:t=e.sent,this.node.addChild(t),this.target_gold=t.getComponent(W),this.target_gold.setGameTop(this),this.target_gold.node.active=!1,this.target_gold.node.active=this.play_target,this.play_target&&this.startGameView();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.setData=function(){var e=r(a().mark((function e(t,n){var o,i,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),console.log("---加载顶部游戏数据1---",n),console.log("---加载顶部游戏数据2---",t),t&&(this.data_list=t,this.node_cashier_desk.setData(t),this.node_contetn.parent.parent=this.node_cashier_desk.node_game_top,this.node_contetn.parent.position=new p(0,0,0)),this.data_list&&this.data_list.send_color_num&&this.data_list.send_color_num.length>0&&(this.rare_color=this.data_list.send_color_num[0].color),this.node_item_pool||(this.node_item_pool=new b),this.isFinish=!1,this.isShowFinish=!1,this.is_run_an=!1,this.label_guanka_num.string=A.game_pass+"",this.ci_num=0,x.event.emit(M.GAME_STEP_EVENT,{type:3,num:this.data_list.finish_num-this.ci_num+""}),this.node_fly_item_list.length>0)for(;this.node_fly_item_list.length>0;)this.pushFlyNode(this.node_fly_item_list.shift());for(;this.node_contetn.children.length>0;)o=this.node_contetn.children[0],this.node_item_pool.put(o),this.node_contetn.removeChild(o);this.top_color=[],this.node_top_item=[],i=[],this.data_list.color_target.forEach((function(e){if(e){var t=e.num;if(t>0)if(t<=10)i.push(e);else{var n=Math.floor(t/10),o=t%10;if(n>0)for(var r=0;r<n;r++)i.push({color:e.color,num:10});o>0&&i.push({color:e.color,num:o})}}})),console.log("整理后的顶部数据：",i),i.forEach((function(e,t){if(e&&e.num>0){var n;r.node_item_pool.size()<=0?n=w(r.node_prefab):((n=r.node_item_pool.get()).active=!0,n.scale=new p(1,1,1)),r.node_contetn.addChild(n);var o=n.getChildByName("sprite_shadow"),i=n.getChildByName("sprite_coin").getComponent(G),a=n.getChildByName("label").getComponent(m),s=a.node.getChildByName("label1").getComponent(m),l=n.getChildByName("icon_done"),c=r.gameTopCompConfigs.find((function(t){return t.game_color==e.color})),u=r.game_top_target_coin.find((function(t){return t.game_color==e.color}));i.node.active=!0,i.spriteFrame=u.sprite_color,i.node.scale=new p(1,1,1),o.scale=new p(1,1,1),a.node.active=!0,a.string=e.num+"",a.color=c.color_hex2,a.node.scale=new p(1,1,1),s.string=e.num+"",s.color=c.color_hex1,l.active=!1;var _=i.node.getChildByName("sprite_coin_shader").getComponent(G),h=n.getChildByName("Particle_goldcoin");c.game_color==r.rare_color?(_.spriteFrame=u.sprite_color,_.node.active=!0,E.resetParticle(h)):(_.node.active=!1,h.active=!1),n.scale=new p(0,0,0),r.top_color.push({id:t,color:e.color,num:0,max_num:e.num,fly_gold_color:[]}),r.node_top_item.push({id:t,node:n,color:e.color})}})),n&&this.startGameView(),console.log("top_color:",this.top_color),console.log("node_top_item:",this.node_top_item);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),s.showFlyAn=function(){var e=r(a().mark((function e(t,n,o){var i,r,s,l,c,u,_,h,m,d,f,g,w=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o&&(o=1),console.log("---showFlyAn--",t),console.log("---this.top_color--",this.top_color),(i=this.top_color.filter((function(e){return e.color==t})))&&i.length>0&&(i.length>1?(r=i.find((function(e){return e.num<e.max_num})))||(r=i[0]):1==i.length&&(r=i[0])),r){e.next=10;break}if(r=this.top_color.find((function(e){return e.color==T.MULTICOLOURED}))){e.next=10;break}return console.error("---没有飞升数据---"),e.abrupt("return");case 10:for(r.max_num,r.num,s=Math.floor(o/10),console.log("add_num:",s),console.log("data_temp:",r),r.num>=r.max_num?(r.num=r.max_num,(l=this.top_color.find((function(e){return e.color==T.MULTICOLOURED&&e.num<e.max_num})))&&((r=l).max_num,r.num,r.num+=s,r.num>=r.max_num&&(r.num=r.max_num))):(r.num+=s,r.num>=r.max_num&&(r.num=r.max_num)),console.log("data_temp:",r),c=0;c<s;c++)r.fly_gold_color.push(t);if(this.isFinish=this.top_color.every((function(e){return e.num>=e.max_num})),(_=this.node_top_item.find((function(e){return e.id==r.id})))&&(u=_.node),u){e.next=23;break}return console.error("没有可以播放动画的节点"),e.abrupt("return");case 23:return h=u.worldPosition.clone(),this.getGameRoot().camera_node.convertToUINode(h,this.node,h),h.y+=500,h=B.calculateNodeToWorldPos(this.node,h),this.getGameRoot().camera_node.convertToUINode(n,this.node,this.v3_to_v2),(m=this.getFlyNode()).node.setPosition(this.v3_to_v2.clone()),this.node_fly_item_list.push(m),e.next=33,m.setData(t,s);case 33:d=e.sent,this.is_run_an=!0,f=this.v3_to_v2.x>0?-this.node_item_fly_postion.x:this.node_item_fly_postion.x,this.v3_to_v2.set(d.worldPosition),g=new p(this.v3_to_v2.x+f,this.v3_to_v2.y-this.node_item_fly_postion.y,0),E.bezierTo(d,this.fly_an_tiome,this.v3_to_v2.clone(),g,h,null,!0,!0).call((function(){var e=w.node_fly_item_list.findIndex((function(e){return e==m}));w.node_fly_item_list.splice(e,1),w.pushFlyNode(m),w.node_cashier_desk.setDataGameTopColor(),w.is_run_an=!1})).start();case 39:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}(),s.setLabelNum=function(e){var t=this;if(this.node_top_item||!(this.node_top_item.length<=0)){var n=this.node_top_item.find((function(t){return t.id==e}));if(n){var o=n.node;if(o){var i=o.getChildByName("label").getComponent(m),r=i.node.getChildByName("label1").getComponent(m),a=parseInt(i.string);a>0?(a--,i.string=a+"",r.string=a+"",0!=a?(this.rare_color&&n.color==this.rare_color?o.getComponent(f).play("Done_goldcoin"):o.getComponent(f).play("Done1"),E.resetParticle(o.getChildByName("Particle2D")),z.getInstance().audioPlay(V.tickOff,this)):(o.getComponent(f).play("Done"),E.resetParticle(o.getChildByName("Particle2D1")),z.getInstance().audioPlay(V.complete,this),this.scheduleOnce((function(){t.node_cashier_desk.openAnimation(e)}),.5))):o.getComponent(f).play("Done_get")}}1==A.game_pass&&this.getGameRoot().node_guide&&this.getGameRoot().node_guide.showGuide13()}},s.setSubtractMaxNum=function(){this.ci_num++;var e=this.data_list.finish_num-this.ci_num;e<=5?(x.event.emit(M.GAME_STEP_EVENT,{type:2,num:e+""}),E.showAndPlayAnimations(this.getGameRoot().node_joystick.node_warning,"warning_number")):x.event.emit(M.GAME_STEP_EVENT,{type:3,num:e+""})},s.onPropResurgence=function(){this.ci_num=this.data_list.finish_num-6,this.setSubtractMaxNum(),this.isFinish=!1,this.isShowFinish=!1,this.is_run_an=!1},s.onFinishGameAn=function(){console.log("--游戏结束--，游戏过关顶部动画"),this.onWinShowView2(),this.onWinShowView3(),this.is_show_prop_node=!1,this.prop_btn_node&&(this.prop_btn_node.node.active=!1)},s.onWinShowView1=function(){var e=this;return new Promise((function(t,n){var o=0;e.node_top_item.forEach(r(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){E.showAndPlayAnimation(n.node,"disappear",r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0==--o&&t(null);case 2:case"end":return e.stop()}}),e)}))))}),100*o),o++;case 2:case"end":return e.stop()}}),e)}))))}))},s.onWinShowView2=function(){z.getInstance().audioPlay(V.win,this);var e=this.node.getComponent(f);E.playAnimationAndChange(e,"win","win_idle",(function(){}))},s.onWinShowView3=function(){var e=this,t=g(this.win_firework).call((function(){e.win_firework.active=!0;var t=0;e.win_firework.children.forEach((function(n){var o;n&&(g(n).delay(.2*t).call((function(){n.children.length<=0?(o=w(e.firework_prefab),n.addChild(o)):o=n.children[0],o.active=!0,o.children[0].getComponent(y).resetSystem(),o.children[1].getComponent(y).resetSystem()})).delay(1).call((function(){t--,o.active=!1,0==t&&(e.win_firework.active=!1)})).start(),t++)}))})).delay(2.5);g(this.win_firework).repeatForever(t).start()},s.onWindShowView4=function(){var e=this;return new Promise((function(t,n){E.showAndPlayAnimation(e.node,"panel_appear",(function(){e.node.active=!0,console.log("---425---"),t(null)})),e.onWinShowView1()}))},s.startGameView=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.target_gold){e.next=3;break}return this.play_target=!0,e.abrupt("return");case 3:return this.prop_btn_node&&(this.prop_btn_node.node.active=!1),this.node_chick.active=!0,this.target_gold.node.active=!0,e.next=8,this.target_gold.setDataAn();case 8:this.node_chick.active=!1,this.target_gold.node.active=!1,this.getGameRoot().node_guide&&this.getGameRoot().node_guide.showGuide(),this.onShowTopAn();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onShowTopAn=function(){console.log("重置顶部UI界面"),x.event.emit(M.GAME_STEP_EVENT,{type:1,num:this.data_list.finish_num-this.ci_num+""}),this.is_show_prop_node=1!=A.game_pass,this.prop_btn_node&&1!=A.game_pass&&(this.prop_btn_node.node.active=!0,this.prop_btn_node.onInit()),this.node_cashier_desk&&this.node_cashier_desk.openAnimation(),x.config.game.isTest&&(this.start_time=Date.now())},s.onBtnClick=function(e,t){var n=this;e.target&&(console.log("event.target",e.target),e.target.active=!1),this.node_chick.active=!0,v.stopAllByTarget(this.win_firework),this.win_firework.active=!1,this.node_cash.active=!1,this.node_cashier_desk.node_cash.active=!1,this.onWindShowView4().then((function(){n.getGameRoot().nextGame()}))},s.getFlyNode=function(){if(this.node_fly_pool||(this.node_fly_pool=new b),this.node_fly_pool.size()<=0){var e=w(this.node_fly_prefab);return e.parent=this.node,e.position=new p(999,999,999),e.getComponent(D)}var t=this.node_fly_pool.get();return t.parent=this.node_fly_cion,t.position=new p(999,999,999),t.getComponent(D)},s.pushFlyNode=function(e){e&&(e.init(),e.node.parent=null,this.node_fly_pool.put(e.node))},s.onDestroy=function(){e.prototype.onDestroy.call(this),this.node_fly_pool.clear(),this.node_item_pool.clear()},s.isCloseGame=function(){return this.ci_num>=this.data_list.finish_num},s.isFinishGame=function(){return this.isFinish},s.onShowSetting=function(){F.finish_game||this.game_node_root.getIsGuide()||x.Layer.open(P.SettingDialog)},s.getIsShowFinish=function(){return this.isShowFinish},s.setIsShowFinish=function(e){this.isShowFinish=e},s.getTopColor=function(){var e=[];return this.top_color.forEach((function(t){if(t){var n=e.find((function(e){return e.color==t.color}));n?(n.num+=t.num,n.max_num+=t.max_num):e.push({color:t.color,num:t.num,max_num:t.max_num})}})),e},s.getTopColorData=function(){return this.top_color},s.getIsPlayAn=function(){return this.is_run_an},s.getPropComp=function(){return this.prop_btn_node},s.getResidueCiNum=function(){return this.data_list.finish_num-this.ci_num},s.getIsCiNum=function(){return this.ci_num},s.getGameRoot=function(){return this.game_node_root||(this.game_node_root=x.game.getGameRoot().getComponent(N)),this.game_node_root},s.getTopTarGetNum=function(){var e=0,t=[];return this.getTopColor().forEach((function(n){var o=n.max_num-n.num;o>0&&(e+=o,t.push(n.color))})),{num:e,color:t}},s.getTopGameNodeColor=function(){return this.node_top_item},s.createGM=function(){var e=this;if(x.config.game.isTest){var t=this.node.getComponent(C),n=t.width/2*.85,o=t.height/2*.65;if(S.createGMBtn(this.node,"清空缓存",(function(){x.storage.clear()}),n,o),!F.finish_game&&x.config.game.isTest){var i=this.node.getComponent(C),r=i.width/2*.85,a=i.height/2*.7;S.createGMBtn(this.node,"下一关",(function(){A.game_pass++,e.getGameRoot().nextGame()}),r,a)}}},s.time_game=function(){var e=this;if(x.config.game.isTest){var t=new h,n=t.addComponent(m);this.node.addChild(t);var o,i,r=this.node.getComponent(C);null==o&&(o=r.width/2*.75),null==i&&(i=r.height/2*.9),t.setPosition(o,i),setInterval((function(){if(e.data_list&&!e.isCloseGame()&&!e.isShowFinish&&0!=e.start_time){var t=Date.now()-e.start_time,o=R.timeStampToDuration(t,2);n.string=o}}))}},t}(k)).prototype,"node_prefab",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ge.prototype,"node_fly_prefab",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ge.prototype,"node_contetn",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ge.prototype,"label_guanka_num",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ge.prototype,"win_firework",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(ge.prototype,"firework_prefab",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ge.prototype,"node_combo",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(ge.prototype,"node_fly_cion",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ge.prototype,"traget_gold",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(ge.prototype,"node_chick",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(ge.prototype,"node_cash",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ge.prototype,"gameTopCompConfigs",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ae=t(ge.prototype,"game_top_target_coin",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fe=t(ge.prototype,"node_item_fly_postion",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),Ee=t(ge.prototype,"fly_an_tiome",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),fe=ge))||fe));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopFlyComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameConfig2.ts","./AnimationUtil.ts","./JoyStick.ts"],(function(e){var i,o,n,l,t,r,a,u,c,b,_,p,s,m,d,f,h,y,g,x;return{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,n=e.inheritsLoose,l=e.assertThisInitialized},function(e){t=e.cclegacy,r=e._decorator,a=e.Enum,u=e.SpriteFrame,c=e.Sprite,b=e.Node,_=e.Label,p=e.MotionStreak,s=e.Color,m=e.Vec3,d=e.Animation,f=e.Tween},function(e){h=e.BaseComp},function(e){y=e.GameColor},function(e){g=e.animationUtil},function(e){x=e.ColorGameJoyStickCofig}],execute:function(){var w,v,C,z,T,F,G,N,A,L,S,k,D,B,P,R,E,M,j,J,U,H,I,O,V,q,K,Q,W,X,Y,Z,$,ee,ie,oe,ne,le;t._RF.push({},"aad0e5cggdEnryCN9kMe5jR","GameTopFlyComp",void 0);var te=r.ccclass,re=r.property;a(y);var ae=e("GameflyTopConfig",(w=te("GameflyTopConfig"),v=re({displayName:"颜色",type:y}),C=re({displayName:"图片",type:u}),z=re({displayName:"亮色"}),T=re({displayName:"描边色"}),w((N=i((G=function(){o(this,"game_color",N,this),o(this,"sprite_color",A,this),o(this,"color_hex1",L,this),o(this,"color_hex2",S,this)}).prototype,"game_color",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.RED}}),A=i(G.prototype,"sprite_color",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(G.prototype,"color_hex1",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0,0)}}),S=i(G.prototype,"color_hex2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(0,0,0,0)}}),F=G))||F));e("GameTopFlyComp",(k=te("GameTopFlyComp"),D=re(c),B=re(c),P=re(b),R=re(_),E=re(_),M=re(_),j=re(c),J=re(c),U=re(c),H=re(p),I=re({type:[ae],displayName:"图片和颜色"}),O=re({type:[x],displayName:"拖尾颜色"}),k((K=i((q=function(e){function i(){for(var i,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return i=e.call.apply(e,[this].concat(t))||this,o(i,"sprite_icon",K,l(i)),o(i,"sprite_icon_double",Q,l(i)),o(i,"node_Label",W,l(i)),o(i,"label_num1",X,l(i)),o(i,"label_num2",Y,l(i)),o(i,"label_num_double",Z,l(i)),o(i,"label_x",$,l(i)),o(i,"label_x2",ee,l(i)),o(i,"label_x_double",ie,l(i)),o(i,"motion",oe,l(i)),o(i,"gameTopCompConfigs",ne,l(i)),o(i,"motion_color",le,l(i)),i.init_label1=void 0,i.init_label2=void 0,i.init_label_double=void 0,i.init_label_double_x=void 0,i.temp_vec3=new m(1,1,1),i}n(i,e);var t=i.prototype;return t.start=function(){this.init_label1=this.label_num2.node.position.clone(),this.init_label2=this.label_x2.node.position.clone(),this.init_label_double=this.label_num_double.node.position.clone(),this.init_label_double_x=this.label_x_double.node.position.clone()},t.setData=function(e,i){var o=this;return new Promise((function(n,l){var t=o.gameTopCompConfigs.find((function(i){return i.game_color==e}));t&&(o.sprite_icon.spriteFrame=t.sprite_color,o.sprite_icon_double.spriteFrame=t.sprite_color,o.label_num1.color=t.color_hex1,o.label_num2.color=t.color_hex2,o.label_num_double.color=t.color_hex2,o.label_num1.string=i+"",o.label_num2.string=i+"",o.label_num_double.string=i+"",o.label_x.color=t.color_hex1,o.label_x2.color=t.color_hex2,o.label_x_double.color=t.color_hex2),o.init_label1||(o.init_label1=o.label_num2.node.position.clone()),o.init_label2||(o.init_label2=o.label_x2.node.position.clone()),o.node_Label.getComponent(d).play(),g.playAnimationOnce(o.node_Label,1==i?"donecombo":"donecombo_double"),g.showAndPlayAnimations(o.sprite_icon.node.parent.parent,1==i?"donecoin_idle":"donecoin_double",(function(){var i;o.sprite_icon.node.parent.parent.active=!0,o.motion.node.active=!0,o.motion.color=null==(i=o.motion_color.find((function(i){return i.game_color==e})))?void 0:i.color_hex1,n(o.sprite_icon.node.parent)}))}))},t.init=function(){f.stopAllByTarget(this.sprite_icon.node.parent),this.sprite_icon.node.position=new m(0,0,0),this.sprite_icon.node.parent.position=new m(0,0,0),this.sprite_icon.spriteFrame=null,this.sprite_icon_double.node.position=new m(0,0,0),this.sprite_icon_double.node.parent.position=new m(0,0,0),this.sprite_icon_double.spriteFrame=null,this.label_num1.string="",this.label_num2.string="",this.label_num_double.string="",this.label_num2.node.position=this.init_label1.clone(),this.label_x2.node.position=this.init_label2.clone(),this.label_num_double.node.position=this.init_label_double.clone(),this.label_x_double.node.position=this.init_label_double_x.clone(),this.label_num2.node.scale=this.temp_vec3,this.label_x2.node.scale=this.temp_vec3,this.label_num_double.node.scale=this.temp_vec3,this.label_x_double.node.scale=this.temp_vec3,this.motion.node.active=!1},i}(h)).prototype,"sprite_icon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(q.prototype,"sprite_icon_double",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(q.prototype,"node_Label",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(q.prototype,"label_num1",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(q.prototype,"label_num2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(q.prototype,"label_num_double",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(q.prototype,"label_x",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(q.prototype,"label_x2",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(q.prototype,"label_x_double",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i(q.prototype,"motion",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i(q.prototype,"gameTopCompConfigs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=i(q.prototype,"motion_color",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=q))||V));t._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopPropComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameApp.ts","./Game.ts","./GameConfig2.ts","./ContentPlanComp.ts","./video-button.ts","./UserModel.ts","./Config.ts","./AnimationUtil.ts","./NodeUtil.ts","./SoundModel.ts","./GameModel.ts"],(function(t){var i,n,e,o,a,s,c,r,h,p,_,l,m,b,u,d,g,v,f,C,y,P,k,w,S,G;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,r=t.SpriteFrame,h=t.find,p=t.Button,_=t.Sprite,l=t.Label},function(t){m=t.BaseComp},function(t){b=t.GameApp},function(t){u=t.Game},function(t){d=t.GamePropMode,g=t.GameColor},function(t){v=t.ContentPlanComp},function(t){f=t.default},function(t){C=t.userModel},function(t){y=t.EventName,P=t.Sound},function(t){k=t.animationUtil},function(t){w=t.node_util},function(t){S=t.SoundModel},function(t){G=t.game_model}],execute:function(){var N,B,A,I,D,T,M,E,J,z,F,U,L,V,O,j,x,R,H,Q,X;a._RF.push({},"d1719SHwh1FCrt9XljaQPle","GameTopPropComp",void 0);var q=s.ccclass,K=s.property;t("GameTopPropComp",(N=q("GameTopPropComp"),B=K(c),A=K(c),I=K(c),D=K(r),T=K(r),M=K(c),E=K(c),J=K(c),z=K(c),N((L=i((U=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,e(i,"btn1",L,o(i)),e(i,"btn2",V,o(i)),e(i,"btn3",O,o(i)),e(i,"btn_sp",j,o(i)),e(i,"btn_canel_sp",x,o(i)),e(i,"btn1_tips",R,o(i)),e(i,"btn2_tips",H,o(i)),e(i,"btn3_tips",Q,o(i)),e(i,"btn_bg",X,o(i)),i.propComp=null,i.content_plan_comp=null,i.game_top=null,i.isShow=!1,i.node_joystick=null,i.btn1_ad_icon=void 0,i.btn1_label_node=void 0,i.numb1=void 0,i.btn2_ad_icon=void 0,i.btn2_label_node=void 0,i.numb2=void 0,i.btn3_ad_icon=void 0,i.btn3_label_node=void 0,i.numb3=void 0,i.icon_prop1=void 0,i.icon_prop2=void 0,i.icon_prop3=void 0,i.hammer_chick_num=0,i.optional_chick_num=0,i.magnet_chick_num=0,i}n(i,t);var a=i.prototype;return a.start=function(){this.btn1_ad_icon=h("layout/Icon_AD",this.btn1),this.btn1_label_node=this.btn1.getChildByName("Circle_rays"),this.numb1=this.btn1_label_node.getChildByName("numb"),this.btn2_ad_icon=h("layout/Icon_AD",this.btn2),this.btn2_label_node=this.btn2.getChildByName("Circle_rays"),this.numb2=this.btn2_label_node.getChildByName("numb"),this.btn3_ad_icon=h("layout/Icon_AD",this.btn3),this.btn3_label_node=this.btn3.getChildByName("Circle_rays"),this.numb3=this.btn3_label_node.getChildByName("numb"),this.icon_prop1=h("icon_prop",this.btn1),this.icon_prop2=h("icon_prop",this.btn2),this.icon_prop3=h("icon_prop",this.btn3),this.on(y.PROP_UPDATE,this.onUpdataPropNum.bind(this)),this.onUpdataPropNum()},a.onInit=function(){this.isShow=!1,this.onClose(),this.onCloseBtnView2()},a.onClick1=function(t,i){if(this.isShow)return w.tempDisableButton(t.target,1),void this.onClose();if(2==C.game_pass&&this.getJoyStick().getGameNode().getIsGuide()&&this.getJoyStick().getGameNode().node_guide.showGuide3())return this.onShowBtn(1),void this.getPropNode().onPropMode(d.hammer);if(!this.isPlayAn(1)){if(C.isExistsProp(d.hammer))w.tempDisableButton(t.target,1),this.onShowBtn(1),this.getPropNode().onPropMode(d.hammer);else t.target.getComponent(f).onClick(t.target.getComponent(p));this.hammer_chick_num=4}},a.onClick2=function(t,i){if(this.isShow){if(2==C.game_pass&&this.getJoyStick().getGameNode().getIsGuide())return;return w.tempDisableButton(t.target,1),this.onClose(),void this.onCloseBtnView2()}if(2==C.game_pass&&this.getJoyStick().getGameNode().getIsGuide()&&this.getJoyStick().getGameNode().node_guide.showGuide6())this.onShowBtn(2);else if(!this.isPlayAn(2)){if(C.isExistsProp(d.optional))w.tempDisableButton(t.target,1),this.onShowBtn(2);else t.target.getComponent(f).onClick(t.target.getComponent(p));this.optional_chick_num=4}},a.onClick3=function(t,i){if(!this.getJoyStick().prop_node.prop_animation_magent){if(this.isShow)return w.tempDisableButton(t.target,1),void this.onClose();if(2==C.game_pass&&this.getJoyStick().getGameNode().getIsGuide()&&this.getJoyStick().getGameNode().node_guide.showGuide9())return this.onShowBtn(3),this.getPropNode().onPropMode(d.magnet),void(this.magnet_chick_num=4);if(!this.isPlayAn(3)){if(C.isExistsProp(d.magnet))w.tempDisableButton(t.target,1),this.onShowBtn(3),this.getPropNode().onPropMode(d.magnet);else t.target.getComponent(f).onClick(t.target.getComponent(p));this.magnet_chick_num=4}}},a.onClickVideo1=function(){console.log("锤子视频成功"),C.addProp({id:d.hammer,num:1}),this.getPropNode().onPropMode(d.hammer),this.onShowBtn(1)},a.onClickVideo2=function(){console.log("自选视频成功"),C.addProp({id:d.optional,num:1}),this.onShowBtn(2)},a.onClickVideo3=function(){console.log("磁铁视频成功"),C.addProp({id:d.magnet,num:1}),this.onShowBtn(3),this.getPropNode().onPropMode(d.magnet)},a.isPlayAn=function(t){if(G.finish_game)return!0;if(this.getContentPlanComp().isPlayAn()||this.getGameTop().getIsPlayAn()||3==t&&!this.getJoyStick().item_node){console.log("isPlayAn:",this.getContentPlanComp().isPlayAn()),console.log("getIsPlayAn:",this.getGameTop().getIsPlayAn());var i="";return 1==t?i="prop_tipswait":2==t?i="prop_tipswait1":3==t&&(i="prop_tipswait2"),b.Layer.toastSprite(i),!0}return!1},a.onShowBtn=function(t){this.isShow=!0,1==t?(this.btn1_tips.parent.parent.active=!0,this.btn1_tips.active=!0,this.btn2_tips.active=!1,this.btn3_tips.active=!1,this.btn1.active=!0,this.btn2.active=!1,this.btn3.active=!1,this.btn_bg.active=!1,this.btn1.getComponent(_).spriteFrame=this.btn_canel_sp):2==t?(this.btn1_tips.parent.parent.active=!0,this.btn1_tips.active=!1,this.btn2_tips.active=!0,this.btn3_tips.active=!1,this.btn1.active=!1,this.btn2.active=!0,this.btn3.active=!1,this.btn2.getComponent(_).spriteFrame=this.btn_canel_sp,this.btn_bg.active=!0,this.onShowBtnView2()):3==t&&(this.btn1_tips.parent.parent.active=!0,this.btn1_tips.active=!1,this.btn2_tips.active=!1,this.btn3_tips.active=!0,this.btn1.active=!1,this.btn2.active=!1,this.btn3.active=!0,this.btn_bg.active=!1,this.btn3.getComponent(_).spriteFrame=this.btn_canel_sp),this.btn1_ad_icon.active=!1,this.btn1_label_node.active=!1,this.btn2_ad_icon.active=!1,this.btn2_label_node.active=!1,this.btn3_ad_icon.active=!1,this.btn3_label_node.active=!1,this.btn1_ad_icon.parent.active=!1,this.btn2_ad_icon.parent.active=!1,this.btn3_ad_icon.parent.active=!1,this.icon_prop1.active=!1,this.icon_prop2.active=!1,this.icon_prop3.active=!1,this.getJoyStick().getGameNode().getIsGuide()&&(this.btn1_tips.parent.parent.active=!1)},a.onClose=function(){this.isShow=!1,this.getPropNode().onPropMode(null),this.btn1_tips.active=!1,this.btn2_tips.active=!1,this.btn3_tips.active=!1,this.btn1_tips.parent.parent.active=!1,this.btn1.active=!0,this.btn2.active=!0,this.btn3.active=!0,this.btn1.getComponent(_).spriteFrame=this.btn_sp,this.btn2.getComponent(_).spriteFrame=this.btn_sp,this.btn3.getComponent(_).spriteFrame=this.btn_sp,this.icon_prop1&&(this.icon_prop1.active=!0,this.icon_prop2.active=!0,this.icon_prop3.active=!0),this.btn1_ad_icon&&(this.btn1_ad_icon.parent.active=!0),this.btn2_ad_icon&&(this.btn2_ad_icon.parent.active=!0),this.btn3_ad_icon&&(this.btn3_ad_icon.parent.active=!0),this.btn_bg.active=!1,this.btn1_ad_icon&&this.onUpdataPropNum()},a.onShowBtnView2=function(){var t=this,i=this.getJoyStick().getListData(),n=this.getGameTop(),e=i.color_target,o=[];e.forEach((function(t){if(t.color!=g.MULTICOLOURED){var i=n.gameTopCompConfigs.find((function(i){return i.game_color==t.color}));i&&o.push(i)}}));var a=this.btn2.getChildByName("select");a.active=!0,k.playAnimationOnce(a,"select_appear");var s=a.getChildByName("Select_bg"+o.length);s.active=!0;var c=s.getComponentsInChildren(_);c=c.filter((function(t){return t.node.name!=s.name})),o.forEach((function(i,n){var e=c[n];e.spriteFrame=i.sprite_color,e.node.off("click"),e.node.on("click",(function(){2==C.game_pass&&t.getJoyStick().getGameNode().getIsGuide()&&i.game_color!=g.GOLD||(b.event.emit(y.GAME_TOP_OPTINAL_GOLD_EVNET,i.game_color),t.onClose(),t.onCloseBtnView2(),S.getInstance().audioPlay(P.tailor2,t))}))})),S.getInstance().audioPlay(P.tailor1,this)},a.onCloseBtnView2=function(){var t=this.btn2.getChildByName("select");t.active=!0,k.showAndPlayAnimation(t,"select_disappear",(function(){t.children.forEach((function(t){t&&(t.active=!1)}))}))},a.onUpdataPropNum=function(){C.isExistsProp(d.hammer)?(this.btn1_ad_icon.active=!1,this.btn1_label_node.active=!0,this.numb1.active=!0,this.numb1.getComponent(l).string=C.getPropToID(d.hammer).num+""):(this.btn1_ad_icon.active=!0,this.btn1_label_node.active=!1),C.isExistsProp(d.optional)?(this.btn2_ad_icon.active=!1,this.btn2_label_node.active=!0,this.numb2.active=!0,this.numb2.getComponent(l).string=C.getPropToID(d.optional).num+""):(this.btn2_ad_icon.active=!0,this.btn2_label_node.active=!1),C.isExistsProp(d.magnet)?(this.btn3_ad_icon.active=!1,this.btn3_label_node.active=!0,this.numb3.active=!0,this.numb3.getComponent(l).string=C.getPropToID(d.magnet).num+""):(this.btn3_ad_icon.active=!0,this.btn3_label_node.active=!1),this.isShow&&(this.btn1_ad_icon.active=!1,this.btn1_label_node.active=!1,this.btn2_ad_icon.active=!1,this.btn2_label_node.active=!1,this.btn3_ad_icon.active=!1,this.btn3_label_node.active=!1)},a.playPropAn=function(t){var i;if(t==d.hammer){if(this.hammer_chick_num>0)return;i=this.btn1}else if(t==d.optional){if(this.optional_chick_num>0)return;i=this.btn2}else if(t==d.magnet){if(this.magnet_chick_num>0)return;i=this.btn3}i&&k.playAnimationOnce(i,"prop_tips")},a.onDefPropNum=function(){this.hammer_chick_num--,this.optional_chick_num--,this.magnet_chick_num--,this.hammer_chick_num<=0&&(this.hammer_chick_num=0),this.optional_chick_num<=0&&(this.optional_chick_num=0),this.magnet_chick_num<=0&&(this.magnet_chick_num=0)},a.getPropNode=function(){return this.propComp||(this.propComp=this.getJoyStick().prop_node),this.propComp},a.getJoyStick=function(){return this.node_joystick||(this.node_joystick=b.game.getGameRoot().getComponent(u).node_joystick),this.node_joystick},a.getContentPlanComp=function(){return this.content_plan_comp||(this.content_plan_comp=b.game.getGameRoot().getComponent(u).node_content.getComponent(v)),this.content_plan_comp},a.getGameTop=function(){return this.game_top||(this.game_top=b.game.getGameRoot().getComponent(u).getTopGame()),this.game_top},i}(m)).prototype,"btn1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(U.prototype,"btn2",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(U.prototype,"btn3",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(U.prototype,"btn_sp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(U.prototype,"btn_canel_sp",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(U.prototype,"btn1_tips",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(U.prototype,"btn2_tips",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(U.prototype,"btn3_tips",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(U.prototype,"btn_bg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=U))||F));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameTopTargetGoldComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./AnimationUtil.ts","./ViewUtil.ts","./Common.ts"],(function(e){var o,t,n,i,a,r,l,c,p,m,s,d,_,u,g,f,v,y;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,p=e.Node,m=e.Layout,s=e.Vec3,d=e.Animation,_=e.Sprite,u=e.Label},function(e){g=e.BaseComp},function(e){f=e.animationUtil},function(e){v=e.ViewUtil},function(e){y=e.common}],execute:function(){var C,h,T,w,G;l._RF.push({},"ad481Yc9bdJnpI5zNCWtNMN","GameTopTargetGoldComp",void 0);var N=c.ccclass,b=c.property;e("GameTopTargetGoldComp",(C=N("GameTopTargetGoldComp"),h=b([p]),C((G=o((w=function(e){function o(){for(var o,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return o=e.call.apply(e,[this].concat(a))||this,n(o,"item_node_list",G,i(o)),o.game_top=null,o.postion_node=[],o}t(o,e);var l=o.prototype;return l.setDataAn=function(){var e=this;return new Promise(a(r().mark((function o(t){var n,i;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.item_node_list.forEach((function(e){e.active=!1})),n=[],e.item_node_list[0].parent.getComponent(m).enabled=!0,e.game_top.getTopColorData().forEach((function(o,t){if(o){var i=e.item_node_list[t];i.active=!0;var a=i.position.clone();a.y=0,a.z=0,i.position=a;var r=i.getChildByName("sprite_coin").getComponent(_),l=r.node.getChildByName("sprite_coin_shader").getComponent(_),c=i.getChildByName("label").getComponent(u),p=c.node.getChildByName("label1").getComponent(u),m=e.game_top.gameTopCompConfigs.find((function(e){return e.game_color==o.color}));r.spriteFrame=m.sprite_color,o.color==e.game_top.rare_color?(l.node.active=!0,l.spriteFrame=m.sprite_color):l.node.active=!1,c.color=m.color_hex2,p.color=m.color_hex1,c.string=o.max_num+"",p.string=o.max_num+"",n.push({node:i,id:o.id,move_node:e.game_top.getTopGameNodeColor().find((function(e){return e.id==o.id})).node})}})),o.next=6,y.sleep(1);case 6:e.item_node_list[0].parent.getComponent(m).updateLayout(),i=e.node.getChildByName("anim"),f.showAndPlayAnimation(i,"goals",(function(){i.active=!0,e.item_node_list[0].parent.getComponent(m).enabled=!1;var o=0;n.forEach((function(n,i){var a=n.move_node.worldPosition.clone();e.game_top.getGameRoot().camera_node.convertToUINode(a,e.node,a),a=v.calculateNodeToWorldPos(e.node,a);var r=n.node;r.active=!0,o++;var l=r.worldPosition.clone(),c=r.position.x>0?-e.game_top.node_item_fly_postion.x:e.game_top.node_item_fly_postion.x,p=new s(l.x+c,l.y-e.game_top.node_item_fly_postion.y,0);setTimeout((function(){e.node&&f.bezierTo(r,e.game_top.fly_an_tiome,l,p,a,null,!0,!0).call((function(){n.move_node.scale=new s(1,1,1),n.move_node.getComponent(d).play("appear"),r.active=!1,0==--o&&t(null)})).start()}),100*i)}))}));case 9:case"end":return o.stop()}}),o)}))))},l.setGameTop=function(e){this.game_top=e},o}(g)).prototype,"item_node_list",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=w))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/HomeLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameApp.ts","./GameUIConfig.ts","./platform.ts","./platform-const.ts","./Game.ts","./PlatformModel.ts","./NodeUtil.ts"],(function(e){var t,n,o,a,r,i,c,s,m,l,u,p,f,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,i=e._decorator,c=e.Node},function(e){s=e.BaseComp},function(e){m=e.GameApp},function(e){l=e.ViewName},function(e){u=e.platform},function(e){p=e.PlatformCode},function(e){f=e.Game},function(e){g=e.platformModel},function(e){d=e.node_util}],execute:function(){var y,h,S,b,v;r._RF.push({},"73f89Wc+itJCY594SmhSNdS","HomeLayer",void 0);var B=i.ccclass,G=i.property;e("HomeLayer",(y=B("HomeLayer"),h=G(c),y((v=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,o(t,"sidebarBtn",v,a(t)),t}n(t,e);var r=t.prototype;return r.start=function(){this.checkSidebar(),u.trackEvent("homepage",{step:"start"})},r.checkSidebar=function(){var e=this;u.string()==p.Bytedance&&tt.checkScene?tt.checkScene({scene:"sidebar",success:function(t){e.sidebarBtn.active=!0}}):this.sidebarBtn.active=!1},r.onBtnClick=function(e,t){var n;(d.tempDisableButton(e.target,1),m.game.getGameRoot()&&m.game.getGameRoot().getComponent(f)&&m.game.getGameRoot().getComponent(f).getTopGame())?null==(n=m.game.getGameRoot())||null==(n=n.getComponent(f))||n.readyStartGame():m.game.getGameRoot().getComponent(f).isStartGame=!0;m.Layer.remove(l.HomeLayer),g.addPass()},r.onSetBtnClick=function(){m.Layer.open(l.SettingDialog,{isHome:!0})},r.onSidebarBtnTap=function(){m.Layer.open(l.TTSSIDEBAR)},t}(s)).prototype,"sidebarBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=b))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts","./GameConfig2.ts","./ContentPlanComp.ts","./GameApp.ts","./Game.ts","./SoundModel.ts","./Config.ts","./BaseComp.ts","./GameMapModel.ts","./Vec3Util.ts","./ItemMoveComp.ts","./AnimationUtil.ts","./platform-const.ts","./VibrateManager.ts","./ViewUtil.ts","./NumberUtil.ts"],(function(e){var t,o,i,n,s,a,r,l,_,m,d,c,h,p,u,g,f,y,v,w,I,C,b,P,N,A,G,E,M,S,T,x,O,L,B,D,R,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized,s=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){r=e.cclegacy,l=e.Vec3,_=e._decorator,m=e.Enum,d=e.Material,c=e.Label,h=e.Color,p=e.CylinderCollider,u=e.MeshRenderer,g=e.Tween,f=e.tween,y=e.Animation},function(e){v=e.game_model},function(e){w=e.GameColor,I=e.GameItemType,C=e.GameAnimitionEvent},function(e){b=e.ContentPlanComp},function(e){P=e.GameApp},function(e){N=e.Game},function(e){A=e.SoundModel},function(e){G=e.EventName,E=e.Sound,M=e.Bundle},function(e){S=e.BaseComp},function(e){T=e.game_map_model},function(e){x=e.Vec3Util},function(e){O=e.ItemMoveComp},function(e){L=e.animationUtil},function(e){B=e.VibrateType},function(e){D=e.VibrateManager},function(e){R=e.ViewUtil},function(e){k=e.number_util}],execute:function(){var z,V,H,U,J,F,j,Y,W,q,K,Q,X,Z,$,ee,te,oe,ie,ne,se,ae,re,le,_e,me,de,ce,he,pe,ue,ge,fe,ye,ve,we,Ie,Ce;r._RF.push({},"4466cODzJlHcrSx4dcic8A/","Item",void 0);new l;var be=_.ccclass,Pe=_.property;m(w);var Ne=e("ColorGameCofig",(z=be("ColorGameCofig"),V=Pe({displayName:"颜色",type:w}),H=Pe({displayName:"亮色"}),U=Pe({displayName:"描边色"}),z((j=t((F=function(){o(this,"game_color",j,this),o(this,"color_hex1",Y,this),o(this,"color_hex2",W,this)}).prototype,"game_color",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.RED}}),Y=t(F.prototype,"color_hex1",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0,0,0)}}),W=t(F.prototype,"color_hex2",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0,0,0)}}),J=F))||J)),Ae=e("ColorParticle",(q=be("ColorParticle"),K=Pe({displayName:"颜色",type:w}),Q=Pe({displayName:"mix颜色"}),X=Pe({displayName:"max颜色"}),q((ee=t(($=function(){o(this,"game_color",ee,this),o(this,"color_mix",te,this),o(this,"color_max",oe,this)}).prototype,"game_color",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.RED}}),te=t($.prototype,"color_mix",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0,0,0)}}),oe=t($.prototype,"color_max",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(0,0,0,0)}}),Z=$))||Z)),Ge=e("ColorMaterialCofig",(ie=be("ColorMaterialCofig"),ne=Pe({displayName:"颜色",type:w}),se=Pe({displayName:"材质颜色",type:d}),ie((le=t((re=function(){o(this,"game_color",le,this),o(this,"color_hex1",_e,this)}).prototype,"game_color",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return w.RED}}),_e=t(re.prototype,"color_hex1",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=re))||ae));e("item",(me=be("item"),de=Pe(c),ce=Pe(c),he=Pe({type:[Ge],displayName:"金币材质"}),pe=Pe({type:[Ne],displayName:"文字颜色"}),ue=Pe({type:[Ae],displayName:"生成时粒子颜色"}),me((ye=t((fe=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,o(t,"label_node1",ye,n(t)),o(t,"label_node2",ve,n(t)),o(t,"material_color",we,n(t)),o(t,"colorCofigs",Ie,n(t)),o(t,"color_Particle",Ce,n(t)),t._temp_pos1=new l(0,0,0),t._temp_pos2=new l(0,0,0),t.type=I.NONE,t.postion_id=-1,t.game_color_type=w.BLUE,t.item_node_list=[],t.parent_node=null,t.gameTopComp=null,t.redLinComp=null,t.item_move_comp=null,t.send_move_animation=null,t.node_joystick=null,t.eliminate_time=0,t.cha_time=0,t.mix_time=0,t.tween_hight=0,t.tween_item_time=0,t.tween_item_antion_time=0,t.tween_item_antion_time_k=0,t.node_world_postion=null,t.node_special_an=null,t.node_guide_arrow=null,t}i(t,e);var r=t.prototype;return r.start=function(){this.item_move_comp=this.getComponent(O)},r.onFixedPostion=function(){console.log("--178---postion_id:",this.postion_id),this.type!=I.PHYSICS&&(this.setType(I.PHYSICS),this.postion_id>=0&&this.parent_node.getComponent(b).getMoveAllPostion())},r.onSendItem=function(e){this.getComponent(p).isTrigger=!1,e||(e=new l(0,0,-1)).multiplyScalar(20),e.y=0,console.log("---force:",e),this.item_move_comp.force=e,this.item_move_comp.onSendItem(),this.redLinComp.addNodeView(this.node),D.getInstance().play(B.SHORT)},r.onPostion=function(){var e=v.getPostionList(),o=v.getPositionByPoint(this.node.position);-1==o&&console.error("index是空的"),this.postion_id=e[o].id,v.getPostionList()[o].isFixed=!0;var i=[];i.push(this.game_color_type),this.node.children.forEach((function(e,o){var n=e.getComponent(t);n&&(i.push(n.getColor()),e.getComponent(p).enabled=!0)})),v.getPostionList()[o].color=i,this.node.getComponent(p).enabled=!0,this.redLinComp.removeNodeView(this.node),this.node_world_postion=e[o].world_postion.clone()},r.onRandomColorNode=function(e,t,o){if(void 0===o&&(o=!1),t){var i=T.randomMap(e,o);i.sort((function(e,t){return e.sort-t.sort})),this.setItemColor(i,t)}},r.setItemColor=function(e,t){var o=this;this.item_node_list=[];var i=0;e.sort((function(e,t){return e.sort-t.sort}));var n=this.getJoyStick().getListData().send_color_num&&this.getJoyStick().getListData().send_color_num.map((function(e){return e.color}));e.forEach((function(e,s){for(var a=0;a<e.num;a++){if(0==i){var r=o.node.getComponent(u);r||(r=o.node.getComponentInChildren(u)),r.material=o.getMeterial(e.color),o.setColor(e.color),o.setLabelNum(a+1+""),o.item_node_list.push(o),n&&n.find((function(t){return t==e.color}))&&o.sendEventSpecial()}else{var l=t();o.node.addChild(l.node),l.setType(I.IMMOVABLE),o.item_node_list.push(l),o._temp_pos1.set(0,i*v.contetn_item_height,0),l.node.position=o._temp_pos1,l.node.getComponent(p).enabled=!1;var _=l.node.getComponent(u);_||(_=l.node.getComponentInChildren(u)),_.material=o.getMeterial(e.color),l.setColor(e.color),l.setLabelNum(a+1+""),n&&n.find((function(t){return t==e.color}))&&l.sendEventSpecial()}i++}})),console.log("item_node_list:",this.item_node_list.length)},r.onRandomMaterial=function(e){var t=this.node.getComponent(u);t||(t=this.node.getComponentInChildren(u)),t.material=this.getMeterial(e)},r.setType=function(e){if(this.type=e,this.type==I.PHYSICS)this.node.children.forEach((function(e){var o;null==(o=e.getComponent(t))||o.setType(I.IMMOVABLE)})),this.parent_node||(this.parent_node=this.node.parent);else if(this.type==I.IMMOVABLE){var o;null==(o=this.node.getComponent(O))||o.destroy(),this.postion_id>=0&&(console.log("主节点被设置为副节点"),v.getPostionById(this.postion_id).isFixed=!1,v.getPostionById(this.postion_id).color=[]),this.node.scale=new l(1,1,1),this.send_move_animation&&(console.log("有底部动画没被清理，变副节点才清理"),this.send_move_animation.move_bottom_animation_child.animation.stop(),P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.PUSH_NODE,push_node:this.send_move_animation}),this.send_move_animation=null)}else this.type==I.MOVE&&(this.parent_node||(this.parent_node=this.node.parent))},r.setMagnetUI=function(){var e=s(a().mark((function e(){var t,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.getComponent(u).enabled=!1,e.next=3,R.createPrefabNodeAsync("prefab/magnet",M.GAME);case 3:t=e.sent,this.node.addChild(t),(o=t.position.clone()).y=.05,t.position=o,L.playAnimationOnce(t,"magnet_idle"),this.setLabelNum(""),this.game_color_type=w.MAGNET,this.item_node_list.push(this);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.runAnMove=function(e,t,o){var i=this;console.log("---7---fun_finish");for(var n=[],r=this.item_node_list.length-1;r>=0;r--){var _=this.item_node_list[r];_&&_.getColor()==t&&n.push(_)}if(console.log("---427---",n),0==n.length)return console.log("---4---fun_finish"),console.log("item:",this.item_node_list),console.log("coclor:",t),console.log("game_model:",v.getPostionById(this.postion_id)),void(o&&o());var m=e.getItemNodeList().filter((function(e){return e.getColor()==t})).length;if(!m||m<=0)return console.error("---new_len:空的"),void(o&&o());this.getGuideArrow(),e.getGuideArrow(),console.log("item_node.getItemNodeList():",e.getItemNodeList().length);var d=[];n.forEach((function(t,o){var i=new l(e.node_world_postion.x,e.node.worldPosition.y+(e.getItemNodeList().length+o)*v.contetn_item_height,e.node_world_postion.z),n={item:t,worldPosition:t.node.worldPosition.clone(),toWorldPosition:i};d.push(n)}));var c=new l,h=new l,p="";this.tween_hight||(this.tween_hight=this.getJoyStick().tween_hight),this.tween_item_time||(this.tween_item_time=this.getJoyStick().tween_item_time),this.tween_item_antion_time||(this.tween_item_antion_time=this.getJoyStick().tween_item_antion_time),this.tween_item_antion_time_k||(this.tween_item_antion_time_k=this.getJoyStick().tween_item_antion_time_k);var u=(e.getItemNodeList().length+d.length)*v.contetn_item_height,y=this.item_node_list.length*v.contetn_item_height;c=x.getCenterPoint(e.node_world_postion,this.node.worldPosition),y>u?(c.y=y,console.log("旧的高：",y)):(c.y=u,console.log("新的高：",u)),c.y+=this.tween_hight,console.log("---587---postion_id:",this.postion_id),console.log("---582---temp_item_obj:",d),d.forEach(s(a().mark((function n(s,r){var l,_,u,y;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=s.item.node.worldPosition.clone(),_=s.toWorldPosition.clone(),u=i.item_node_list.lastIndexOf(s.item),i.item_node_list.splice(u,1),u=v.getPostionById(i.postion_id).color.lastIndexOf(t),v.getPostionById(i.postion_id).color.splice(u,1),s.item.setType(I.IMMOVABLE),g.stopAllByTarget(s.item.node),v.getPostionById(i.postion_id).isFixed=!0,v.getPostionById(e.getPostionID()).color.push(t),s.item.node.worldPosition=l,1==s.item.node.parent.scale.x&&s.item.node.setScale(v.content_item_scale,1,v.content_item_scale),y=L.bezierTo(s.item.node,i.tween_item_antion_time,l,c,_,null,!0,!1,i.tween_item_antion_time_k),f(s.item.node).call((function(){s.item.node.worldPosition=l,console.log("---622--",s),D.getInstance().play(B.SHORT)})).delay(r*i.tween_item_time).call((function(){s.item.setLabelNum(m+r+1+"")})).then(y).call((function(){A.getInstance().getSoundById(E.stacking1+r).then((function(e){i.playEffect(e.sound_path),p=e.sound_path})).catch((function(){p&&i.playEffect(p)})),s.item.node.setScale(1,1,1),s.item.node.parent=e.node,e.item_node_list.push(s.item),s.item.node.worldPosition=_,h.set(0,s.item.node.position.y,0),s.item.node.position=h,r==d.length-1&&(e.item_node_list.forEach((function(e,t){0!=t&&(h.set(0,t*v.contetn_item_height,0),e.node.position=h)})),console.log("item_node_list629:",i.item_node_list),console.log("item_node_list629:",i.item_node_list.length),i.item_node_list.length>=1||i.postion_id>=0&&(v.getPostionById(i.postion_id).isFixed=!1,i.postion_id=-1),console.log("---3---fun_finish"),o&&o())})).start();case 14:case"end":return n.stop()}}),n)}))))},r.onFlyAn=function(e,o){var i=this;console.log("开始飞升懂哈1",this.item_node_list.length),this.item_node_list.length<10&&console.error("---数据不对---"),console.log("开始飞升懂哈2"),this.eliminate_time||(this.eliminate_time=this.getJoyStick().eliminate_time),this.cha_time||(this.cha_time=this.getJoyStick().cha_time),this.mix_time||(this.mix_time=this.getJoyStick().mix_time);var n=new l(0,0,0),s=function(e,o,s){new l(e.worldPosition.x,e.worldPosition.y+.5,e.worldPosition.z);var a=e.worldPosition.clone(),r=o*Math.max(i.eliminate_time-i.cha_time*o,i.mix_time);f(e).delay(r).call((function(){e.getComponent(t).ItemHeCloseView(a),D.getInstance().play(B.SHORT)})).to(.05,{scale:n}).call((function(){s()})).start()},a="",r=!1;if(v.getPostionById(this.postion_id).color.every((function(t){return t==e}))){for(var _=0,m=function(t){var n=i.item_node_list[t];if(n&&n.getColor()==e){var l=_;s(n.node,_,(function(){0==t?(A.getInstance().audioPlay(E.accomplish,i.gameTopComp),v.current_sound==i.postion_id&&(v.current_sound=-1),i.getGameTop().showFlyAn(i.getColor(),i.node.worldPosition,_),n.onRemoveNode(!0,!0),o&&o()):(v.current_sound!=i.postion_id&&-1!=v.current_sound||(v.current_sound=i.postion_id,r&&a?(console.log("soundMax:",a),P.game.getGameRoot().getComponent(N).getTopGame().playEffect(a)):A.getInstance().getSoundById(E.compose1+l).then((function(e){P.game.getGameRoot().getComponent(N).getTopGame().playEffect(e.sound_path),a=e.sound_path})).catch((function(){r=!0,a&&P.game.getGameRoot().getComponent(N).getTopGame().playEffect(a)}))),n.onRemoveNode(!0,!1))})),_++}},d=this.item_node_list.length-1;d>=0;d--)m(d);this.getGameTop().node_combo.addComboNum(_)}else{for(var c=[],h=this.item_node_list.length-1;h>=0;h--){var p=this.item_node_list[h];p&&p.getColor()==e&&c.push(p)}c.length>=10&&(c.forEach((function(t,n){if(t){var l=i.item_node_list.lastIndexOf(t),_=i.item_node_list.splice(l,1);l=v.getPostionById(i.postion_id).color.lastIndexOf(e),v.getPostionById(i.postion_id).color.splice(l,1),s(t.node,n,(function(){n==c.length-1?(A.getInstance().audioPlay(E.accomplish,i.gameTopComp),i.getGameTop().showFlyAn(e,_[0].node.worldPosition,c.length),v.current_sound==i.postion_id&&(v.current_sound=-1),D.getInstance().play(B.SHORT),t.onRemoveNode(!0,!0),o&&o()):(v.current_sound!=i.postion_id&&-1!=v.current_sound||(v.current_sound=i.postion_id,r&&a?P.game.getGameRoot().getComponent(N).getTopGame().playEffect(a):A.getInstance().getSoundById(E.compose1+n).then((function(e){P.game.getGameRoot().getComponent(N).getTopGame().playEffect(e.sound_path),a=e.sound_path})).catch((function(){a&&P.game.getGameRoot().getComponent(N).getTopGame().playEffect(a)}))),t.onRemoveNode(!1,!1))}))}})),this.getGameTop().node_combo.addComboNum(c.length))}},r.onRemoveNode=function(e,o){if(void 0===e&&(e=!0),void 0===o&&(o=!1),this.node.activeInHierarchy){if(this.postion_id>=0&&(v.getPostionById(this.postion_id).isFixed=!1,v.getPostionById(this.postion_id).color=[],this.postion_id=-1),(this.type!=I.IMMOVABLE&&e||o)&&(o?o&&P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.DISAPEAR_fly,postion:this.node.worldPosition.clone(),game_color:this.game_color_type}):P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.DISAPEAR,postion:this.node.worldPosition.clone()})),this.removeAnimation(),this.node.children.forEach((function(e){var o=e.getComponent(t);o&&o.removeAnimation()})),this.redLinComp&&this.redLinComp.removeNodeView(this.node),this.item_move_comp&&this.item_move_comp.init(),this.game_color_type==w.MAGNET)return this.getJoyStick().prop_node.prop_animation_magent&&(this.getJoyStick().prop_node.prop_animation_magent=null,this.getJoyStick().onSendGoldUI()),void this.node.destroy();this.getJoyStick().pushItem(this),this.item_node_list=[]}},r.removeAnimation=function(){if(this.node_special_an){var e=this.node_special_an;P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.PUSH_NODE,push_node:e}),this.node_special_an=null}if(this.send_move_animation&&(console.log("底部回收1111！！！"),this.send_move_animation.move_bottom_animation_child.animation.stop(),P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.PUSH_NODE,push_node:this.send_move_animation}),console.log("底部回收成功1111！！！",this.send_move_animation),this.send_move_animation=null),this.node_guide_arrow){var t=this.node_guide_arrow;P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.PUSH_NODE,push_node:t}),this.node_guide_arrow=null}},r.isShow=function(){this.node.children.forEach((function(e){if(e){var o=e.getComponent(t);if(o&&o.node.children.length>1){var i=o.node.children.filter((function(e){return!!e.getComponent(t)}));i&&i.length>0&&(console.error("!!!!!出现应该显示的节点数据中有子节点！！！"),i.forEach((function(e){e.destroy()})))}}}))},r.setLabelNum=function(e){var t,o,i=this;this.label_node1.node.active=!0,this.label_node2.node.active=!0,this.label_node1.string=e,this.label_node2.string=e,this.colorCofigs.forEach((function(e,n){i.game_color_type==e.game_color&&(t=e.color_hex1,o=e.color_hex2)})),t&&(this.label_node1.color=t),o&&(this.label_node2.color=o)},r.setPostionDefault=function(){if(-1!=this.postion_id){var e=v.getPostionById(this.postion_id);this.node.position=e.position.clone()}},r.getMeterial=function(e){var t;return this.material_color.forEach((function(o){o.game_color==e&&(t=o.color_hex1)})),t||console.error("空的材质！！！",e),t},r.ItemHeCloseView=function(e){var t=this,o=this.color_Particle.find((function(e){return e.game_color==t.game_color_type})).color_max,i=this.color_Particle.find((function(e){return e.game_color==t.game_color_type})).color_mix;P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.SYNTHESIS,colorMax:o,colorMin:i,postion:e})},r.getGuideArrowAn=function(){this.item_node_list&&0!=this.item_node_list.length&&(this.item_node_list[this.item_node_list.length-1].game_color_type!=w.BLUE||-1==this.postion_id||this.node_guide_arrow||P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.GUIDE_ARROW,bottom_an_node_item:this}))},r.setBottomMoveAn=function(e){this.send_move_animation?console.error("item已经有特殊动画了：",this.send_move_animation.id):(this.send_move_animation=e,this.send_move_animation.root.parent=this.node,this.send_move_animation.root.active=!0,this.send_move_animation.root.position=new l(0,0,0),this.send_move_animation.move_bottom_animation.active=!0,console.log("播放底部动画",this.send_move_animation.id),L.playAnimationAndChange(this.send_move_animation.move_bottom_animation_child.animation,"waiting_appear","waiting_idle"))},r.sendEventSpecial=function(){this.node_special_an?console.error("item已经有特殊动画了：",this.node_special_an.id):P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.SPECIAL,bottom_an_node_item:this})},r.setSpecial=function(e){var t=this;if(this.node_special_an)console.error("item已经有特殊动画了：",this.node_special_an.id);else{this.node_special_an=e,this.node_special_an.root.parent=this.node,this.node_special_an.root.active=!0,this.node_special_an.root.position=new l(0,0,0),this.node_special_an.goldcoin_animiation.active=!0;var o=this.node_special_an.goldcoin_animiation.getComponentsInChildren(y);setTimeout((function(){t.node&&t.node_special_an&&(o.forEach((function(e){e.stop(),e.node.active=!1})),L.playAnimationOnce(o[k.randomNum(0,o.length-1)]))}),100*k.randomNum(0,8))}},r.setGuideArrow=function(e){this.node_guide_arrow?console.error("item已经有箭头了：",this.node_guide_arrow.id):(this.node_guide_arrow=e,this.node_guide_arrow.root.parent=this.node,this.node_guide_arrow.root.active=!0,this.node_guide_arrow.root.position=this.item_node_list[this.item_node_list.length-1].node.position.clone(),L.playAnimationAndChange(this.node_guide_arrow.guide1_arrow,"guide_appear","guide_arrow"))},r.getGuideArrow=function(){if(this.node_guide_arrow){var e=this.node_guide_arrow;P.event.emit(G.GAME_GOLD_ANIMITION,{type:C.PUSH_NODE,push_node:e}),this.node_guide_arrow=null}},r.getType=function(){return this.type},r.setColor=function(e){this.game_color_type=e},r.getColor=function(){return this.game_color_type},r.getItemNodeList=function(){return this.item_node_list},r.getPostionID=function(){return this.postion_id},r.setPostionID=function(e){this.postion_id=e},r.getGameTop=function(){return this.gameTopComp||(this.gameTopComp=P.game.getGameRoot().getComponent(N).getTopGame()),this.gameTopComp},r.getJoyStick=function(){return this.node_joystick||(this.node_joystick=P.game.getGameRoot().getComponent(N).node_joystick),this.node_joystick},t}(S)).prototype,"label_node1",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(fe.prototype,"label_node2",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(fe.prototype,"material_color",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ie=t(fe.prototype,"colorCofigs",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=t(fe.prototype,"color_Particle",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ge=fe))||ge));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMoveComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./Item.ts","./GameModel.ts","./GameConfig2.ts","./Vec3Util.ts","./SoundModel.ts","./Config.ts","./AnimationUtil.ts","./GameApp.ts","./platform-const.ts","./VibrateManager.ts","./UserModel.ts"],(function(t){var o,i,e,n,s,l,r,a,d,c,h,p,m,_,u,g,v,f,P,y,C,w,M,b,A,I,S,N,G;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Vec3,a=t.Tween,d=t.geometry,c=t.PhysicsSystem,h=t.Animation,p=t.CylinderCollider,m=t.tween,_=t.easing},function(t){u=t.BaseComp},function(t){g=t.item},function(t){v=t.game_model},function(t){f=t.GameAnimitionEvent,P=t.GameColor,y=t.GamePropMode},function(t){C=t.Vec3Util},function(t){w=t.SoundModel},function(t){M=t.EventName,b=t.Sound},function(t){A=t.animationUtil},function(t){I=t.GameApp},function(t){S=t.VibrateType},function(t){N=t.VibrateManager},function(t){G=t.userModel}],execute:function(){var j,D,B,L,V;s._RF.push({},"5d274BYHYdDvbwnMTS+lu9V","ItemMoveComp",void 0);var O=l.ccclass,T=l.property;t("ItemMoveComp",(j=O("ItemMoveComp"),D=T({displayName:"距离碰撞点最小值"}),j((V=o((L=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return o=t.call.apply(t,[this].concat(s))||this,e(o,"distance_mix",V,n(o)),o.item=null,o.speed=10,o.postion_list=[],o.postinon_end=void 0,o.postion_obj=void 0,o.isMove=!1,o.isMoveAn=!1,o.isColistion=!1,o.temp_pos=new r,o}i(o,t);var s=o.prototype;return s.start=function(){this.item=this.node.getComponent(g)},s.init=function(){this.postion_list=[],this.postinon_end=null,this.postion_obj=null,this.isMove=!1,this.isMoveAn=!1,this.isColistion=!1,this.force=null,this&&this.node&&this.node.end_pos_list&&(this.node.end_pos_list=null),a.stopAllByTarget(this.node)},s.update=function(t){var o=this;if(this.isMove){var i=this.node.getWorldPosition(),e=r.distance(i,this.postion_obj.pos),n=this.speed*t;if(e<this.distance_mix&&this.isColistion&&(this.isColistion=!1,I.event.emit(M.GAME_GOLD_ANIMITION,{type:f.COLISION,postion:this.postion_obj.hitPoint.clone()})),e>n){var s=n/e,l=new r;r.lerp(l,i,this.postion_obj.pos,s),this.node.setWorldPosition(l)}else{this.node.setWorldPosition(this.postion_obj.pos),this.isMove=!1;var a=this.postion_obj.collison;if(a&&a.getComponent(g)){var d={id:-1,position:this.node.position.clone()};if(v.getPointsWithinCircle(d,v.getPostionList(),v.contetn_item_width+.3).find((function(t){return!t.isFixed}))){if(w.getInstance().audioPlay(b.collision,this),this.onPostion(),this.onAnimate(),this.item&&this.item.send_move_animation){var c=this.item.send_move_animation;A.showAndPlayAnimations(c.move_bottom_animation_child.animation,"waiting_disappear",(function(){c.move_bottom_animation_child.animation.node.active=!1,o.item&&o.item.send_move_animation&&c.id==o.item.send_move_animation.id&&(console.log("底部回收2222！！！",o.item.send_move_animation),I.event.emit(M.GAME_GOLD_ANIMITION,{type:f.PUSH_NODE,push_node:c}),console.log("底部回收成功2222！！！"),o.item.send_move_animation=null)}))}}else w.getInstance().audioPlay(b.rebound,this),this.getPostionBySweepCast()}else w.getInstance().audioPlay(b.rebound,this),this.postion_list.length>0?this.onMovePostion():this.getPostionBySweepCast();N.getInstance().play(S.SHORT)}}},s.onSendItem=function(){this.node.end_pos_list?(this.postion_list=this.node.end_pos_list,this.node.end_pos_list=null,this.onMovePostion()):this.ondefaultMove()},s.onMovePostion=function(){if(this.postion_list.length<=0)this.ondefaultMove();else{var t=this.postion_list.shift(),o=t.pos,i=t.collison;this.postion_obj={start:this.node.worldPosition,pos:o,vector_r:t.vector_r,collison:t.collison,hitPoint:t.hitPoint},i?(this.isMove=!0,this.isColistion=!0):this.getPostionBySweepCast()}},s.ondefaultMove=function(){this.postion_obj={start:this.node.worldPosition,pos:this.node.worldPosition,vector_r:this.force,collison:null,hitPoint:this.node.worldPosition},this.getPostionBySweepCast()},s.getPostionBySweepCast=function(){var t=this.postion_obj.vector_r,o=C.calculateNewPoint(this.postion_obj.pos.clone(),t,v.contetn_item_width/2);o.y=this.postion_obj.pos.y;var i=this.getSweep(o,t);i&&(this.postion_list.push({pos:i.end_pos,collison:i.collison,vector_r:i.vector_r,hitPoint:i.hitPoint}),this.onMovePostion())},s.getSweep=function(t,o){var i=new d.Ray;if(r.copy(i.o,t),r.copy(i.d,o),c.instance.sweepSphereClosest(i,v.contetn_item_width/2)){var e=c.instance.sweepCastClosestResult,n=C.calculateCircleCenterAtCollision(e.hitPoint,v.contetn_item_width,e.hitNormal);n||(n=e.hitPoint.clone());var s=e.hitNormal,l=o.clone();return{end_pos:n,vector_r:C.reflectVector(l,s),collison:e.collider.node,hitPoint:e.hitPoint.clone()}}return console.error("没有射到东西"),console.error("start_pos:",t),console.error("dir_pos:",o),this.item.redLinComp.removeNodeView(this.node),void this.item.onRemoveNode()},s.onPostion=function(){var t=this;if(!this.postinon_end){var o=v.getPostionList(),i=v.getPositionByPoint(this.node.position);if(-1==i&&console.error("index是空的"),this.item.getColor()==P.MAGNET)return console.log("---检测到是磁铁---"),G.decProp(y.magnet),this.item.redLinComp.removeNodeView(this.node),console.log("---播放磁铁动画---"),A.resetParticle(this.node),void A.playAnimationAndChange(this.node.getComponentInChildren(h),"magnet_diffuse","magnet_absorb",(function(){console.log("---播放磁铁动画结束---");var e=o[i].id;t.item.getJoyStick().prop_node.onPropMagnetAn(e)}));this.postinon_end=o[i].position.clone(),this.item.setPostionID(o[i].id),v.getPostionList()[i].isFixed=!0;var e=[];if(e.push(this.item.getColor()),this.node.children.forEach((function(t,o){var i=t.getComponent(g);i&&(e.push(i.getColor()),t.getComponent(p).enabled=!0)})),v.getPostionList()[i].color=e,v.current_item_id=this.item.getPostionID(),this.node.getComponent(p).enabled=!0,a.stopAllByTarget(this.node),m(this.node).to(.1,{position:this.postinon_end}).call((function(){t.item.onFixedPostion()})).start(),this.item.redLinComp.removeNodeView(this.node),this.item.node_world_postion=o[i].world_postion.clone(),this.item.getJoyStick().getGameNode().getIsGuide()&&(3==this.item.getJoyStick().getGameNode().node_guide.step||6==this.item.getJoyStick().getGameNode().node_guide.step)&&2==this.item.getJoyStick().getGameNode().node_guide.guide)v.getPostionById(this.item.getPostionID()).adjoint.find((function(t){return 55==t}))?3==this.item.getJoyStick().getGameNode().node_guide.step?this.item.getJoyStick().getGameNode().node_guide.showGuide5():this.item.getJoyStick().getGameNode().node_guide.showGuide8():(console.log("新手引导，没有打中区域"),this.scheduleOnce((function(){t.item.onRemoveNode()})))}},s.onAnimate=function(){var t,i=this,e=this.postion_obj.collison;if(e.activeInHierarchy){var n=e.getComponent(g).getPostionID(),s=v.getPostionList().filter((function(t){return t.isFixed&&t.id!=i.item.getPostionID()})),l=v.findNeighborsWithinSteps(s,n,4);null==(t=e.getComponent(o))||t.onMoveAnimate(this.postion_obj.hitPoint,0),this.node.parent.children.forEach((function(t){if(t){var e=t.getComponent(g);if(e){var n=l.find((function(t){return t.id==e.getPostionID()}));if(n){var s=t.getComponent(o);s&&s.onMoveAnimate(i.postion_obj.hitPoint,n.steps)}}}}))}},s.onMoveAnimate=function(t,o){var i=this;if(!this.isMoveAn){console.log("收到播放动画",o),this.isMoveAn=!0;var e=C.onGetVector(t,this.node.worldPosition.clone());e=C.calculateNewPoint(this.node.worldPosition.clone(),e,.25-.03*o),this.postinon_end||(this.postinon_end=this.node.position.clone());var n=m(this.node).delay(.02*o).call((function(){i.item&&-1==i.item.getPostionID()&&n.stop()})).to(.2,{worldPosition:e},{easing:_.cubicOut}).to(.1,{position:this.postinon_end},{easing:_.cubicOut}).call((function(){i.isMoveAn=!1,console.log("Y:",i.node.position.y)})).start()}},s.onShowPropHammer=function(){var t=this,o=m(this.node).call((function(){t.temp_pos.set(v.prop_scale,1,v.prop_scale)})).to(v.prop_time,{scale:this.temp_pos}).call((function(){t.temp_pos.set(v.content_item_scale,1,v.content_item_scale)})).to(v.prop_time,{scale:this.temp_pos});m(this.node).repeatForever(o).start()},s.onHidePropHammer=function(){a.stopAllByTarget(this.node),this.temp_pos.set(v.content_item_scale,1,v.content_item_scale),this.node.scale=this.temp_pos},s.onDestroy=function(){t.prototype.onDestroy.call(this)},o}(u)).prototype,"distance_mix",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),B=L))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/JoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts","./GameConfig2.ts","./NodeUtil.ts","./NumberUtil.ts","./Vec3Util.ts","./Item.ts","./SoundModel.ts","./Config.ts","./BaseComp.ts","./GameMapModel.ts","./ObjectUtil.ts","./RedLinComp.ts","./GameApp.ts","./Game.ts","./ItemMoveComp.ts","./AllAnimationComp.ts","./PropComp.ts","./UserModel.ts","./BarrierComp.ts","./ViewUtil.ts","./PropMagnetRayComp.ts","./Common.ts","./ContentPlanComp.ts","./platform.ts"],(function(e){var t,o,n,i,r,s,a,l,c,d,h,m,_,u,p,f,g,y,C,b,v,w,N,I,T,G,E,L,P,A,x,z,M,S,k,R,D,U,O,B,H,V,W,F,J,Y,X,j,Z,q,K,Q,$,ee;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,n=e.inheritsLoose,i=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,c=e.Enum,d=e.CameraComponent,h=e.Node,m=e.Prefab,_=e.Color,u=e.Vec3,p=e.input,f=e.Input,g=e.Touch,y=e.CylinderCollider,C=e.geometry,b=e.PhysicsSystem,v=e.instantiate,w=e.Sprite,N=e.NodePool,I=e.tween,T=e.Tween},function(e){G=e.game_model},function(e){E=e.GameColor,L=e.GamePropMode,P=e.GameItemType,A=e.GameAnimitionEvent,x=e.GameType},function(e){z=e.node_util},function(e){M=e.number_util},function(e){S=e.Vec3Util},function(e){k=e.item},function(e){R=e.SoundModel},function(e){D=e.Sound,U=e.EventName,O=e.Bundle},function(e){B=e.BaseComp},function(e){H=e.game_map_model},function(e){V=e.objectUtil},function(e){W=e.RedLinComp},function(e){F=e.GameApp},function(e){J=e.Game},function(e){Y=e.ItemMoveComp},null,function(e){X=e.PropComp},function(e){j=e.userModel},function(e){Z=e.BarrierComp},function(e){q=e.ViewUtil},function(e){K=e.PropMagnetRayComp},function(e){Q=e.common},function(e){$=e.ContentPlanComp},function(e){ee=e.platform}],execute:function(){var te,oe,ne,ie,re,se,ae,le,ce,de,he,me,_e,ue,pe,fe,ge,ye,Ce,be,ve,we,Ne,Ie,Te,Ge,Ee,Le,Pe,Ae,xe,ze,Me,Se,ke,Re,De,Ue,Oe,Be,He,Ve,We,Fe,Je,Ye,Xe,je,Ze,qe,Ke,Qe,$e,et,tt,ot,nt,it;a._RF.push({},"11f551BvYxL6aTAZeVzjCsC","JoyStick",void 0);var rt=l.ccclass,st=l.property;c(E);var at=e("ColorGameJoyStickCofig",(te=rt("ColorGameJoyStickCofig"),oe=st({displayName:"颜色",type:E}),ne=st({displayName:"色值"}),te((se=t((re=function(){o(this,"game_color",se,this),o(this,"color_hex1",ae,this)}).prototype,"game_color",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.RED}}),ae=t(re.prototype,"color_hex1",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _(211,104,104,255)}}),ie=re))||ie));e("JoyStick",(le=rt("JoyStick"),ce=st({type:d}),de=st({type:h}),he=st({type:h}),me=st(m),_e=st(h),ue=st(h),pe=st(W),fe=st(h),ge=st(X),ye=st(Z),Ce=st({type:[at],displayName:"射线画笔颜色"}),be=st({displayName:"弹射速度"}),ve=st({displayName:"金币高度"}),we=st({displayName:"大射线scale"}),Ne=st({displayName:"小射线scale"}),Ie=st({displayName:"射线间距"}),Te=st({displayName:"消除默认时间"}),Ge=st({displayName:"消除递减时间"}),Ee=st({displayName:"消除最小时间"}),Le=st({displayName:"堆叠动画贝塞尔曲线高度"}),Pe=st({displayName:"堆叠动画动画间隔时间"}),Ae=st({displayName:"堆叠动画动画时长"}),xe=st({displayName:"堆叠动画动画速率"}),ze=st({displayName:"手指移动延迟时间"}),le((ke=t((Se=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"camera",ke,i(t)),o(t,"node_route",Re,i(t)),o(t,"node_content_rount",De,i(t)),o(t,"prefab_1",Ue,i(t)),o(t,"node_content",Oe,i(t)),o(t,"node_pos",Be,i(t)),o(t,"redLinComp",He,i(t)),o(t,"node_warning",Ve,i(t)),o(t,"prop_node",We,i(t)),o(t,"barrier_node",Fe,i(t)),o(t,"colorCofigs",Je,i(t)),o(t,"fore_mix",Ye,i(t)),o(t,"item_height",Xe,i(t)),o(t,"ray_big_scale",je,i(t)),o(t,"ray_small_scale",Ze,i(t)),o(t,"ray_delta",qe,i(t)),o(t,"eliminate_time",Ke,i(t)),o(t,"cha_time",Qe,i(t)),o(t,"mix_time",$e,i(t)),o(t,"tween_hight",et,i(t)),o(t,"tween_item_time",tt,i(t)),o(t,"tween_item_antion_time",ot,i(t)),o(t,"tween_item_antion_time_k",nt,i(t)),o(t,"move_delay_time",it,i(t)),t.item_node=null,t.fore=null,t.temp_pos1=new u(0,0,0),t.temp_pos2=new u(0,0,0),t.isClickNode=!1,t.ball_white_node_list=[],t.data_list=void 0,t.curre_color_item=void 0,t.send_data_list=void 0,t.item_root_pool=null,t.item_child_pool=null,t.top_game=null,t.ray_big=null,t.magnet_ray=null,t.game_node=null,t._cur_length=0,t.AIM_LINE_MAX_LENGTH=28,t.index_lin=0,t}n(t,e);var a=t.prototype;return a.start=function(){var e=r(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G.contetn_item_height=this.item_height,p.on(f.EventType.TOUCH_START,this.onTouchStart,this),p.on(f.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(f.EventType.TOUCH_END,this.onTouchEnd,this),p.on(f.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.initBallWhite(),this.barrier_node.joyStick=this;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.onDestroy=function(){p.off(f.EventType.TOUCH_START,this.onTouchStart,this),p.off(f.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(f.EventType.TOUCH_END,this.onTouchEnd,this),p.off(f.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.ball_white_node_list.length>0&&(this.ball_white_node_list.forEach((function(e,t){e&&(e.destroy(),e=null)})),this.ball_white_node_list=[])},a.startGame=function(){var e=r(s().mark((function e(t,o){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===o&&(o=!1),console.log("---加载桌面游戏数据---",t),this.data_list=t,this.isClickNode=!1,this.item_node&&(this.item_node.onRemoveNode(),this.item_node=null),this.magnet_ray&&(this.magnet_ray.onRemoveNode(),this.magnet_ray=null),this.prop_node.init(),this.send_data_list=null,o&&this.onFirstAdd()&&this.onAddClick(),this.data_list.type==x.关卡模式?this.onAddClickByRule():this.onAddClick2(),this.barrier_node.onSetBarrierUI(this.data_list),this.scheduleOnce((function(){if(n.item_child_pool.size()>60)for(;n.item_child_pool.size()>60;)n.item_child_pool.get().destroy();if(n.item_root_pool.size()>20)for(;n.item_root_pool.size()>20;)n.item_root_pool.get().destroy()})),this.node_content.children.forEach((function(e){if(e){var t=e.getComponent(k);t&&t.isShow()}}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,o){return e.apply(this,arguments)}}(),a.onTouchStart=function(e,t){if(console.log("---onTouchStart1---"),this.getGameNode().is_game_init)if(G.finish_game)console.log("---235---");else if(this.prop_node.prop_type!=L.hammer)if(this.prop_node.prop_type==L.magnet&&(console.log("道具模式中---磁铁道具"),this.prop_node.prop_type=null,this.getTopGame().getPropComp().onClose()),this.item_node){if(console.log("---onTouchStart2---"),1==j.game_pass&&this.getGameNode().node_guide&&this.getGameNode().node_guide.showGuide12(),2==j.game_pass&&this.getGameNode().getIsGuide()){if(3!=this.getGameNode().node_guide.step&&6!=this.getGameNode().node_guide.step&&8!=this.getGameNode().node_guide.step)return;3==this.getGameNode().node_guide.step?this.getGameNode().node_guide.showGuide41():6==this.getGameNode().node_guide.step?this.getGameNode().node_guide.showGuide71():(this.getGameNode().node_guide.closeGuideUI(),ee.trackEvent("guide",{part:2,stage:9}))}this.isClickNode=!0;var o=new g(e.getLocationX(),e.getLocationY(),e.getID());this.onMoveShowUI(o),R.getInstance().audioPlay(D.clickCoin,this)}else console.log("---240---");else console.log("道具模式中");else console.log("游戏正在初始化")},a.onTouchMove=function(){var e=r(s().mark((function e(t,o){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.getGameNode().is_game_init){e.next=3;break}return console.log("游戏正在初始化"),e.abrupt("return");case 3:return n=new g(t.getLocationX(),t.getLocationY(),t.getID()),e.next=6,Q.sleep(this.move_delay_time);case 6:if(!G.finish_game){e.next=9;break}return console.log("---310---"),e.abrupt("return");case 9:if(this.prop_node.prop_type!=L.hammer){e.next=12;break}return console.log("---316---"),e.abrupt("return");case 12:this.onMoveShowUI(n);case 13:case"end":return e.stop()}}),e,this)})));return function(t,o){return e.apply(this,arguments)}}(),a.onTouchEnd=function(e,t){var o=this;if(console.log("---onTouchEnd1---"),this.getGameNode().is_game_init){if(!G.finish_game)if(this.prop_node.prop_type!=L.hammer)if(this.isClickNode)if(this.fore){if(this.item_node){var n;console.log("---onTouchEnd2---"),this.item_node.node.children.forEach((function(e,t){e.position=new u(0,e.position.y,0)})),this.fore&&(this.item_node.getComponent(k).onSendItem(this.fore),this.fore=null),this._cur_length=0,this.ray_big&&(this.ray_big=null),this.magnet_ray&&(this.magnet_ray.onRemoveNode(),this.magnet_ray=null);var i=[];z.removeAllChildrenToArray(this.node_content_rount,i),i.forEach((function(e){e&&o.onDestroyBallWhite(e)})),this.prop_node.item_node_temp_magnet&&(this.prop_node.prop_animation_magent=this.item_node),this.item_node=null,this.prop_node.item_node_temp||this.prop_node.item_node_temp_magnet||this.getTopGame().setSubtractMaxNum(),this.scheduleOnce((function(){o.onSendGoldUI()}),.7),null==(n=this.getTopGame().getPropComp())||n.onDefPropNum()}this.isClickNode=!1}else console.error("弹射数据为空！！！！！！！！");else console.log("---334---");else this.prop_node.onProp1Hammer(e)}else console.log("游戏正在初始化")},a.onSendGoldUI=function(){if(console.log("是否需要生成新的金币1：",!this.getTopGame().isCloseGame()),console.log("是否需要生成新的金币2：",!this.getTopGame().isFinishGame()),this.prop_node.prop_animation_magent)console.log("当前在播放磁铁动画");else if(this.getTopGame().isCloseGame()||this.getTopGame().isFinishGame())console.log("---没有次数---");else{var e=F.game.getGameRoot().getComponent(J).node_guide;1==j.game_pass&&e&&1==e.guide&&2==e.step?this.onAddGoldToColor([{color:E.BLUE,num:4,sort:1}]):2==j.game_pass&&e&&2==e.guide&&3==e.step?this.onAddGoldToColor([{color:E.GOLD,num:2,sort:2},{color:E.RED,num:4,sort:1}]):2==j.game_pass&&e&&2==e.guide&&6==e.step?this.onAddGoldToColor([{color:E.GOLD,num:6,sort:1}]):this.prop_node.onRestoreItem()||(console.log("是否需要生成新的金币3"),this.onAddClick())}},a.onAddClick=function(){if(this.item_node)console.log("---313---");else{this.item_node=null,console.log("生成一个点");var e=this.getItem(!0);if(this.node_content.addChild(e.node),e.node.getComponent(y).enabled=!1,e.node.position=this.node_pos.position.clone(),this.item_node=e,this.item_node.setType(P.MOVE),this.item_node.redLinComp=this.redLinComp,this.item_node.getComponent(Y).speed=this.fore_mix,this.send_data_list&&0!=this.send_data_list.length)this.item_node.setItemColor(this.send_data_list.shift().colors,this.getItem.bind(this));else{var t=V.deepCopy(this.data_list),o=t.color_target,n=t.send_color_num,i=o.filter((function(e){return e.color!=E.MULTICOLOURED})).map((function(e){return e.color}));if(console.log("key_color2:",i),n&&n.length>0){var r=t.finish_num,s=[];i.forEach((function(e){var t=0;n.forEach((function(o){o&&o.color==e&&(t=o.num)})),s.push({color:e,num:t})}));for(var a=[],l=0;l<r;l++)a.push(l);if(this.send_data_list=H.distributeCoins(s,a),this.send_data_list=M.shuffle(this.send_data_list),t.difficult_num>0){var c=s.filter((function(e){return 0==e.num})).map((function(e){return e.color}));this.send_data_list.forEach((function(e,o){var i=!1;e&&o>t.difficult_num?e.colors.find((function(e){return!!n.find((function(t){return t.color==e.color}))}))&&(i=!0):i=!0,i||(e.colors=H.randomMap(c,!0))}))}this.item_node.setItemColor(this.send_data_list.shift().colors,this.getItem.bind(this))}else{var d=!1;t.difficult_num>0&&this.getTopGame().getIsCiNum()>=t.difficult_num&&(d=!0),this.item_node.onRandomColorNode(i,this.getItem.bind(this),d)}}this.item_node.send_move_animation?console.error("item已经有特殊动画了：",this.item_node.send_move_animation.id):(console.log("发送底部动画消息"),F.event.emit(U.GAME_GOLD_ANIMITION,{type:A.BOTTOM,bottom_an_node_item:this.item_node}))}},a.onFirstAdd=function(){return console.log("是否拦截：",j.game_pass),1==j.game_pass?(this.onAddGoldToColor([{color:E.BLUE,num:4,sort:1}]),!1):2!=j.game_pass||(this.onAddGoldToColor([{color:E.GOLD,num:2,sort:2},{color:E.RED,num:4,sort:1}]),!1)},a.onAddGoldToColor=function(e){console.log("根据颜色生成一个点:",e);var t=this.getItem(!0);this.node_content.addChild(t.node),t.node.getComponent(y).enabled=!1,t.node.position=this.node_pos.position.clone(),this.item_node=t,this.item_node.setType(P.MOVE),this.item_node.redLinComp=this.redLinComp,this.item_node.getComponent(Y).speed=this.fore_mix,this.item_node.setItemColor(e,this.getItem.bind(this)),console.log("发送底部动画消息"),F.event.emit(U.GAME_GOLD_ANIMITION,{type:A.BOTTOM,bottom_an_node_item:this.item_node})},a.onAddClickByRule=function(){var e=this,t=G.getPostionList();this.data_list.map.forEach((function(o,n){if(o&&o.is_show){var i=t.find((function(e){return e.id==o.id}));if(i){var r=e.getItem(!0);e.node_content.addChild(r.node);var s=i.position;r.node.position=new u(s.x,e.node_pos.position.y,s.z),r.redLinComp=e.redLinComp,r.setItemColor(o.color,e.getItem.bind(e)),r.setType(P.PHYSICS),r.onPostion()}}}))},a.onAddClick2=function(){var e=this;console.log("随机生成一些点:",this.data_list.map);var t=V.deepCopy(this.data_list.map).filter((function(e){return e.is_type_show&&e.is_random})).map((function(e){return e.id})),o=H.distributeCoins(this.data_list.color,t);if(console.log("data:",o),o){this.data_list.map.forEach((function(e){e&&e.is_type_show&&!e.is_random&&e.color&&e.color.length>0&&o.push({positionId:e.id,colors:e.color})}));var n=G.getPostionList();o.forEach((function(t,i){var r=n.find((function(e){return e.id==t.positionId}));if(r&&o.length>0){var s=e.getItem(!0);e.node_content.addChild(s.node);var a=r.position;s.node.position=new u(a.x,e.node_pos.position.y,a.z),s.redLinComp=e.redLinComp,s.setItemColor(t.colors,e.getItem.bind(e)),s.setType(P.PHYSICS),s.onPostion()}}))}},a.onAddPropMagnet=function(){console.log("道具生成磁铁");var e=this.getItem(!0);this.node_content.addChild(e.node),e.node.getComponent(y).enabled=!1,e.node.position=this.node_pos.position.clone(),this.item_node=e,this.item_node.setType(P.MOVE),this.item_node.redLinComp=this.redLinComp,this.item_node.getComponent(Y).speed=this.fore_mix,this.item_node.setMagnetUI()},a.onItemNum=function(){var e=this;if(!this.getTopGame().isCloseGame()&&!this.getTopGame().isFinishGame()){var t=G.getPostionList().filter((function(e){return e.isFixed}));if(!t||t.length<=0){var o=this.data_list.color_target.map((function(e){return e.color}));o=o.filter((function(e){return e!=E.MULTICOLOURED}));[25,27,39,43,56,54,41].forEach((function(t){var n=G.getPostionById(t),i=e.getItem(!0);e.node_content.addChild(i.node);var r=n.position;i.node.position=new u(r.x,e.node_pos.position.y,r.z),i.redLinComp=e.redLinComp,i.setItemColor(H.randomMap(o),e.getItem.bind(e)),i.setType(P.PHYSICS),i.onPostion()}))}this.prop_node.onIsPropDoubleAn()}},a.onMoveShowUI=function(e){var t=this;if(this.isClickNode){if(this.item_node){var o=this.onGetPhysicsPositon(e);if(!o)return console.error("touch:",e.getLocation()),console.error("touch:",e),void console.error("r是空的");var n=o.hitPoint.clone();if(n){this._cur_length=0,this.index_lin=0;var i=[];this.node_content_rount.children.forEach((function(e){e&&e!=t.ray_big&&i.push(e)})),i.forEach((function(e){e&&e!=t.ray_big&&t.onDestroyBallWhite(e)})),this.item_node.node.end_pos_list,this.item_node.node.end_pos_list=[];var r=this.item_node.node.worldPosition.clone();n.y=r.y;var s=S.onGetVector(r,n),a=s.clone();a.normalize(),a.multiplyScalar(this.fore_mix),this.fore?this.fore.set(a.x,r.y,a.z):this.fore=new u(a.x,r.y,a.z);var l=this.item_node.node.children.length;if(l>0){var c=new u(-s.x,s.y,-s.z);c.multiplyScalar(.5);var d=Math.min(2.5,.4*l),h=new u,m=[];this.item_node.node.children.forEach((function(e,t){e.getComponent(k)&&m.push(e)})),m.forEach((function(e,t){h.set(c.x/l*(t+1),e.position.y,c.z/l*(t+1)),h=S.restrictMax(h,(t+1)/l*d),e.position=h}))}if(this.item_node.getItemNodeList()&&this.item_node.getItemNodeList().length>0){var _=this.colorCofigs.find((function(e){return e.game_color==t.item_node.getItemNodeList()[t.item_node.getItemNodeList().length-1].getColor()}));this.curre_color_item=_?_.color_hex1:this.colorCofigs.find((function(e){return e.game_color==t.item_node.getColor()}))}else this.curre_color_item=this.colorCofigs.find((function(e){return e.game_color==t.item_node.getColor()}));this.drawRayCast(r,s)}}}else console.log("---637---")},a.onGetPhysicsPositon=function(e){var t=this,o=new C.Ray;this.camera.screenPointToRay(e.getLocationX(),e.getLocationY(),o);var n=o.d.clone();if(n.normalize(),n.multiplyScalar(20),o.d=new u(M.keepTwoDecimal(n.x),M.keepTwoDecimal(n.y),M.keepTwoDecimal(n.z)),b.instance.raycastClosest(o))return o=null,"node_diban-temp"==b.instance.raycastClosestResult.collider.node.name?(console.error("err:没有射到任何东西"),null):b.instance.raycastClosestResult;console.error("没有射到任何东西"),console.error("touch:",JSON.stringify(e)),console.error("ray:",JSON.stringify(o)),this.isClickNode=!1,this.ray_big&&(this.ray_big=null),this.magnet_ray&&(this.magnet_ray.onRemoveNode(),this.magnet_ray=null);var i=[];return z.removeAllChildrenToArray(this.node_content_rount,i),i.forEach((function(e){e&&t.onDestroyBallWhite(e)})),this.getItemNode(),o=null,null},a.getItemNode=function(){var e=this,t=[];if(this.node_content.children.forEach((function(e){var o=e.getComponent(Y),n=e.getComponent(k);o&&n&&-1!=n.getPostionID()&&t.push(n)})),t.forEach((function(t){t.isShow();var o=t.getPostionID(),n=e.getItem(!0);e.node_content.addChild(n.node);var i=G.getPostionById(o),r=i.position;n.node.position=new u(r.x,e.node_pos.position.y,r.z),n.redLinComp=e.redLinComp;var s=[];i.color.forEach((function(e){var t=s.find((function(t){return t.color==e}));t||(t={color:e,num:0,sort:s.length-1},s.push(t)),t.num++})),n.setItemColor(s,e.getItem.bind(e)),n.setType(P.PHYSICS),n.setPostionID(o),n.node.getComponent(y).enabled=!0,n.redLinComp.removeNodeView(n.node),n.node_world_postion=i.world_postion.clone(),t.setPostionID(-1),t.onRemoveNode(!1)})),this.item_node){var o=[],n=[];this.item_node.getItemNodeList().forEach((function(e){n.push(e.getColor())})),n.forEach((function(e){var t=o.find((function(t){return t.color==e}));t||(t={color:e,num:0,sort:o.length-1},o.push(t)),t.num++})),this.item_node.onRemoveNode(!1),this.item_node=null,this.onAddGoldToColor(o)}return this.node_content.getComponent($).init(),t},a.drawRayCast=function(e,t){var o=e.clone(),n=this.AIM_LINE_MAX_LENGTH-this._cur_length;if(!(n<=0)){var i,r=e.clone();this.index_lin++,1==this.index_lin?(i=S.calculateNewPoint(e.clone(),t,G.contetn_item_width/2)).y=o.y:i=o.clone();var s=new C.Ray;if(u.copy(s.o,i),u.copy(s.d,t),b.instance.sweepSphereClosest(s,G.contetn_item_width/2)){var a,l,c=b.instance.sweepCastClosestResult,d=c.hitPoint.clone(),h=c.distance;if((a=S.calculateCircleCenterAtCollision(c.hitPoint,G.contetn_item_width,c.hitNormal))||(a=d),1!=this.index_lin){var m=this.AIM_LINE_MAX_LENGTH-this._cur_length;h>m&&(l=S.getCoordinateByDistance(o,d,m))}l?this.setPosition2(null):(l=a.clone(),c.collider.node.getComponent(k)?(this.setPosition2(a),l=S.getCoordinateByDistance(o,l,S.onGetVector(o,l).length()-G.contetn_item_width/2)):this.setPosition2(null)),l.y=o.y,a.y=o.y,this.drawAimLine(o,l);var _=c.distance;this._cur_length+=_;var p=c.hitNormal,f=t.clone(),g=S.reflectVector(f,p);if(g.y=0,this.item_node.node.end_pos_list.push({pos:a.clone(),collison:c.collider.node,vector_r:g,hitPoint:c.hitPoint.clone()}),c.collider.node.getComponent(k))return;this.drawRayCast(a,g)}else{var y=r.add(u.multiplyScalar(new u,t,n));y.y=o.y,this.drawAimLine(o,y)}}},a.drawAimLine=function(e,t){var o=e.clone(),n=t.clone(),i=new u;u.subtract(i,n,o);var r=Math.floor(i.length()/this.ray_delta);u.normalize(i,i),u.multiplyScalar(i,i,this.ray_delta);for(var s=0;s<r;s++){o.add(i);var a=this.getBallWite();a.scale=new u(this.ray_small_scale,0,this.ray_small_scale),this.node_content_rount.addChild(a),o.y=this.node_content_rount.worldPosition.y,a.worldPosition=o}},a.initBallWhite=function(){for(var e=this,t=0;t<20;t++)setTimeout((function(){var t=v(e.node_route);e.ball_white_node_list.push(t)}),t+10)},a.getBallWite=function(){if(0==this.ball_white_node_list.length){var e=v(this.node_route);return e.getComponentInChildren(w).color=this.curre_color_item,e}var t=this.ball_white_node_list.shift();return t.getComponentInChildren(w).color=this.curre_color_item,t.active=!0,t},a.onDestroyBallWhite=function(e){e.parent=null,this.temp_pos2.set(999,999,999),e.worldPosition=this.temp_pos2,this.ball_white_node_list.push(e)},a.getItem=function(e){var t;return void 0===e&&(e=!1),this.item_root_pool||(this.item_root_pool=new N),this.item_child_pool||(this.item_child_pool=new N),e&&this.item_root_pool.size()>0?t=this.item_root_pool.get().getComponent(k):!e&&this.item_child_pool.size()>0&&(t=this.item_child_pool.get().getComponent(k)),t&&t.node.children.length>1&&(console.error("出现节点底部有多个子节点"),t.node.children.forEach((function(e){console.error(e.name)})),console.error("将节点删除"),t.destroy(),t=null),t||(t=v(this.prefab_1).getComponent(k)),t},a.pushItem=function(e){var t=this;if(e){var o=e.node;this.temp_pos1.set(999,999,999),this.temp_pos2.set(G.content_item_scale,1,G.content_item_scale);var n=o.children.filter((function(e){return e.getComponent(k)}));n&&n.length>0&&n.forEach((function(e){t.pushItem(e.getComponent(k))})),o.scale=this.temp_pos2,o.position=this.temp_pos1,o.parent=null,o.getComponent(Y)?this.item_root_pool.put(e.node):this.item_child_pool.put(e.node)}},a.setPosition2=function(){var e=r(s().mark((function e(t){var o,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return this.ray_big&&(this.temp_pos2.set(999,999,999),this.ray_big.worldPosition=this.temp_pos2.clone(),this.magnet_ray&&this.magnet_ray.onRemoveNodeList()),e.abrupt("return");case 3:if(this.ray_big||(o=this.getBallWite(),this.ray_big?this.onDestroyBallWhite(o):(this.ray_big=o,this.ray_big.scale=new u(this.ray_big_scale,0,this.ray_big_scale),this.node_content_rount.addChild(this.ray_big))),this.ray_big&&((n=t.clone()).y=this.node_content_rount.worldPosition.y,this.ray_big.worldPosition=n),!this.prop_node.item_node_temp_magnet||!this.ray_big){e.next=14;break}if(this.magnet_ray){e.next=13;break}return e.next=9,q.createPrefabNodeAsync("prefab/magnet_ray",O.GAME);case 9:i=e.sent,this.magnet_ray||!this.ray_big?(console.log("已经有磁铁了，清除新的！！！"),i.destroy()):(console.log("加载磁铁数据"),this.ray_big.addChild(i),this.magnet_ray=i.getComponent(K),this.magnet_ray.setNodeContent(this.node_content),this.magnet_ray.setUpdataUI(),this.temp_pos2.set(0,0,0),i.position=this.temp_pos2.clone()),e.next=14;break;case 13:this.magnet_ray.setUpdataUI();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.finishGame=function(){var e=r(s().mark((function e(){var t,o,n,i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--游戏结束--，清理数据"),this.item_node&&(t=this.item_node.getComponent(k),o=new u(0,0,0),t.getItemNodeList().forEach((function(e){e&&t!=e&&(o.y=e.node.position.y,e.node.position=o)})),console.log("---755---"),this.item_node=null),this.isClickNode=!1,this.fore=null,this._cur_length=0,this.ray_big&&(this.ray_big=null),this.magnet_ray&&(this.magnet_ray.onRemoveNode(),this.magnet_ray=null),n=[],z.removeAllChildrenToArray(this.node_content_rount,n),n.forEach((function(e){e&&i.onDestroyBallWhite(e)})),e.next=12,this.removeItemAn();case 12:return e.next=14,this.barrier_node.onClearBarrierDelay();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.removeItemAn=function(){var e=this;return console.log("--游戏结束--，清除硬币"),new Promise((function(t){var o=0,n=!1;e.node_content.children.forEach((function(i){var r=i.getComponent(k);r&&(n=!0,I(e.node).delay(.1*o).call((function(){R.getInstance().audioPlay(D.accomplish,e),r.getItemNodeList()&&r.getItemNodeList().length>0&&r.getItemNodeList().forEach((function(e){e&&e.onRemoveNode()})),0==--o&&t(null)})).start(),o++)})),n||t(null)}))},a.closeGame=function(){var e=this;console.log("---重置桌面数据---"),T.stopAll();var t=[];this.node_content.children.forEach((function(o){if(o){var n=o.getComponent(k);n&&n.getType()!=P.NONE&&(t.push(o),e.item_node&&e.item_node.node==o&&(e.item_node=null))}})),t.forEach((function(e){e.getComponent(k).onRemoveNode()})),t=[],this.item_node&&(this.item_node.onRemoveNode(),this.item_node=null,console.log("---821---")),G.getPostionList().forEach((function(e){e&&(e.color=[],e.isFixed=!1)})),this.redLinComp.removeAllNodeView(),this.isClickNode=!1,this.fore=null,this._cur_length=0,this.barrier_node.onClearBarrierUI()},a.getTopGame=function(){return this.top_game||(this.top_game=this.getGameNode().getTopGame()),this.top_game},a.getListData=function(){return this.data_list},a.getGameNode=function(){return this.game_node||(this.game_node=F.game.game_root.getComponent(J)),this.game_node},t}(B)).prototype,"camera",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(Se.prototype,"node_route",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Se.prototype,"node_content_rount",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Se.prototype,"prefab_1",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Se.prototype,"node_content",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(Se.prototype,"node_pos",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Se.prototype,"redLinComp",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Se.prototype,"node_warning",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Se.prototype,"prop_node",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Se.prototype,"barrier_node",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Se.prototype,"colorCofigs",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ye=t(Se.prototype,"fore_mix",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Xe=t(Se.prototype,"item_height",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.contetn_item_height}}),je=t(Se.prototype,"ray_big_scale",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),Ze=t(Se.prototype,"ray_small_scale",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.4}}),qe=t(Se.prototype,"ray_delta",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ke=t(Se.prototype,"eliminate_time",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Qe=t(Se.prototype,"cha_time",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.002}}),$e=t(Se.prototype,"mix_time",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.01}}),et=t(Se.prototype,"tween_hight",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),tt=t(Se.prototype,"tween_item_time",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),ot=t(Se.prototype,"tween_item_antion_time",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),nt=t(Se.prototype,"tween_item_antion_time_k",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),it=t(Se.prototype,"move_delay_time",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Me=Se))||Me));a._RF.pop()}}}));

System.register("chunks:///_virtual/PropComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./GameConfig2.ts","./Item.ts","./ItemMoveComp.ts","./JoyStick.ts","./GameApp.ts","./Game.ts","./Config.ts","./UserModel.ts","./GameModel.ts","./NumberUtil.ts","./ViewUtil.ts","./AnimationUtil.ts","./SoundModel.ts","./ObjectUtil.ts","./ContentPlanComp.ts","./GameUIConfig.ts","./Vec3Util.ts"],(function(e){var t,o,n,i,r,s,a,m,c,p,d,l,_,g,u,h,f,y,P,v,S,C,k,J,G,I,b,E,x,N,w,T,A,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,m=e._decorator,c=e.tween,p=e.Animation,d=e.Vec3,l=e.NodePool},function(e){_=e.BaseComp},function(e){g=e.GamePropMode,u=e.GameColor,h=e.GameAnimitionEvent},function(e){f=e.item},function(e){y=e.ItemMoveComp},function(e){P=e.JoyStick},function(e){v=e.GameApp},function(e){S=e.Game},function(e){C=e.EventName,k=e.Sound,J=e.Bundle},function(e){G=e.userModel},function(e){I=e.game_model},function(e){b=e.number_util},function(e){E=e.ViewUtil},function(e){x=e.animationUtil},function(e){N=e.SoundModel},function(e){w=e.objectUtil},function(e){T=e.ContentPlanComp},function(e){A=e.ViewName},function(e){M=e.Vec3Util}],execute:function(){var B,F,R,U,O,D,L,H,j,V,z,W,K;a._RF.push({},"d28c7wVAktFMbkSEPs7KdIR","PropComp",void 0);var q=m.ccclass,Q=m.property;e("PropComp",(B=q("PropComp"),F=Q({displayName:"道具动画缩放比例"}),R=Q({displayName:"道具动画播放时间"}),U=Q({displayName:"锤子动画-硬币消失时间"}),O=Q({displayName:"磁铁动画-内圈移动时间"}),D=Q({displayName:"磁铁动画-外圈移动时间"}),B((j=t((H=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"prop_scale",j,i(t)),n(t,"prop_time",V,i(t)),n(t,"hammer_an_time",z,i(t)),n(t,"magnet_an_nei_time",W,i(t)),n(t,"magnet_an_wai_time",K,i(t)),t.joystick=null,t.prop_type=null,t.item_node_temp=null,t.item_node_temp_magnet=null,t.HammerPool=null,t.prop_animation_magent=null,t}o(t,e);var a=t.prototype;return a.start=function(){this.on(C.GAME_TOP_OPTINAL_GOLD_EVNET,this.onPropOptional.bind(this)),this.on(C.GAME_TOP_RESURGENCE_GOLD_EVNET,this.onPropResurgence.bind(this)),this.on(C.PROP_REMOVE_BOTTOM_DATA,this.onPropRemoveBottom.bind(this)),I.prop_scale=this.prop_scale,I.prop_time=this.prop_time},a.init=function(){this.prop_type=null,this.item_node_temp&&(this.item_node_temp.onRemoveNode(),this.item_node_temp=null),this.item_node_temp_magnet&&(this.item_node_temp_magnet.destroy(),this.item_node_temp_magnet=null),this.prop_animation_magent&&(this.prop_animation_magent.destroy(),this.prop_animation_magent=null)},a.onPropMode=function(e){console.log("---道具模式---",e),e==g.hammer?(this.prop_type=e,this.onShowHammerUI()):e==g.magnet?(this.prop_type=e,this.onPropMagnet()):(this.prop_type==g.magnet?this.onMagentCancel():this.prop_type==g.hammer&&this.onShowHammerUI(!1),this.prop_type=null)},a.onShowHammerUI=function(e){void 0===e&&(e=!0),this.getJoyStick().node_content.children.forEach((function(t){var o=t.getComponent(y);o&&o.item&&-1!=o.item.getPostionID()&&(e?o.onShowPropHammer():o.onHidePropHammer())})),e?this.getJoyStick().barrier_node.onShowPropHammer():this.getJoyStick().barrier_node.onHidePropHammer()},a.onProp1Hammer=function(e){var t=this;if(this.prop_type==g.hammer){var o=this.getJoyStick().onGetPhysicsPositon(e);if(o){var n=o.collider.node;if(n){console.log("node_name:",n.name);var i=n.getComponent(f),r=!1;if(i){var s=n.getComponent(y);if(s||(s=n.parent.getComponent(y),i=s.node.getComponent(f)),!s)return void console.log("点击的item是空的");if(this.getJoyStick().item_node&&this.getJoyStick().item_node.node==s.node)return void console.log("不能拆除发射点");if(!G.isExistsProp(g.hammer)&&!this.getJoyStick().getGameNode().getIsGuide())return v.Layer.toast("没有道具可以使用"),void v.game.getGameRoot().getComponent(S).getTopGame().getPropComp().onClose();r=!0;var a=i.getItemNodeList(),m=a[a.length-1].node.worldPosition.clone();this.onProp1HammerAn(m,i.getPostionID(),(function(){i.onRemoveNode(),t.getJoyStick().onItemNum()}))}else if(this.getJoyStick().barrier_node.isNodeBarrier(n.parent)){var c=n.parent;r=!0;var p=this.getJoyStick().barrier_node.getNodeToID(c);this.onProp1HammerAn(c.worldPosition,p[0],(function(){t.getJoyStick().barrier_node.onClearBarrierUIByBarrierType(c)}))}if(r){if(this.onShowHammerUI(!1),this.getJoyStick().getGameNode().getIsGuide())return this.getJoyStick().getGameNode().node_guide.showGuide31(),void v.game.getGameRoot().getComponent(S).getTopGame().getPropComp().onClose();G.decProp(g.hammer),G.isExistsProp(g.hammer)||v.game.getGameRoot().getComponent(S).getTopGame().getPropComp().onClose()}}}}},a.onPropOptional=function(e,t){void 0===t&&(t=6),console.log("收到可选颜色：",e),this.getJoyStick().item_node&&(this.item_node_temp?this.getJoyStick().item_node.onRemoveNode():(this.item_node_temp=this.getJoyStick().item_node,this.item_node_temp.node.active=!1,this.item_node_temp.node.parent=null),this.getJoyStick().item_node=null),this.getJoyStick().onAddGoldToColor([{color:e,num:t,sort:1}]),this.getJoyStick().getGameNode().getIsGuide()?this.getJoyStick().getGameNode().node_guide.showGuide7():G.decProp(g.optional)},a.onPropMagnet=function(){console.log("使用磁铁"),this.getJoyStick().item_node&&(this.item_node_temp_magnet=this.getJoyStick().item_node,this.item_node_temp_magnet.node.active=!1,this.item_node_temp_magnet.node.parent=null,this.getJoyStick().item_node=null),this.getJoyStick().onAddPropMagnet()},a.onRestoreItem=function(){return!!this.onMagentCancel()||!!this.item_node_temp&&(this.getJoyStick().node_content.addChild(this.item_node_temp.node),this.item_node_temp.node.position=this.getJoyStick().node_pos.position.clone(),this.item_node_temp.node.active=!0,this.getJoyStick().item_node=this.item_node_temp,this.item_node_temp=null,!0)},a.onMagentCancel=function(){return!!this.item_node_temp_magnet&&(this.getJoyStick().item_node&&this.getJoyStick().item_node.node.destroy(),this.getJoyStick().node_content.addChild(this.item_node_temp_magnet.node),this.item_node_temp_magnet.node.position=this.getJoyStick().node_pos.position.clone(),this.item_node_temp_magnet.node.active=!0,this.getJoyStick().item_node=this.item_node_temp_magnet,this.item_node_temp_magnet=null,!0)},a.onPropResurgence=function(){console.log("道具3（复活）"),this.getJoyStick().getTopGame().onPropResurgence(),I.finish_game=!1;var e=this.getJoyStick().getTopGame().getTopColor().filter((function(e){return e.num<e.max_num&&e.color!=u.MULTICOLOURED})),t=u.MULTICOLOURED;if(e&&e.length>0){var o=0;e.forEach((function(e){if(e){var n=e.max_num-e.num;n>o&&(o=n,t=e.color)}}));var n=e.filter((function(e){return e.max_num-e.num>=o}));if(n.length>1){var i=this.getJoyStick().getListData();if(i&&i.send_color_num&&i.send_color_num.length>0){var r=n.find((function(e){return i.send_color_num.find((function(t){return t.color==e.color}))}));if(r)t=r.color;else{var s=b.randomNum(0,n.length-1);t=n[s].color}}else{var a=b.randomNum(0,n.length-1);t=n[a].color}}else 1==n.length&&(t=n[0].color)}t!=u.MULTICOLOURED?this.getJoyStick().onAddGoldToColor([{color:t,num:5,sort:1}]):this.getJoyStick().onAddClick(),this.onIsPropDoubleAn(),G.decProp(g.resurgence)},a.onProp1HammerAn=function(){var e=r(s().mark((function e(t,o,n){var i,r,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.HammerPool||(this.HammerPool=new l),!(this.HammerPool.size()<=0)){e.next=7;break}return e.next=4,E.createPrefabNodeAsync("prefab/hammer",J.GAME);case 4:i=e.sent,e.next=8;break;case 7:i=this.HammerPool.get();case 8:i.parent=this.node,i.worldPosition=t,(r=i.getChildByName("hammer_anim"))&&(this.scheduleOnce((function(){var e=I.getPostionById(o).adjoint;a.getJoyStick().node_content.children.forEach((function(o){var n=o.getComponent(f);n&&e.includes(n.getPostionID())&&n.getComponent(y).onMoveAnimate(t,0)})),n()}),this.hammer_an_time),x.showAndPlayAnimation(r,"hammer_hit",(function(){r.active=!0,i.parent=null,a.HammerPool.put(i),a.getJoyStick().getGameNode().getIsGuide()&&a.getJoyStick().getGameNode().node_guide.showGuide4()})),setTimeout((function(){x.resetParticle(r)}),70),N.getInstance().audioPlay(k.remove,this));case 12:case"end":return e.stop()}}),e,this)})));return function(t,o,n){return e.apply(this,arguments)}}(),a.onPropMagnetAn=function(e){var t=this;console.log("磁铁动画开始：",e);var o=I.getPostionList(),n=I.findNeighborsWithinSteps(o,e,3);n.push({id:e,steps:0});var i=[];o.forEach((function(e){var t=n.find((function(t){return t.id==e.id}));if(t){var o=w.deepCopy(e);o.steps=t.steps,i.push(o)}})),console.log("postion_list:",w.deepCopy(o));var r=this.moveCoins(e,i);console.log("move_list:",w.deepCopy(r)),N.getInstance().audioPlay(k.absorb1,this),v.event.emit(C.GAME_GOLD_ANIMITION,{type:h.COLISION,postion:I.getPostionById(e).world_postion.clone()});var s=0;r.forEach((function(e,o){if(e){var n,i=e.hex_obj,a=e.move_postion_id;if(t.getJoyStick().node_content.children.forEach((function(e){var t=e.getComponent(f);t&&t.getPostionID()==i.id&&(n=t)})),n){s++;var m,d=I.getPostionById(a),l=0;2==e.hex_obj.steps?(l=t.magnet_an_nei_time,m=M.calculateExtendedPoint(n.node.position.clone(),d.position.clone(),.5)):m=n.node.position.clone(),c(n.node).delay(.01).to(l,{position:m}).to(e.hex_obj.steps>=2?t.magnet_an_wai_time:t.magnet_an_nei_time,{position:d.position.clone()}).call((function(){0==--s&&(r.forEach((function(e,o){if(e){var n,i=e.hex_obj,r=e.move_postion_id,s=I.getPostionById(i.id).color;I.getPostionById(i.id).isFixed=!1,I.getPostionById(i.id).color=[],I.getPostionById(r).isFixed=!0,I.getPostionById(r).color=s,t.getJoyStick().node_content.children.forEach((function(e){var t=e.getComponent(f);t&&t.getPostionID()==i.id&&(n=t)})),n.setPostionID(r),n.node_world_postion=I.getPostionById(r).world_postion.clone();var a=n.getComponent(y);a&&(a.postinon_end=a.node.position.clone())}})),console.log("postion_list:",w.deepCopy(I.getPostionList())),x.showAndPlayAnimation(t.prop_animation_magent.node.getComponentInChildren(p),"magnet_disappear",(function(){t.prop_animation_magent.node.destroy(),t.prop_animation_magent=null,t.getJoyStick().onSendGoldUI()})),t.getJoyStick().node_content.getComponent(T).getMoveAllPostion())})).start()}}}))},a.moveCoins=function(e,t){var o=[],n=t.find((function(t){return t.id===e}));if(!n)throw new Error("中心点不存在");return t.forEach((function(t){t.isFixed&&1==t.steps&&!n.isFixed&&(o.push({hex_obj:t,move_postion_id:e}),t.isFixed=!1,n.isFixed=!0)})),t.forEach((function(e){if(2===e.steps&&e.isFixed){var n=t.findIndex((function(t){return t.adjoint.find((function(t){return t==e.id}))&&!t.isFixed&&!t.isBarrier&&1==t.steps}));-1!=n&&(o.push({hex_obj:e,move_postion_id:t[n].id}),e.isFixed=!1,t[n].isFixed=!0)}})),t.forEach((function(e){var n;2===e.steps&&e.isFixed&&(I.findNeighborsWithinSteps(t,e.id,2).forEach((function(e){n||t.forEach((function(t){e.id!=t.id||1!=t.steps||t.isFixed||t.isBarrier||(n=t)}))})),n&&(o.push({hex_obj:e,move_postion_id:n.id}),e.isFixed=!1,n.isFixed=!0))})),t.forEach((function(e){if(3===e.steps&&e.isFixed){var n,i=I.findNeighborsWithinSteps(t,e.id,2);i.forEach((function(e){n||t.forEach((function(t){e.id!=t.id||1!=t.steps||t.isFixed||t.isBarrier||(n=t)}))})),n||i.forEach((function(e){n||t.forEach((function(t){e.id!=t.id||2!=t.steps||t.isFixed||t.isBarrier||(n=t)}))})),n&&(o.push({hex_obj:e,move_postion_id:n.id}),e.isFixed=!1,n.isFixed=!0)}})),o},a.onIsPropDoubleAn=function(){var e=I.getPostionList(),t=e.filter((function(e){return e.id>=66&&e.isFixed}));t&&t.length>8&&this.getJoyStick().getTopGame().getPropComp().playPropAn(g.hammer);var o=!1;if(this.getJoyStick().getTopGame().getResidueCiNum()<=8&&this.getJoyStick().item_node){var n=this.getJoyStick().getTopGame().getTopTarGetNum();if(n.num>=4&&n.num<6){var i=this.getJoyStick().item_node.getItemNodeList(),r=i[i.length-1].getColor();n.color.includes(r)||(this.getJoyStick().getTopGame().getPropComp().playPropAn(g.optional),o=!0)}}if(!o){var s=this.getJoyStick().getTopGame().getTopTarGetNum();this.getJoyStick().getTopGame().getResidueCiNum()<=3&&s.num>=1&&s.num<3&&(this.getJoyStick().getTopGame().getPropComp().playPropAn(g.optional),o=!0)}var a=e.filter((function(e){return e.id>=45&&e.isFixed})),m=0;a.forEach((function(e){var t=0;e.adjoint.forEach((function(e){I.getPostionById(e).isFixed&&t++})),t<=2&&m++})),m>8&&this.getJoyStick().getTopGame().getPropComp().playPropAn(g.magnet);var c=e.filter((function(e){return e.id>=87&&e.isFixed}));c&&c.length>=7&&(console.log("最后一排满了！！！"),v.Layer.open(A.CleanDialog))},a.onPropRemoveBottom=function(){var e=this;I.getPostionList().filter((function(e){return e.id>=87&&e.isFixed})).forEach((function(t){t&&e.getJoyStick().node_content.children.forEach((function(e){var o=e.getComponent(f);if(o&&o.getPostionID()==t.id){var n=new d(I.content_item_scale+.1,1,I.content_item_scale+.1);c(o.node).to(.2,{scale:n}).call((function(){n.set(I.content_item_scale,1,I.content_item_scale)})).to(.2,{scale:n}).call((function(){n.set(I.content_item_scale+.1,1,I.content_item_scale+.1)})).to(.2,{scale:n}).call((function(){n.set(I.content_item_scale,1,I.content_item_scale),o.node.scale=n,o.onRemoveNode()})).start()}}))})),G.decProp(g.remove_bottom),N.getInstance().audioPlay(k.removeBottom,this)},a.getJoyStick=function(){return this.joystick||(this.joystick=this.node.getComponent(P)),this.joystick},t}(_)).prototype,"prop_scale",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.prop_scale}}),V=t(H.prototype,"prop_time",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.prop_time}}),z=t(H.prototype,"hammer_an_time",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),W=t(H.prototype,"magnet_an_nei_time",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),K=t(H.prototype,"magnet_an_wai_time",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),L=H))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/PropMagnetRayComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./AnimationUtil.ts","./GameModel.ts","./Item.ts","./ViewUtil.ts"],(function(t){var n,o,e,i,s,r,c,a,l,u,p;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Tween,s=t.tween,r=t.Vec3},function(t){c=t.BaseComp},function(t){a=t.animationUtil},function(t){l=t.game_model},function(t){u=t.item},function(t){p=t.ViewUtil}],execute:function(){var d;o._RF.push({},"e6a4efkZCtLEqu0c3BmNnug","PropMagnetRayComp",void 0);var f=e.ccclass;e.property,t("PropMagnetRayComp",f("PropMagnetRayComp")(d=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).node_content=null,n.content_list=[],n.temp_pos=new r,n.temp_pos1=new r,n}n(o,t);var e=o.prototype;return e.start=function(){a.playAnimationAndChange(this.node,"magnet_rayappear","magnet_rayidle")},e.setNodeContent=function(t){console.log("---36---"),this.node_content=t},e.setUpdataUI=function(){var t=this;if(this.node_content){this.node.worldPosition.clone()&&this.temp_pos.set(this.node.worldPosition.clone());var n=l.getPostionList(),o=l.getPositionByPoint(p.calculateWorldToNodePos(this.temp_pos,this.node_content));if(-1==o)return console.log("----54-----"),void this.onRemoveNodeList();var e=n[o].id,c=l.findNeighborsWithinSteps(n,e,3),a=[];this.content_list.forEach((function(t,n){c.find((function(n){return n.id==t.getPostionID()}))||a.push(t)})),a.forEach((function(n){i.stopAllByTarget(n.node),n.scheduleOnce((function(){return[n.setPostionDefault()]}));var o=t.content_list.findIndex((function(t){return n.getPostionID()==t.getPostionID()}));t.content_list.splice(o,1)}));var d=[];this.node_content.children.forEach((function(t){var n=t.getComponent(u);n&&(c.find((function(t){return t.id==n.getPostionID()}))&&d.push(n))}));var f=[];d.forEach((function(n){t.content_list.find((function(t){return t.getPostionID()==n.getPostionID()}))||f.push(n)})),f.forEach((function(n){var o=n.node.position.clone();i.stopAllByTarget(n.node),s(n.node).repeatForever(s(n.node).to(.025,{position:new r(o.x+.03,o.y,o.z)}).to(.025,{position:o}).to(.025,{position:new r(o.x-.03,o.y,o.z)}).to(.025,{position:o})).start(),t.content_list.push(n)}))}else console.error("没有node_content！！！！！！！！！！")},e.onRemoveNodeList=function(){for(var t=this,n=function(){var n=t.content_list.shift();i.stopAllByTarget(n.node),n.scheduleOnce((function(){return[n.setPostionDefault()]}))};this.content_list.length>0;)n()},e.onRemoveNode=function(){this.onRemoveNodeList(),this.node.destroy()},o}(c))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/RedLinComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Item.ts","./SoundModel.ts","./Config.ts","./BaseComp.ts","./ItemMoveComp.ts","./AnimationUtil.ts","./platform-const.ts","./GameApp.ts","./Game.ts","./VibrateManager.ts"],(function(n){var e,i,o,t,a,s,r,d,l,c,u,p,f,m,h,_,g;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,t=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,r=n.Animation},function(n){d=n.item},function(n){l=n.SoundModel},function(n){c=n.Sound},function(n){u=n.BaseComp},function(n){p=n.ItemMoveComp},function(n){f=n.animationUtil},function(n){m=n.VibrateType},function(n){h=n.GameApp},function(n){_=n.Game},function(n){g=n.VibrateManager}],execute:function(){var v,y,C,w,z;a._RF.push({},"2ee5aPA39JNi4JaurBSIG8d","RedLinComp",void 0);var A=s.ccclass,I=s.property;n("RedLinComp",(v=A("RedLinComp"),y=I(r),v((z=e((w=function(n){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a))||this,o(e,"animation_node",z,t(e)),e.node_list=[],e.node_z=0,e}i(e,n);var a=e.prototype;return a.start=function(){this.node_z=this.node.worldPosition.z-.5},a.update=function(n){if(this.node_list.length>0){for(var e,i=0;i<this.node_list.length;i++){var o=this.node_list[i];if(o&&o.node&&o.node.activeInHierarchy){var t=o.node.getComponent(d);if(t)if(o.is_fly)o.node.worldPosition.z>this.node_z&&(e=t);else o.node.worldPosition.z<this.node_z&&(o.is_fly=!0)}}e&&(this.removeNodeView(e.node),e.onRemoveNode(),e.getComponent(p).isMove=!1,f.playAnimationAndChange(this.animation_node,"dividingline_warning","dividingline_idle"),l.getInstance().audioPlay(c.eliminateCoin,this),g.getInstance().play(m.SHORT),h.game.getGameRoot().getComponent(_).showCloseView())}},a.addNodeView=function(n){this.node_list.push({node:n,is_fly:!1})},a.removeNodeView=function(n){var e=this.node_list.findIndex((function(e){return e.node==n}));-1!=e&&(console.log("删除成功"),this.node_list.splice(e,1))},a.removeAllNodeView=function(){this.node_list=[]},e}(u)).prototype,"animation_node",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=w))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/scripts_bundle",["./AllAnimationComp.ts","./BarrierComp.ts","./Camera3DComp.ts","./ContentPlanComp.ts","./FunUIRound.ts","./Game.ts","./GameGuideComp.ts","./GameStepComp.ts","./GameTopCashierDesk.ts","./GameTopComboComp.ts","./GameTopComp.ts","./GameTopFlyComp.ts","./GameTopPropComp.ts","./GameTopTargetGoldComp.ts","./Item.ts","./ItemMoveComp.ts","./JoyStick.ts","./PropComp.ts","./PropMagnetRayComp.ts","./RedLinComp.ts","./CleanDialog.ts","./DeveloperDialog.ts","./GameFinishClose.ts","./GameFinishNext.ts","./GameStart.ts","./SettingDialog.ts","./SidebarDiaolog2.ts","./HomeLayer.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SettingDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./GameUIConfig.ts","./Game.ts","./VibrateManager.ts","./PlatformModel.ts"],(function(e){var n,i,t,o,a,r,l,u,c,s,p,_,d,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,u=e.Label,c=e.Component},function(e){s=e.GameApp},function(e){p=e.ViewName},function(e){_=e.Game},function(e){d=e.VibrateManager},function(e){g=e.platformModel}],execute:function(){var b,f,m,v,h,y,w,G,z,D,I,C,M,R,H,S,A,T,L,N,V,k,x;a._RF.push({},"3aefccmMxNAJanYX+k5sx5T","SettingDialog",void 0);var B=r.ccclass,P=r.property;e("SettingDialog",(b=B("SettingDialog"),f=P(l),m=P(l),v=P(l),h=P(l),y=P(l),w=P(l),G=P(u),z=P(u),D=P(u),I=P(u),b((R=n((M=function(e){function n(){for(var n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,t(n,"game",R,o(n)),t(n,"main",H,o(n)),t(n,"node_audio_open1",S,o(n)),t(n,"node_vibrate_open1",A,o(n)),t(n,"node_audio_open2",T,o(n)),t(n,"node_vibrate_open2",L,o(n)),t(n,"label_version1",N,o(n)),t(n,"label_version2",V,o(n)),t(n,"label_user_id1",k,o(n)),t(n,"label_user_id2",x,o(n)),n.node_audio_open=null,n.node_vibrate_open=null,n}i(n,e);var a=n.prototype;return a.onAdded=function(e){e.isHome?(this.game.active=!1,this.main.active=!0,this.node_audio_open=this.node_audio_open2,this.node_vibrate_open=this.node_vibrate_open2):(this.game.active=!0,this.main.active=!1,this.node_audio_open=this.node_audio_open1,this.node_vibrate_open=this.node_vibrate_open1)},a.start=function(){this.node_audio_open.active=s.audio.switchMusic,this.node_vibrate_open.active=d.getInstance().switcg_vibrate,this.label_version1.string=s.config.game.version,this.label_version2.string=s.config.game.version,this.label_user_id1.string="ID: 01442",this.label_user_id2.string="ID: 01442"},a.update=function(e){},a.onBtnAudio=function(e,n){this.node_audio_open.active=!this.node_audio_open.activeInHierarchy,s.audio.switchMusic=this.node_audio_open.activeInHierarchy,s.audio.switchEffect=this.node_audio_open.activeInHierarchy,s.audio.save()},a.onBtnVibrate=function(e,n){this.node_vibrate_open.active=!this.node_vibrate_open.activeInHierarchy,d.getInstance().switcg_vibrate=this.node_vibrate_open.activeInHierarchy,d.getInstance().save()},a.onBtnClick=function(e,n){e.target&&(console.log("event.target",e.target),e.target.active=!1),s.game.getGameRoot().getComponent(_).nextGame()},a.onResetView=function(){g.finishPass(2,s.game.getGameRoot().getComponent(_).getTopGame().getResidueCiNum(),s.game.getGameRoot().getComponent(_).getTopGame().getTopTarGetNum().num),s.game.getGameRoot().getComponent(_).readyStartGame(!0),this.onClose()},a.onClickOpenKaifazhe=function(){s.Layer.open(p.DeveloperDialog)},a.onClose=function(){s.Layer.remove(p.SettingDialog)},n}(c)).prototype,"game",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(M.prototype,"main",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(M.prototype,"node_audio_open1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(M.prototype,"node_vibrate_open1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(M.prototype,"node_audio_open2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(M.prototype,"node_vibrate_open2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(M.prototype,"label_version1",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(M.prototype,"label_version2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(M.prototype,"label_user_id1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(M.prototype,"label_user_id2",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/SidebarDiaolog2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./platform-const.ts","./platform.ts","./GameApp.ts","./GameUIConfig.ts"],(function(e){var n,o,t,a,c,i,s,r;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator},function(e){a=e.BaseComp},function(e){c=e.PlatformCode},function(e){i=e.platform},function(e){s=e.GameApp},function(e){r=e.ViewName}],execute:function(){var u;o._RF.push({},"48e12WtExZP47NTocng8QK+","SidebarDiaolog",void 0);var l=t.ccclass;t.property,e("sidebarPanel",l("sidebarPanel")(u=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.start=function(){},t.update=function(e){},t.onDouyinGame=function(){i.string()==c.Bytedance?tt.navigateToScene&&tt.navigateToScene({scene:"sidebar",success:function(e){console.log("navigate to scene success")},fail:function(e){console.log("navigate to scene fail: ",e)}}):console.log("onAdd..1...")},t.onClose=function(){s.Layer.remove(r.TTSSIDEBAR)},o}(a))||u);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/scripts_bundle', 'chunks:///_virtual/scripts_bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});