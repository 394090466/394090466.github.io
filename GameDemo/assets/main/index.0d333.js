System.register("chunks:///_virtual/animationEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Config.ts"],(function(n){var t,e,i,o,r,a;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.Component},function(n){r=n.GameApp},function(n){a=n.EventName}],execute:function(){var c;e._RF.push({},"e2e997g0L9DvInHzD+2ZWEX","animationEvent",void 0);var u=i.ccclass,s=(i.property,n("AnimationEventEnum",function(n){return n.DRAWER_ANIM="drawer_anim",n}({})));n("AnimationEvent",u("AnimationEvent")(c=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.drawer_anim=function(){r.event.emit(a.ANIMATION_EVENT,s.DRAWER_ANIM)},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,i,a,c,r,s,l,f;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){o=n.cclegacy,i=n.Node,a=n.sp,c=n.Animation,r=n.ParticleSystem,s=n.ParticleSystem2D,l=n.Vec3,f=n.tween}],execute:function(){o._RF.push({},"8366cAM/5VDbJTji2Ejdo0F","AnimationUtil",void 0);n("animationUtil",new(function(){function n(){}var o=n.prototype;return o.runAnimation=function(n,o,c,r,s){var l;void 0===o&&(o=1),(l=n instanceof i?n.getComponent(a.Skeleton):n)&&(1==o?l.setAnimation(0,c,!1):2==o?l.setAnimation(0,c,!0):3==o&&(l.setCompleteListener(e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l.setCompleteListener(null),l.setAnimation(0,r,!0),s&&s();case 3:case"end":return n.stop()}}),n)})))),l.setAnimation(0,c,!1)))},o.showAndPlayAnimations=function(n,e,t){var o;if(o=n instanceof c?n:n.getComponent(c)){o.node.active=!0;var i=o.clips.find((function(n){return n.name==e}));setTimeout((function(){o.stop(),o.node.active=!1,t&&t()}),1e3*i.duration),o.play(e)}},o.showAndPlayAnimation=function(n,e,t){var o;(o=n instanceof c?n:n.getComponent(c))&&(o.node.active=!0,o.off(c.EventType.STOP),o.off(c.EventType.FINISHED),o.on(c.EventType.FINISHED,(function(){console.log("--动画结束--",n.name),o.off(c.EventType.STOP),o.off(c.EventType.FINISHED),o.node.active=!1,t&&t()})),o.stop(),o.play(e))},o.playAnimationAndChange=function(n,e,t,o){var i;(i=n instanceof c?n:n.getComponent(c))&&(console.log("播放动画1"),this.showAndPlayAnimation(n,e,(function(){console.log("播放动画2"),i.node.active=!0,i.play(t),o&&o()})))},o.playAnimationOnce=function(n,e){var t;(t=n instanceof c?n:n.getComponent(c))&&(t.node.active=!0,t.play(e))},o.showAndPlayParticle=function(n,e,t){var o;if(!(o=n instanceof r?n:n.getComponent(r)))return console.error("播放粒子特效失败：",o),void(t&&t());o.node.active=!0,o.stop(),o.clear(),o.play(),o.scheduleOnce((function(){o.node.active=!1,t&&t()}),e)},o.resetParticle=function(n){if(n){var e=n.getComponentsInChildren(r);e&&e.length>0&&e.forEach((function(n){n.node.active=!0,n.stop(),n.clear(),n.play()}));var t=n.getComponentsInChildren(s);t&&t.length>0&&t.forEach((function(n){n&&(n.node.active=!0,n.resetSystem())}))}},o.bezierTo=function(n,e,t,o,i,a,c,r,s){void 0===c&&(c=!1),void 0===r&&(r=!1),void 0===s&&(s=-999),a=a||Object.create(null);var u=function(n,e,t,o){var i=(1-n)*(1-n)*e.x+2*n*(1-n)*t.x+n*n*o.x,a=(1-n)*(1-n)*e.y+2*n*(1-n)*t.y+n*n*o.y,c=(1-n)*(1-n)*e.z+2*n*(1-n)*t.z+n*n*o.z;return new l(i,a,c)};return a.onUpdate=function(e,a){var l,f=(l=a,r?Math.pow(l,2):-999!=s?1-Math.pow(1-l,s):1===l?1:l*(2-l));c?n.setWorldPosition(u(f,t,o,i)):n.setPosition(u(f,t,o,i))},f(n).to(e,{},a)},n}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsManager.ts",["cc","./GameApp.ts"],(function(e){var s,n,t,r,a,o,l,i;return{setters:[function(e){s=e.cclegacy,n=e.SpriteFrame,t=e.assetManager,r=e.error,a=e.Asset,o=e.js,l=e.resources},function(e){i=e.GameApp}],execute:function(){s._RF.push({},"886fewQ6flJdIeHgyYzyoDm","AssetsManager",void 0),e("AssetsManager",function(){function e(){this.defaultBundleName="resources",this.assetLsit=[]}var s=e.prototype;return s.addAsset=function(e,s,n){s.addRef(),this.assetLsit[e]||(this.assetLsit[e]=[]),n&&(s.path=n),this.assetLsit[e].push(s)},s.removeAsset=function(e){e&&this.assetLsit[e]&&(this.assetLsit[e].forEach((function(e){e.decRef(),e=null})),this.assetLsit[e]=null)},s.getAsset=function(e,s){return this.assetLsit[e]?this.assetLsit[e].find((function(e){return e.path==s})):null},s.loadSpriteFrame=function(e,s,t){var r=this;return new Promise((function(a,o){r.loadAsync(t,e+"/spriteFrame",n).then((function(n){s&&i.res.addAsset(s,n,e),a(n)})).catch((function(e){console.error(e)}))}))},s.loadRemote=function(e){var s=null,n=null;2==(arguments.length<=1?0:arguments.length-1)?(s=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):n=arguments.length<=1?void 0:arguments[1],t.loadRemote(e,s,(function(e,s){n(e,s)}))},s.loadRemoteAsync=function(e){return new Promise((function(s,n){t.loadRemote(e,null,(function(e,n){e?r("远程资源加载失败",e):s(n)}))}))},s.loadBundle=function(e,s){return new Promise((function(n,a){t.loadBundle(e,{version:s},(function(e,s){if(e)return r(e);n(s)}))}))},s.load=function(e,s,n,t,r){var a=null;"string"==typeof s||s instanceof Array?(a=this.parseLoadResArgs(s,n,t,r)).bundle=e:(a=this.parseLoadResArgs(e,s,n,t)).bundle=this.defaultBundleName,this.loadByArgs(a)},s.loadAsync=function(e,s,n){var t=this;return new Promise((function(a,o){t.load(e,s,n,(function(e,s){e&&r(e.message),a(s)}))}))},s.loadDir=function(e,s,n,t,r){var a=null;"string"==typeof s?(a=this.parseLoadResArgs(s,n,t,r)).bundle=e:(a=this.parseLoadResArgs(e,s,n,t)).bundle=this.defaultBundleName,a.dir=a.paths,this.loadByArgs(a)},s.release=function(e,s){null==s&&(s=this.defaultBundleName);var n=t.getBundle(s);if(n){var r=n.get(e);r&&this.releasePrefabtDepsRecursively(r)}},s.releaseDir=function(e,s){var n=this;null==s&&(s=this.defaultBundleName);var r=t.getBundle(s);if(r){var a=r.getDirWithPath(e);a&&a.map((function(e){n.releasePrefabtDepsRecursively(e.uuid)})),""==e&&"resources"!=s&&t.removeBundle(r)}},s.releasePrefabtDepsRecursively=function(e){if(e instanceof a)e.decRef();else{var s=t.assets.get(e);s&&s.decRef()}},s.releaseBundle=function(e){var s=t.getBundle(e);s&&(s.releaseAll(),t.removeBundle(s))},s.get=function(e,s,n){return null==n&&(n=this.defaultBundleName),t.getBundle(n).get(e,s)},s.dump=function(){t.assets.forEach((function(e,s){console.log(t.assets.get(s))})),console.log("当前资源总数:"+t.assets.count)},s.parseLoadResArgs=function(e,s,n,t){var r=e,l=s,i=n,u=t;if(void 0===t){var d=o.isChildClassOf(s,a);n?(u=n,d&&(i=null)):void 0!==n||d||(u=s,i=null,l=null),void 0===n||d||(i=s,l=null)}return{paths:r,type:l,onProgress:i,onComplete:u}},s.loadByBundleAndArgs=function(e,s){s.dir?e.loadDir(s.paths,s.type,s.onProgress,s.onComplete):(s.paths,e.load(s.paths,s.type,s.onProgress,s.onComplete))},s.loadByArgs=function(e){var s=this;if(e.bundle)if(t.bundles.has(e.bundle)){var n=t.bundles.get(e.bundle);this.loadByBundleAndArgs(n,e)}else t.loadBundle(e.bundle,(function(n,t){n||s.loadByBundleAndArgs(t,e)}));else this.loadByBundleAndArgs(l,e)},e}())._num=0,s._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Config.ts"],(function(e){var t,s,r,o,i,n,c,u,f;return{setters:[function(e){t=e.inheritsLoose,s=e.createClass},function(e){r=e.cclegacy,o=e._decorator,i=e.AudioClip,n=e.error,c=e.AudioSource},function(e){u=e.GameApp},function(e){f=e.Bundle}],execute:function(){var l;r._RF.push({},"1d235jx8s5KoJ650FZ3Fu8u","AudioEffect",void 0);var a=o.ccclass;o.menu,e("AudioEffect",a("AudioEffect")(l=function(e){function r(){for(var t,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).effects=new Map,t._progress=0,t}t(r,e);var o=r.prototype;return o.load=function(e,t,s){var r=this;e?this.effects.get(e)?(this.volume=t||this.volume,this.clip=this.effects.get(e),this.play(),s&&s()):u.res.load(f.REMOTE,e,i,(function(o,i){if(o)return console.log("Bundle:",f.REMOTE),console.log("url:",e),void n(o);r.effects.set(e,i),r.volume=t||r.volume,r.clip=i,r.play(),s&&s()})):console.error("音效空的,url:",e)},o.releaseAll=function(){for(var e in this.effects)u.res.release(e,f.REMOTE);this.effects.clear()},o.release=function(e){this.effects.has(e)&&(this.effects.delete(e),u.res.release(e,f.REMOTE))},s(r,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(e){this._progress=e,this.currentTime=e*this.duration}}]),r}(c))||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./AudioMusic.ts","./AudioEffect.ts"],(function(t){var s,i,e,c,u,o,h;return{setters:[function(t){s=t.inheritsLoose,i=t.createClass},function(t){e=t.cclegacy,c=t.Component},function(t){u=t.GameApp},function(t){o=t.AudioMusic},function(t){h=t.AudioEffect}],execute:function(){e._RF.push({},"6e69cj2tw1AArIDNsgXdfhh","AudioManager",void 0);var f="game_audio";t("AudioManager",function(t){function e(){for(var s,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(s=t.call.apply(t,[this].concat(e))||this).music=null,s.effect=null,s.local_data={},s._volume_music=1,s._volume_effect=1,s._switch_music=!0,s._switch_effect=!0,s}s(e,t);var c=e.prototype;return c.setMusicComplete=function(t){void 0===t&&(t=null),this.music.onComplete=t},c.playMusic=function(t,s){this._switch_music&&!this.music.playing&&(this.music.loop=!1,this.music.load(t,s))},c.playMusicLoop=function(t){this._switch_music&&!this.music.playing&&(this.music.loop=!0,this.music.load(t))},c.stopMusic=function(){this._switch_music&&this.music.playing&&this.music.stop()},c.playEffect=function(t,s){this._switch_effect&&this.effect.load(t,s)},c.resumeAll=function(){this.music&&(!this.music.playing&&this.music.progress>0&&this.music.play(),!this.effect.playing&&this.effect.progress>0&&this.effect.play())},c.pauseAll=function(){this.music&&(this.music.playing&&this.music.pause(),this.effect.playing&&this.effect.pause())},c.stopAll=function(){this.music&&(this.music.stop(),this.effect.stop())},c.save=function(){this.local_data.volume_music=this._volume_music,this.local_data.volume_effect=this._volume_effect,this.local_data.switch_music=this._switch_music,this.local_data.switch_effect=this._switch_effect,u.storage.set(f,this.local_data)},c.load=function(){if(this.music=this.getComponent(o)||this.addComponent(o),this.effect=this.getComponent(h)||this.addComponent(h),this.local_data=u.storage.getJson(f),this.local_data)try{this.setState()}catch(t){this.setStateDefault()}else this.setStateDefault();this.music&&(this.music.volume=this._volume_music),this.effect&&(this.effect.volume=this._volume_effect)},c.setState=function(){this._volume_music=this.local_data.volume_music,this._volume_effect=this.local_data.volume_effect,this._switch_music=this.local_data.switch_music,this._switch_effect=this.local_data.switch_effect},c.setStateDefault=function(){this.local_data={},this._volume_music=1,this._volume_effect=1,this._switch_music=!0,this._switch_effect=!0},i(e,[{key:"progressMusic",get:function(){return this.music.progress},set:function(t){this.music.progress=t}},{key:"volumeMusic",get:function(){return this._volume_music},set:function(t){this._volume_music=t,this.music.volume=t}},{key:"switchMusic",get:function(){return this._switch_music},set:function(t){this._switch_music=t,0==t&&this.music.stop()}},{key:"volumeEffect",get:function(){return this._volume_effect},set:function(t){this._volume_effect=t,this.effect.volume=t}},{key:"switchEffect",get:function(){return this._switch_effect},set:function(t){this._switch_effect=t,0==t&&this.effect.stop()}}]),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMusic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts"],(function(t){var i,s,r,e,l,n,u,o;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){r=t.cclegacy,e=t._decorator,l=t.AudioClip,n=t.error,u=t.AudioSource},function(t){o=t.GameApp}],execute:function(){var a;r._RF.push({},"6a76eJzgd9C14unggbjXRk8","AudioMusic",void 0);var h=e.ccclass;e.menu,t("AudioMusic",h("AudioMusic")(a=function(t){function r(){for(var i,s=arguments.length,r=new Array(s),e=0;e<s;e++)r[e]=arguments[e];return(i=t.call.apply(t,[this].concat(r))||this).onComplete=null,i._progress=0,i._url=null,i._isPlay=!1,i}i(r,t);var e=r.prototype;return e.load=function(t,i){var s=this;null==this._url?o.res.load(t,l,(function(r,e){r&&n(r),i&&i(),s.playPrepare(t,e)})):this.playPrepare(t,this.clip)},e.stop=function(){this._url=null,t.prototype.stop.call(this)},e.playPrepare=function(t,i){this.playing&&(this._isPlay=!1,this.stop()),this._url&&(this.clip=null,o.res.release(this._url)),this.enabled=!0,this.clip=i,this.play(),this._url=t},e.update=function(t){this.currentTime>0&&(this._isPlay=!0),this._isPlay&&0==this.playing&&0==this.progress&&(this._isPlay=!1,this.enabled=!1,this.clip=null,this._url=null,this.onComplete&&this.onComplete())},e.release=function(){this._url&&(this.clip=null,o.res.release(this._url),this._url=null)},s(r,[{key:"progress",get:function(){return this.duration>0&&(this._progress=this.currentTime/this.duration),this._progress},set:function(t){this._progress=t,this.currentTime=t*this.duration}}]),r}(u))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsManager.ts","./GameApp.ts"],(function(e){var n,o,t,s,i,r,a,c,u;return{setters:[function(e){n=e.inheritsLoose,o=e.createClass},function(e){t=e.cclegacy,s=e._decorator,i=e.SpriteFrame,r=e.Prefab,a=e.Component},function(e){c=e.AssetsManager},function(e){u=e.GameApp}],execute:function(){var f;t._RF.push({},"01dcfju07BH9bianHuhM0Sn","BaseComp",void 0);var d=s.ccclass;s.property,e("BaseComp",d("BaseComp")(f=function(e){function t(){for(var n,o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];return(n=e.call.apply(e,[this].concat(t))||this).vp=null,n._node_name="",n.resPathsAudioEffect=new Map,n}n(t,e);var s=t.prototype;return s.onLoad=function(){this.initNodeName()},s.initNodeName=function(){this._node_name||(this._node_name=this.node.name+"_"+c._num++)},s.on=function(e,n){u.event.on(e,this.node_name,n)},s.loadSpriteFrame=function(e,n){var o,t=this;void 0===n&&(n=null==(o=this.vp)||null==(o=o.config)?void 0:o.bundle);return new Promise((function(o,s){u.res.loadAsync(n,e+"/spriteFrame",i).then((function(n){u.res.addAsset(t.node_name,n,e),o(n)})).catch((function(e){console.error(e)}))}))},s.loadPrefab=function(e,n){var o,t=this;void 0===n&&(n=null==(o=this.vp)||null==(o=o.config)?void 0:o.bundle);return new Promise((function(o,s){u.res.loadAsync(n,e,r).then((function(s){if(!s)return console.error("预制体加载异常,预制体不存在"),console.error("path:",e),void console.error("bundleName:",n);u.res.addAsset(t.node_name,s,e),o(s)})).catch((function(e){console.error("预制体加载异常"),console.error(e)}))}))},s.playMusic=function(e){u.audio.playMusic(e)},s.playMusicLoop=function(e){u.audio.stopMusic(),u.audio.playMusicLoop(e)},s.playEffect=function(e,n){e?this.resPathsAudioEffect&&(this.resPathsAudioEffect.has(e)||this.resPathsAudioEffect.set(e,u.res.defaultBundleName),u.audio.playEffect(e,n)):console.error("音效空的,url:",e)},s.releaseAudioEffect=function(){this.resPathsAudioEffect.forEach((function(e,n){u.audio.effect.release(n)})),this.resPathsAudioEffect.clear(),this.resPathsAudioEffect=null},s.onDestroy=function(){u.res&&u.res.removeAsset(this.node_name),u.res&&u.event.offById(this.node_name),this.releaseAudioEffect()},o(t,[{key:"node_name",get:function(){return this.initNodeName(),this._node_name}}]),t}(a))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/bytedance.ts",["./rollupPluginModLoBabelHelpers.js","cc","./platform-const.ts","./Common.ts","./GameApp.ts","./PlatformModel.ts","./Config.ts"],(function(t){var e,n,i,o,r,c,s,a,u,d,f,l,h,p,g,m;return{setters:[function(t){e=t.extends,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t.screen,c=t.rect,s=t.Rect},function(t){a=t.PlatformCode,u=t.LogTag,d=t.TgaConfig,f=t.VideoFailCode,l=t.VibrateType},function(t){h=t.common},function(t){p=t.GameApp},function(t){g=t.platformModel},function(t){m=t.CDNAddr}],execute:function(){o._RF.push({},"71338qudftO/bjP/CChYi9E","bytedance",void 0);t("ByteDancePlatform",function(){function t(){this.systemInfoCache=void 0,this.videoAd=void 0,this.uniqueVideoUnitId="16bn6ytrwu15f2fu9p",this.isSharing=!1,this.isLoading=!1,this.menuBounding=void 0,this.onHideTime=0,this.tgaInited=!1}var o=t.prototype;return o.string=function(){return a.Bytedance},o.canUse=function(t){return h.compareVersion(this.getSystemData().SDKVersion,t)>=0},o.initSDK=function(){this.initByteDanceListener(),this.initCommonSetting(),this.initTga(),seeg.init({gid:"tt_zskhyb"})},o.initByteDanceListener=function(){var t=this,e=this;tt.onShow((function(e){var n=Date.now();console.log(u,"on show",n),t.isSharing})),tt.onHide((function(){t.onHideTime=Date.now(),console.log(u,"on hide",t.onHideTime)})),tt.onError((function(t){p.config.game.isTest&&tt.showModal({title:t.message||"异常报错",content:t.stack||t+"",showCancel:!1,confirmText:"好的"})})),tt.canIUse("onMemoryWarning")&&tt.onMemoryWarning((function(){tt.triggerGC()})),tt.onShareAppMessage((function(t){var n=g.randomShareInfo("default");return{title:n.text,imageUrl:m+"share/"+n.url,query:"type=default",success:function(){e.trackEvent("share",{type:"default",url:n.url,success:!0})},fail:function(t){e.trackEvent("share",{type:"default",url:n.url,success:!1})}}}));var n=tt.getUpdateManager();n.onCheckForUpdate((function(t){console.log(u,"update checked, hasUpdate="+t.hasUpdate)})),n.onUpdateFailed((function(){console.log(u,"update failed")})),n.onUpdateReady((function(){tt.showModal({title:"更新提示",content:"新版本已经准备好，是否重启小游戏？",success:function(t){t.confirm&&n.applyUpdate()}})}))},o.initCommonSetting=function(){},o.initTga=function(){var t;if(!p.config.game.isTest){TDAnalytics.init(d);var e=null==(t=this.getSystemData())?void 0:t.appName;TDAnalytics.setSuperProperties({ver:p.config.game.version,platform:this.string(),game:p.config.game.projectName,appName:e||""}),this.tgaInited=!0}},o.login=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o.getStorage=function(t){try{return JSON.parse(tt.getStorageSync(t))}catch(t){return null}},o.setStorage=function(t,e){try{tt.setStorageSync(t,JSON.stringify(e))}catch(t){}},o.clearStorage=function(){try{tt.clearStorageSync()}catch(t){}},o.removeStorage=function(t){try{tt.removeStorageSync(t)}catch(t){}},o.preloadVideo=function(t){return!0},o.doWatchAD=function(t){console.log("dy:doWatchAD");var e=this.uniqueVideoUnitId;null==this.videoAd&&(this.videoAd=tt.createRewardedVideoAd({adUnitId:e})),this.showLoading();var n=this;return new Promise((function(i,o){n.videoAd.onClose((function r(c){null!=n.videoAd&&n.videoAd.offClose(r),null!=c&&c.isEnded?(n.trackEvent("video",{step:"complete",unit:e,type:t.videoSource,place:t.item}),seeg.reportAd({complete:!0}),i()):(seeg.reportAd({complete:!1}),o(f.CANCELED))})),n.videoAd.show().then((function(){n.trackEvent("video",{step:"display",success:!0,unit:e,type:t.videoSource,place:t.item})})).catch((function(i){console.log("<<<< video err: ",i),n.trackEvent("video",{step:"display",success:!1,unit:e,type:t.videoSource,place:t.item}),n.videoAd.destroy(),n.videoAd=null,o(f.NO_AD)})).then((function(){n.hideLoading()}))}))},o.doShare=function(t){return null},o.getSystemData=function(){if(null==this.systemInfoCache)try{this.systemInfoCache=tt.getSystemInfoSync()}catch(t){return}return this.systemInfoCache},o.vibrate=function(t){t==l.SHORT?tt.vibrateShort({success:function(t){},fail:function(t){}}):t==l.LONG&&tt.vibrateLong({success:function(t){},fail:function(t){}})},o.refreshGame=function(){tt.exitMiniProgram({})},o.showLoading=function(){this.canUse("1.0.0")&&(this.isLoading=!0,tt.showLoading({title:"加载中",mask:!0}))},o.hideLoading=function(){this.canUse("1.0.0")&&this.isLoading&&(tt.hideLoading({}),this.isLoading=!1)},o.showModal=function(t){return new Promise((function(n){tt.showModal(e({},t,{success:function(t){t.confirm?n(!0):t.cancel&&n(!1)},fail:function(t){n(!1)}}))}))},o.log=function(t){},o.getMenuBounding=function(){if(null==this.menuBounding)if(this.canUse("2.1.0")){var t=tt.getMenuButtonLayout(),e=this.getSystemData(),n=r.windowSize,i=n.width/e.screenWidth,o=n.height/e.screenHeight;this.menuBounding=c(t.left*i,t.top*o,t.width*i,t.height*o)}else this.menuBounding=new s(650,0,100,50);return this.menuBounding},o.createShareImage=function(){var t=n(i().mark((function t(e,n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){t(null)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.preloadInterstitialAD=function(t){},o.showInterstitialAD=function(){var t=n(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.getSubscribeCnt=function(){var t=n(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.subscribe=function(){var t=n(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.startVideoRecord=function(){},o.pauseVideoRecord=function(){},o.resumeVideoRecord=function(){},o.stopVideoRecord=function(){},o.hasVideoRecord=function(){return!1},o.shareVideoRecord=function(){},o.addShortcut=function(){},o.getUserProfile=function(t,e){},o.postMessage=function(t,e){},o.setUserCloudStorage=function(t){},o.trackUserSet=function(t){this.tgaInited&&TDAnalytics.userSet({properties:t})},o.trackUserSetOnce=function(t){null!=t&&this.tgaInited&&TDAnalytics.userSetOnce({properties:t})},o.trackEvent=function(t,n){if(this.tgaInited){var i=e({},n);TDAnalytics.track({eventName:t,properties:i})}},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Common.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./GameApp.ts"],(function(n){var t,e,r,o,u,i,a,s,c,l;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy,o=n.instantiate,u=n.UITransform,i=n.Button,a=n.Label,s=n.isValid},function(n){c=n.Bundle},function(n){l=n.GameApp}],execute:function(){r._RF.push({},"d5776UZtU1OXr46yzsuolr8","Common",void 0);var p=n("Common",function(){function n(){}var r=n.prototype;return r.sleep=function(){var n=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n){return setTimeout(n,t)}));case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),r.createGMBtn=function(){var n=t(e().mark((function n(t,r,p,f,m){var h,d,g,v,C;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t&&s(t)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.res.loadAsync(c.REMOTE,"prefab/gmBtn");case 4:null!=(h=n.sent)&&t.isValid&&(d=o(h),t.addChild(d),g=t.getComponent(u),null==f&&(f=g.width/2*.85),null==m&&(m=g.height/2*.92),d.setPosition(f,m),null!=(v=d.getComponent(i))&&v.node.on("click",(function(){v.interactable=!1,setTimeout((function(){v.interactable=!0}),1e3),p()})),null!=(C=d.getComponentInChildren(a))&&(C.string=r));case 6:case"end":return n.stop()}}),n)})));return function(t,e,r,o,u){return n.apply(this,arguments)}}(),r.compareVersion=function(n,t){for(var e=n.split("."),r=t.split("."),o=Math.max(e.length,r.length);e.length<o;)e.push("0");for(;r.length<o;)r.push("0");for(var u=0;u<o;u++){var i=parseInt(e[u]),a=parseInt(r[u]);if(i>a)return 1;if(i<a)return-1}return 0},n}());n("common",new p);r._RF.pop()}}}));

System.register("chunks:///_virtual/CommonPrompt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./GameApp.ts"],(function(n){var t,e,o,i,c,a,l,r,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){c=n.cclegacy,a=n._decorator,l=n.Component},function(n){r=n.LanguageLabel},function(n){s=n.GameApp}],execute:function(){var u,f,h,b,p,g,m,d,_,y,C;c._RF.push({},"653bf8VPC5Fn49zFJFqXVgx","CommonPrompt",void 0);var k=a.ccclass,v=a.property;n("CommonPrompt",(u=k("CommonPrompt"),f=v(r),h=v(r),b=v(r),p=v(r),u((d=t((m=function(n){function t(){for(var t,e=arguments.length,c=new Array(e),a=0;a<e;a++)c[a]=arguments[a];return t=n.call.apply(n,[this].concat(c))||this,o(t,"lab_title",d,i(t)),o(t,"lab_content",_,i(t)),o(t,"lab_ok",y,i(t)),o(t,"lab_cancel",C,i(t)),t.config={},t}e(t,n);var c=t.prototype;return c.onTouchEnd=function(n,t){switch(n.target.name){case"btn_ok":this.onOk();break;case"btn_cancel":this.onCancel()}},c.onAdded=function(n){void 0===n&&(n={}),this.config=n||{},this.setTitle(),this.setContent(),this.setBtnOkLabel(),this.setBtnCancelLabel(),this.node.active=!0},c.setTitle=function(){this.lab_title.dataID=this.config.title},c.setContent=function(){this.lab_content.dataID=this.config.content},c.setBtnOkLabel=function(){this.lab_ok.dataID=this.config.okWord},c.setBtnCancelLabel=function(){this.lab_cancel&&(this.lab_cancel.dataID=this.config.cancelWord,this.lab_cancel.node.parent.active=this.config.needCancel||!1)},c.onOk=function(){"function"==typeof this.config.okFunc&&this.config.okFunc(),this.close()},c.onClose=function(){"function"==typeof this.config.closeFunc&&this.config.closeFunc(),this.close()},c.onCancel=function(){"function"==typeof this.config.cancelFunc&&this.config.cancelFunc(),this.close()},c.close=function(){s.Layer.removeByNode(this.node)},c.onDestroy=function(){this.config=null},t}(l)).prototype,"lab_title",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(m.prototype,"lab_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"lab_ok",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"lab_cancel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"32310GJZ1dIkLAu04nO4XHO","Config",void 0);e("CDNAddr","https://res.kampfiregames.cn/word/"),e("Sound",function(e){return e[e.BGM=900001]="BGM",e[e.clickButton=100011]="clickButton",e[e.clickCoin=100021]="clickCoin",e[e.rebound=100031]="rebound",e[e.collision=100041]="collision",e[e.stacking1=100051]="stacking1",e[e.compose1=100061]="compose1",e[e.accomplish=100071]="accomplish",e[e.lose=100081]="lose",e[e.win=100091]="win",e[e.reset=100101]="reset",e[e.eliminateCoin=100111]="eliminateCoin",e[e.tickOff=100112]="tickOff",e[e.complete=100113]="complete",e[e.remove=100121]="remove",e[e.tailor1=100131]="tailor1",e[e.tailor2=100132]="tailor2",e[e.absorb1=100141]="absorb1",e[e.combo1=100151]="combo1",e[e.removeBottom=100161]="removeBottom",e[e.openDrawer=100171]="openDrawer",e[e.closeDrawer=100181]="closeDrawer",e[e.pullRod=100191]="pullRod",e[e.coinDrawer=100201]="coinDrawer",e[e.spitOutBanknotes=100211]="spitOutBanknotes",e[e.fallingBanknotes=100221]="fallingBanknotes",e}({})),e("Bundle",function(e){return e.SCRIPTS_BUNDLE="scripts_bundle",e.GAME="game",e.GAME_TOP="game_top",e.HOME_LAYER="home_layer",e.REMOTE="remote",e.SETTING_DIALOG="setting_dialog",e.GameFinishClose="game_finish_close",e.GAMESTART="game_start",e.GAME_OPTIONAL_GOLD="game_optional_gold",e.TTSSIDEBAR="sidebar_diaolog",e.CLEANDIALOG="clean_dialog",e.DEVELOPER_DIALOG="developer_dialog",e}({})),e("EventName",function(e){return e.GAME_GOLD_ANIMITION="game_gold_animition",e.GAME_TOP_OPTINAL_GOLD_EVNET="game_top_optinal_gold_evnet",e.GAME_TOP_RESURGENCE_GOLD_EVNET="game_top_resurgence_gold_evnet",e.GAME_STATE_CHANGE="game_state_change",e.PROP_UPDATE="prop_update",e.LOADING_CLOSE="loading_close",e.PROP_REMOVE_BOTTOM_DATA="prop_remove_bottom_data",e.ANIMATION_EVENT="animation_event",e.GAME_STEP_EVENT="game_step_event",e}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/Config2.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"a29e9iAmrVPz5Jf/9CGVGAx","Config",void 0);i("Config",(function(){this.game=void 0,this.query=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DelegateComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts"],(function(e){var o,n,t,s,i;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,s=e.Component},function(e){i=e.GameApp}],execute:function(){var l;n._RF.push({},"7e59frU4yVLqrAuJ6xOqLfv","DelegateComponent",void 0);var r=t.ccclass;e("DelegateComponent",r("DelegateComponent")(l=function(e){function n(){for(var o,n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return(o=e.call.apply(e,[this].concat(t))||this).vp=null,o.onHide=null,o}o(n,e);var t=n.prototype;return t.add=function(){this.applyComponentsFunction(this.node,"onAdded",this.vp.params),"function"==typeof this.vp.callbacks.onAdded&&this.vp.callbacks.onAdded(this.node,this.vp.params)},t.remove=function(e){var o=this;console.log("remove",e),this.vp.valid&&(this.applyComponentsFunction(this.node,"onBeforeRemove",this.vp.params),"function"==typeof this.vp.callbacks.onBeforeRemove?this.vp.callbacks.onBeforeRemove(this.node,(function(){o.removed(o.vp,e)})):this.removed(this.vp,e))},t.removed=function(e,o){if(e.valid=!1,"function"==typeof e.callbacks.onRemoved&&e.callbacks.onRemoved(this.node,e.params),this.onHide&&this.onHide(e),console.log("---removed---isDestroy:",o),o){if(e.node.destroy(),this.node.destroy(),e.config.prefab&&!e.config.bundle)console.log("---removed---释放预制体---"),i.res.release(e.config.prefab);else{console.log("---removed---释放bundle---");try{i.res.releaseBundle(e.config.bundle)}catch(e){console.error("释放bundle失败：",e)}}i.log.logView("【界面管理】释放【"+e.config.bundle+"】界面资源")}else this.node.removeFromParent()},t.onDestroy=function(){this.applyComponentsFunction(this.node,"onRemoved",this.vp.params),this.vp=null},t.applyComponentsFunction=function(e,o,n){for(var t=0;t<e.components.length;t++){var s=e.components[t],i=s[o];i&&i.call(s,n)}},n}(s))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/EncryptUtil.ts",["cc","./index.js"],(function(t){var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.default}],execute:function(){n._RF.push({},"220dbxWsqZPT7MTXzkOy4U9","EncryptUtil",void 0);var i=t("EncryptUtil",function(){function t(){}return t.md5=function(t){return r.MD5(t).toString()},t.initCrypto=function(t,n){this.key=t,this.iv=r.enc.Hex.parse(n)},t.aesEncrypt=function(t,n,i){return r.AES.encrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString()},t.aesDecrypt=function(t,n,i){return r.AES.decrypt(t,this.key,{iv:this.iv,format:this.JsonFormatter}).toString(r.enc.Utf8)},t}());i.key=null,i.iv=null,i.JsonFormatter={stringify:function(t){var n={ct:t.ciphertext.toString(r.enc.Base64)};return t.iv&&(n.iv=t.iv.toString()),t.salt&&(n.s=t.salt.toString()),JSON.stringify(n)},parse:function(t){var n=JSON.parse(t),i=r.lib.CipherParams.create({ciphertext:r.enc.Base64.parse(n.ct)});return n.iv&&(i.iv=r.enc.Hex.parse(n.iv)),n.s&&(i.salt=r.enc.Hex.parse(n.s)),i}},n._RF.pop()}}}));

System.register("chunks:///_virtual/EventConfig.ts",["cc"],(function(E){var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){e._RF.push({},"a191eDcq3ZLLpg0h1xNvD18","EventConfig",void 0);E("EventMessage",function(E){return E.GAME_SHOW="GAME_ENTER",E.GAME_HIDE="GAME_EXIT",E.GAME_RESIZE="GAME_RESIZE",E.GAME_FULL_SCREEN="GAME_FULL_SCREEN",E.GAME_ORIENTATION="GAME_ORIENTATION",E}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc","./GameApp.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.GameApp}],execute:function(){e._RF.push({},"04164KHWTBAVomAfjeUiEdx","EventManager",void 0);t("EventManager",function(){function t(){this.totalEventList={}}var e=t.prototype;return e.on=function(t,e,i){if(null!=t&&null!=e&&null!=i){var o=this.totalEventList[t];o||(o=this.totalEventList[t]={}),o[e]&&n.log.logView("warm：事件 "+t+" 已经注册过了回调函数 "+e+" 即将覆盖！"),o[e]=i}else n.log.logView("注册的事件有误：eventName="+t+" eventId="+e+" cb="+i)},e.emit=function(t,e,i){void 0===i&&(i=!0);var o=this.totalEventList[t];if(o)for(var a in o){var l=o[a];l&&l(e)}else i&&n.log.logView("warm：事件 "+t+" 未注册!")},e.off=function(t,e){var n=this.totalEventList[t];n&&(n[e]&&delete n[e],0==Object.keys(n).length&&delete this.totalEventList[t])},e.offById=function(t){for(var e in this.totalEventList){var n=this.totalEventList[e];if(n)for(var i in n)i==t&&delete n[t]}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameApp.ts",["cc","./LogManager.ts","./Config2.ts","./EventManager.ts","./StorageManager.ts","./AssetsManager.ts"],(function(n){var e,t,i,o,a,s;return{setters:[function(n){e=n.cclegacy},function(n){t=n.LogManager},function(n){i=n.Config},function(n){o=n.EventManager},function(n){a=n.StorageManager},function(n){s=n.AssetsManager}],execute:function(){e._RF.push({},"6b6d4ez5TlL0pqltIqlkj5G","GameApp",void 0);var r=n("GameApp",function(){function n(){}return n.init=function(){this.log=new t,this.config=new i,this.event=new o,this.storage=new a,this.res=new s},n}());r.log=void 0,r.config=void 0,r.event=void 0,r.storage=void 0,r.timer=void 0,r.audio=void 0,r.Layer=void 0,r.game=void 0,r.res=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},function(t){a=t.GameApp}],execute:function(){n._RF.push({},"746d6tH/d9F3L5VLK+z2xod","GameConfig",void 0);t("GameConfig",function(){function t(t){this._data=null;var e=t.json;this._data=Object.freeze(e),a.log.logConfig(this._data,"游戏配置")}return e(t,[{key:"version",get:function(){return this._data.config.version}},{key:"package",get:function(){return this._data.config.package}},{key:"frameRate",get:function(){return this._data.config.frameRate}},{key:"frameRateIOS",get:function(){return this._data.config.frameRateIOS}},{key:"localDataKey",get:function(){return this._data.config.localDataKey}},{key:"localDataIv",get:function(){return this._data.config.localDataIv}},{key:"httpServer",get:function(){return this._data.config.httpServer}},{key:"httpTimeout",get:function(){return this._data.config.httpTimeout}},{key:"language",get:function(){return this._data.language.type||["zh"]}},{key:"languagePathJson",get:function(){return this._data.language.path.json||"language/json"}},{key:"languagePathTexture",get:function(){return this._data.language.path.texture||"language/texture"}},{key:"bundleEnable",get:function(){return this._data.bundle.enable}},{key:"bundleServer",get:function(){return this._data.bundle.server}},{key:"bundleName",get:function(){return this._data.bundle.name}},{key:"bundleVersion",get:function(){return this._data.bundle.version}},{key:"isTest",get:function(){return this._data.config.isTest}},{key:"projectName",get:function(){return this._data.config.projectName}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig2.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"a13eft6ku9Cuoq/oZWkS2Vt","GameConfig",void 0);r("GameItemType",function(r){return r[r.NONE=0]="NONE",r[r.MOVE=1]="MOVE",r[r.PHYSICS=2]="PHYSICS",r[r.IMMOVABLE=3]="IMMOVABLE",r}({})),r("GameColor",function(r){return r[r.RED=0]="RED",r[r.BLUE=1]="BLUE",r[r.PINK=2]="PINK",r[r.GREEN=3]="GREEN",r[r.CYAN=4]="CYAN",r[r.PURPLE=5]="PURPLE",r[r.GOLD=6]="GOLD",r[r.MULTICOLOURED=7]="MULTICOLOURED",r[r.MAGNET=101]="MAGNET",r}({})),r("GameAnimitionEvent",function(r){return r[r.COLISION=0]="COLISION",r[r.BOTTOM=1]="BOTTOM",r[r.DISAPEAR=2]="DISAPEAR",r[r.DISAPEAR_fly=3]="DISAPEAR_fly",r[r.SYNTHESIS=4]="SYNTHESIS",r[r.PUSH_NODE=5]="PUSH_NODE",r[r.SPECIAL=6]="SPECIAL",r[r.GUIDE_ARROW=7]="GUIDE_ARROW",r}({})),r("GameType",function(r){return r[r["关卡模式"]=0]="关卡模式",r[r["无尽模式"]=1]="无尽模式",r}({})),r("GamePropMode",function(r){return r[r.hammer=1]="hammer",r[r.optional=2]="optional",r[r.resurgence=3]="resurgence",r[r.magnet=4]="magnet",r[r.remove_bottom=5]="remove_bottom",r}({})),r("GameState",function(r){return r[r.wait=0]="wait",r[r.playing=1]="playing",r[r.finish=2]="finish",r}({})),r("BarrierType",function(r){return r[r.NONE=0]="NONE",r[r.HEXAGON=1]="HEXAGON",r[r.SQUARE=2]="SQUARE",r[r.TRIANGLE=3]="TRIANGLE",r[r.TRAPEZOID=4]="TRAPEZOID",r[r.CAMBER=5]="CAMBER",r[r.LINE=6]="LINE",r[r.barrier_camber_turn90=100]="barrier_camber_turn90",r[r.barrier_camber_turn180=101]="barrier_camber_turn180",r[r.barrier_camber_turn270=102]="barrier_camber_turn270",r[r.barrier_triangle_turn90=103]="barrier_triangle_turn90",r[r.barrier_triangle_turn180=104]="barrier_triangle_turn180",r[r.barrier_triangle_turn270=105]="barrier_triangle_turn270",r}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./ViewUtil.ts"],(function(t){var e,o;return{setters:[function(t){e=t.cclegacy},function(t){o=t.ViewUtil}],execute:function(){e._RF.push({},"857eeFdHtRKdLCQWCIlYBUK","GameManager",void 0);t("GameManager",function(){function t(t){this.root=void 0,this.game_root=void 0,this.game_state=!1,this.portrait=!1,this.root=t}var e=t.prototype;return e.setGameViewBundle=function(t,e){var i=this;if(void 0===e&&(e=this.game_state),!this.game_root)return new Promise((function(a,n){o.createPrefabNodeAsync(t,t,!0).then((function(t){i.game_root||(t.active=e,i.root.addChild(t),i.game_root=t,i.game_state=e,a(t))})).catch((function(e){console.error("路径为【"+t+"】的预制加载失败"),console.error(e),n(null)}))}))},e.getRoot=function(){return this.root},e.openGame=function(){this.game_root&&(this.game_root.active=!0,this.game_state=!0)},e.closeGame=function(){this.game_root&&(this.game_root.active=!1,this.game_state=!1)},e.getGameState=function(){return this.game_state},e.getGameRoot=function(){return this.game_root},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameMapModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NumberUtil.ts","./ObjectUtil.ts","./GameConfig2.ts","./GameApp.ts","./Config.ts","./UserModel.ts","./GameModel.ts"],(function(o){var n,r,e,s,l,u,t,c,i,a,m,f;return{setters:[function(o){n=o.asyncToGenerator,r=o.regeneratorRuntime},function(o){e=o.cclegacy,s=o.assetManager,l=o.JsonAsset},function(o){u=o.number_util},function(o){t=o.objectUtil},function(o){c=o.GameType},function(o){i=o.GameApp},function(o){a=o.Bundle},function(o){m=o.userModel},function(o){f=o.game_model}],execute:function(){e._RF.push({},"62552D8GehCE72bRawvanbY","GameMapModel",void 0);o("game_map_model",new(function(){function o(){this._map_pass=[],this._map_endless=[],this.pass_inf=void 0,this.endless_info=void 0}var e=o.prototype;return e.init=function(){if(!this.pass_inf){var o=s.bundles.get(a.GAME).getDirWithPath("map/pass",l);console.log(o),this.pass_inf=o}if(!this.endless_info){var n=s.bundles.get(a.GAME).getDirWithPath("map/endless",l);console.log(n),this.endless_info=n}},e.getMapData=function(){var o=n(r().mark((function o(){var n,e,s,l;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.init(),console.log("---getMapData---"),n=m.game_pass,e=c.关卡模式,n>this.pass_inf.length?(e=c.无尽模式,l=n-this.pass_inf.length,l%=this.endless_info.length,console.log("关卡模式:",c.无尽模式),console.log("temp_pass:",l),s=this.endless_info[l].path):s="map/pass/MapMain"+n,o.next=7,this.getPassMapData(n,e,s);case 7:return o.abrupt("return",o.sent);case 8:case"end":return o.stop()}}),o,this)})));return function(){return o.apply(this,arguments)}}(),e.getPassMapData=function(o,e,s){var u=this;return new Promise(n(r().mark((function n(t,m){var f,p;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("pass:",o),console.log("mode:",e),e!=c.关卡模式){n.next=13;break}if(!u._map_pass[o]){n.next=9;break}return console.log("缓存数据1：",u._map_pass[o]),t(u._map_pass[o]),n.abrupt("return");case 9:if(!u._map_endless[o]){n.next=13;break}return console.log("缓存数据2：",u._map_endless[o]),t(u._map_endless[o]),n.abrupt("return");case 13:return console.log("url:",s),n.next=16,i.res.loadAsync(a.GAME,s,l);case 16:f=n.sent,p=null,f&&(p=f.json,e==c.关卡模式?u._map_pass[o]=p:u._map_endless[o]=p,f.decRef()),t(p);case 20:case"end":return n.stop()}}),n)}))))},e.getPassMapData1=function(o,n){var r=this;return new Promise((function(e,u){if(console.log("pass:",o),console.log("mode:",n),n==c.关卡模式){if(r._map_pass[o])return console.log("缓存数据1：",r._map_pass[o]),void e(r._map_pass[o])}else if(r._map_endless[o])return console.log("缓存数据2：",r._map_endless[o]),void e(r._map_endless[o]);s.loadBundle(a.GAME,(function(s,u){var t;s?console.log("err:",s):(t="map/"+(t=n==c.关卡模式?"pass":"endless")+"/MapMain"+o,console.log("url",t),u.load(t,l,(function(s,l){console.log(l),l&&(n==c.关卡模式?r._map_pass[o]=l.json:r._map_endless[o]=l.json),e(l?l.json:null)})))}))}))},e.setPassMapData=function(o){o.type==c.关卡模式?this._map_pass[o.pass]=o:this._map_endless[o.pass]=o},e.randomMap=function(o,n){void 0===n&&(n=!1);var r,e=t.deepCopy(o),s=u.randomNum(4,6);n?(console.log("有难度的随机"),r=1==u.randomNum(1,2*(s-2)+1)?s:u.randomNum(2,s-1)):r=u.randomNum(2,s);var l=s-r,c=u.randomNum(0,e.length-1),i=e.splice(c,1)[0],a=u.randomNum(0,e.length-1),m=e.splice(a,1)[0];return 1==o.length&&(r=s,l=0),[{color:i,num:r,sort:2},{color:m,num:l,sort:1}]},e.distributeCoins=function(o,n){return this.distributeCoins2(o,n)},e.distributeCoins2=function(o,n){var r=this;console.log("coins:",o),console.log("positions:",n);var e=[],s=t.deepCopy(o).filter((function(o){return 0===o.num})),l=t.deepCopy(o).filter((function(o){return o.num>0}));if(0==l.length){var c=t.deepCopy(f.getPostionList()).filter((function(o){return n.includes(o.id)}));return console.log("position_list:",c),c.forEach((function(o){var n={positionId:o.id,colors:[]},l=[];o.adjoint.forEach((function(o){var n=e.find((function(n){return n.positionId==o}));if(n){var r=n.colors;if(r.length>=2){var s=r.find((function(o){return 2==o.sort}));l.push(s.color)}else l.push(r.find((function(o){return 2==o.sort})).color)}}));var u=t.deepCopy(s).map((function(o){return o.color})),c=[];l.length>0?u.forEach((function(o){l.some((function(n){return n==o}))||c.push(o)})):c=u,n.colors=r.randomMap(c),e.push(n)})),console.log("--assignedCoins---",e),e}return n.forEach((function(o){var n={positionId:o,colors:[]};if(l.every((function(o){return 0==o.num})))return n.colors=r.randomMap(s.map((function(o){return o.color}))),p(n.colors),void e.push(n);var t=l.filter((function(o){return o.num<=6&&o.num>0}));if(t.length>0){var c=t[0],i=c.num;if(i>4)l.find((function(o){return o.color==c.color})).num=0,n.colors.push({color:c.color,num:i,sort:1});else{var a=6-i,m=u.randomNum(0,s.length-1);n.colors.push({color:c.color,num:i,sort:1}),n.colors.push({color:s[m].color,num:a,sort:2}),l.find((function(o){return o.color==c.color})).num=0}return p(n.colors),void e.push(n)}var f=u.randomNum(4,6),d=u.randomNum(2,f),h=f-d;1==h&&(d=u.randomNum(2,f),h=f-d);var g=l.filter((function(o){return o.num>=d}));if(0==g.length){d<4&&(d=u.randomNum(4,6));var _=u.randomNum(0,s.length-1);return n.colors.push({color:s[_].color,num:d,sort:1}),e.push(n),console.log("---630----"),void p(n.colors)}if(1==g.length){var v=g[0];if(h>0&&v.num>=d&&v.num>=h){if(1==u.randomNum(0,1)){l.find((function(o){return o.color==v.color})).num-=d,n.colors.push({color:v.color,num:d,sort:2});var x=u.randomNum(0,s.length-1);n.colors.push({color:s[x].color,num:h,sort:1})}else{l.find((function(o){return o.color==v.color})).num-=h,n.colors.push({color:v.color,num:h,sort:1});var N=u.randomNum(0,s.length-1);n.colors.push({color:s[N].color,num:d,sort:2})}return e.push(n),void p(n.colors)}}var M=g[u.randomNum(0,g.length-1)];if(M.num>=d?(l.find((function(o){return o.color==M.color})).num-=d,n.colors.push({color:M.color,num:d,sort:2})):console.error("出现数量对不上的情况!!!"),h>0){if(0==(g=l.filter((function(o){return o.num>=h&&o.color!=M.color}))).length){var E=u.randomNum(0,s.length-1);return n.colors.push({color:s[E].color,num:h,sort:1}),e.push(n),console.log("---630----"),void p(n.colors)}var b=g[u.randomNum(0,g.length-1)];b.num>=h?(l.find((function(o){return o.color==b.color})).num-=h,n.colors.push({color:b.color,num:h,sort:1})):console.error("出现数量对不上的情况!!!")}p(n.colors),e.push(n)})),l.forEach((function(o){if(o.num>0){var n=o.num,r=o.color,l=e.filter((function(o){return!o.colors.some((function(o){return o.color==r}))&&o.colors.some((function(o){return s.some((function(n){return n.color==o.color}))}))}));if(console.log("整理满足条件的位置",l),l.length>0)for(var u=!0,t=-1,c=-1,i=-1;u;)u=!1,l.forEach((function(o,r){o.colors.forEach((function(o,e){s.some((function(n){return n.color==o.color}))&&(u||(n>o.num||n==o.num?(u=!0,t=r,c=e,i=o.num):(u=!0,t=r,c=e,i=n)))}))})),t>-1&&c>-1&&i>-1&&(o.num-=i,e[t].colors[c].color=r,u=!1)}})),e.forEach((function(o){o&&(o.colors.some((function(o){return 1===o.num}))&&o.colors.forEach((function(o){o.sort=1===o.num?1:2})))})),e},e.randomMapColor=function(o){var n=this;console.log("根据颜色数量随机出硬币组:",o);var r=t.deepCopy(o),e=r.filter((function(o){return o.num<=0})),s=r.filter((function(o){return o.num>0})),l=[];if(1==r.length)for(var c=r.shift();c.num>0;){var i=[],a=u.randomNum(4,6);c.num-=a;var m={color:c.color,num:a,sort:1};i.push(m),l.push(i)}else for(var f=0,p=function(){f++;var o=[],r=s.map((function(o){return o.color})),t=n.randomMap(r);console.log("node_num:",t);var c=s.findIndex((function(o){return o.color==t[0].color})),i=s.findIndex((function(o){return o.color==t[1].color}));console.log("index1:",c),console.log("index2:",i);var a,m=s[c].color,p=-1,d=-1;s[i]?p=null==(a=s[i])?void 0:a.color:(d=u.randomNum(0,e.length-1),console.log("max_index:",d),p=e[d].color);var h=t[0].num,g=t[1].num;console.log("index_num1:",h),console.log("index_num2:",g);var _=s[c].num-h,v=-1==d?s[i].num-g:100;if(console.log("num1:",_),console.log("num2:",v),_>0)_>=2?s[c].num-=h:(h=s[c].num>=4?2:s[c].num,s[c].num-=h,0==s[c].num&&s.splice(c,1));else if(0==_)s.splice(c,1);else if(s[c].num>=2)if(h=s[c].num,s.splice(c,1),i=s.findIndex((function(o){return o.color==t[1].color})),v=-1==d?s[i].num-g:100,console.log("index_num2:",g),h+g>=4)v<2&&(d=u.randomNum(0,e.length-1),console.log("max_index2:",d),p=e[d].color);else{var x=4-h;g=x,s.length>0&&s[i].num>=x?v=-1==d?s[i].num-g:100:(d=u.randomNum(0,e.length-1),console.log("max_index3:",d),p=e[d].color)}console.log("index_num1:",h),d>=0?g=u.randomNum(4-h,6-h):(h+g>6&&(g=u.randomNum(4-h,6-h)),i=s.findIndex((function(o){return o.color==t[1].color})),v=-1==d?s[i].num-g:100,console.log("index_num2:",g),console.log("num2:",v),v>0?(v>=2?g+h<4&&(s[i].num>4-h?(g=s[i].num>6-h?u.randomNum(4-h,6-h):s[i].num,console.log("---256---",g)):(d=u.randomNum(0,e.length-1),console.log("max_index3:",d),p=e[d].color,g=u.randomNum(4-h,6-h))):g=s[i].num>=4?2:s[i].num,g+h>6?(d=u.randomNum(0,e.length-1),console.log("max_index3:",d),p=e[d].color,g=u.randomNum(4-h,6-h)):(console.log("color2_index:",i),console.log("color_mix:",s),-1==d&&(s[i].num-=g,0==s[i].num&&s.splice(i,1)))):0==v?s.splice(i,1):-1!=p&&((g=s[i].num)+h>=4?s.splice(i,1):(d=u.randomNum(0,e.length-1),console.log("max_index3:",d),p=e[d].color,g=u.randomNum(4-h,6-h))));var N={color:m,num:h,sort:2};if(o.push(N),g>0){var M={color:p,num:g,sort:1};o.push(M)}var E=0;o.forEach((function(o){E+=o.num})),(E<4||E>6)&&console.error("----长度异常----"),l.push(o),console.log("temp_list_item:",o)};s.length>0&&f<100;)p();console.log("push_color:",l);var d=[];return l.forEach((function(o){o.forEach((function(o){var n=-1;d.forEach((function(r,e){o.color==r.color&&(n=e)})),-1==n&&(d.push({color:o.color,num:0}),n=d.length-1),d[n].num+=o.num})),console.log(o),o.length>2&&console.error("-*---3.40---长度异常")})),d.forEach((function(n){o.forEach((function(o){o.color==n.color&&0!=o.num&&o.num!=n.num&&console.error("----382---长度异常",o.color,"--num:",o.num,"---",n.num)}))})),l},o}()));function p(o){if(!i.config||i.config.game.isTest){var n=0;o.forEach((function(o){o&&(n+=o.num)})),(n<4||n>6)&&console.error(n)}}e._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,o;return{setters:[function(t){i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t.Vec3}],execute:function(){n._RF.push({},"fb219VEFd9BnpWbR0Zyz+NO","GameModel",void 0);var e=t("game_model",new(function(){function t(){this.content_width=6.5,this.content_height=12,this.contetn_item_width=1.05,this.contetn_item_height=.165,this.content_item_scale=1.1,this.postionList=[],this.centerPos=new o(0,0,-3),this.unhandledNode=[],this.current_item_id=-1,this.finish_game=!1,this.current_sound=-1,this.prop_scale=1,this.prop_time=.8}var n=t.prototype;return n.getPostionList=function(){return this.postionList},n.setPostionList=function(t){var i=this;t.forEach((function(t){t.position=new o(t.position.x,t.position.y,t.position.z),t.world_postion=new o(t.world_postion.x,t.world_postion.y,t.world_postion.z)})),t.forEach((function(n,o){if(n){var r=e.getPointsWithinCircle(n,t,i.contetn_item_width+.3);r&&(n.adjoint||(n.adjoint=[]),r.forEach((function(t,i){t&&n.adjoint.push(t.id)})))}})),t.forEach((function(t,n){if(t){var o={id:t.id,isFixed:t.isFixed,offsets:t.offsets,position:t.position,world_postion:t.world_postion,adjoint:t.adjoint};i.postionList.push(o)}})),console.log("整理后的桌面数据：",this.postionList)},n.getAdjacentHexes=function(t){var i=this,n=this.postionList.find((function(i){return i.id===t})),o=[];return n.adjoint.forEach((function(t,n){if(t){var e=i.postionList.find((function(i){return i.id===t}));e&&o.push(e)}})),o},n.getPostionById=function(t){return this.postionList.find((function(i){return i.id==t}))},n.getMovePostionList=function(t){var i=this.getAdjacentHexes(t);if((i=i.filter((function(t){return t.isFixed})))&&0!=i.length){var n=this.getPostionById(t),o=n.color;if(o&&!(o.length<=0)){var e=o[o.length-1];if((i=i.filter((function(t){return t.color[t.color.length-1]==e})))&&0!=i.length){if(i.length>1){var r=100,s=0;return i.forEach((function(t,i){if(t){var n=t.color.filter((function(t){return t==e})).length;n<r&&(r=n,s=i)}})),console.log("---颜色有多个---",i),{color:e,start_position_id:i[s].id,end_position_id:n.id,is_other:!0}}var d=i[0],h=n.color,a=d.color,c=h.every((function(t){return t==e})),u=a.every((function(t){return t==e}));if(c&&u)return n.id==this.current_item_id||d.id==this.current_item_id?{color:e,start_position_id:n.id==this.current_item_id?n.id:d.id,end_position_id:n.id==this.current_item_id?d.id:n.id}:{color:e,start_position_id:h.length>a.length?d.id:n.id,end_position_id:h.length>a.length?n.id:d.id};if(c)return{color:e,start_position_id:d.id,end_position_id:n.id};if(u)return{color:e,start_position_id:n.id,end_position_id:d.id};if(n.id==this.current_item_id||d.id==this.current_item_id)return{color:e,start_position_id:n.id==this.current_item_id?n.id:d.id,end_position_id:n.id==this.current_item_id?d.id:n.id};var f=h.filter((function(t){return t==e})),p=a.filter((function(t){return t==e}));return{color:e,start_position_id:f.length>p.length?d.id:n.id,end_position_id:f.length>p.length?n.id:d.id}}}}},n.getPointsWithinCircle=function(t,i,n){return i.filter((function(i){return i.id!==t.id&&Math.sqrt(Math.pow(i.position.x-t.position.x,2)+Math.pow(i.position.z-t.position.z,2))<=n}))},n.getPositionByPoint=function(t){var i=t.x,n=t.z,o=100,e=-1;return this.postionList.forEach((function(t,r){var s=t.position,d=Math.sqrt(Math.pow(i-s.x,2)+Math.pow(n-s.z,2));d<o&&!t.isFixed&&!t.isBarrier&&(o=d,e=r)})),e},n.findNeighborsWithinSteps=function(t,n,o){for(var e,r=new Map,s=i(t);!(e=s()).done;){var d=e.value;r.set(d.id,d)}var h=new Set,a=[];a.push({id:n,steps:0}),h.add(n);for(var c=[];a.length>0;){var u=a.shift(),f=r.get(u.id);if(f&&u.steps<o)for(var p,_=i(f.adjoint);!(p=_()).done;){var l=p.value;r.has(l)&&!h.has(l)&&(h.add(l),a.push({id:l,steps:u.steps+1}),c.push({id:l,steps:u.steps+1}))}}return c},n.bfsShortestPath=function(t,n,o){var e=[{id:n,steps:0,path:[n]}],r=new Set;r.add(n);var s=new Map;for(t.forEach((function(t){return s.set(t.id,t)}));e.length>0;){var d=e.shift(),h=d.id,a=d.steps,c=d.path;if(h===o)return{steps:a,path:c};var u=s.get(h);if(u)for(var f,p=i(u.adjoint);!(f=p()).done;){var _=f.value;r.has(_)||(r.add(_),e.push({id:_,steps:a+1,path:[].concat(c,[_])}))}}return null},t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameQueryConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts","./GameApp.ts"],(function(t){var e,n,i,r,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,i=t.sys},function(t){r=t.StringUtil},function(t){a=t.GameApp}],execute:function(){n._RF.push({},"24edbZN/7dLBob/XF3g3iLM","GameQueryConfig",void 0);t("GameQueryConfig",function(){function t(){this._data=null,i.isBrowser?(this._data=this.parseUrl(),this._data.username||(this._data.username=r.guid()),a.log.logConfig(this._data,"查询参数")):this._data={}}return t.prototype.parseUrl=function(){if("object"!=typeof window)return{};if(!window.document)return{};var t=window.document.location.href.toString().split("?");if("string"==typeof t[1]){for(var e={},n=0,i=(t=t[1].split("&")).length;n<i;++n){var r=t[n],a=r.indexOf("=");if(!(a<0)){var o=r.substring(0,a),u=r.substring(a+1);e[decodeURIComponent(o)]=u&&decodeURIComponent(u)}}return e}return{}},e(t,[{key:"debug",get:function(){return this._data.debug}},{key:"username",get:function(){return this._data.username}},{key:"lang",get:function(){return this._data.lang||"zh"}},{key:"data",get:function(){return this._data}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameUIConfig.ts",["cc","./LayerManager.ts","./Config.ts"],(function(e){var a,n,o;return{setters:[function(e){a=e.cclegacy},function(e){n=e.LayerType},function(e){o=e.Bundle}],execute:function(){var i;a._RF.push({},"701ec73CNpPSJ0DqM4uH9Nm","GameUIConfig",void 0);var l=e("ViewName",function(e){return e[e.LoadingView=0]="LoadingView",e[e.HomeLayer=1]="HomeLayer",e[e.GAME_TOP=2]="GAME_TOP",e[e.GameLayerRead=3]="GameLayerRead",e[e.SettingDialog=4]="SettingDialog",e[e.GameFinishClose=5]="GameFinishClose",e[e.GAMESTART=6]="GAMESTART",e[e.TTSSIDEBAR=7]="TTSSIDEBAR",e[e.CleanDialog=8]="CleanDialog",e[e.DeveloperDialog=9]="DeveloperDialog",e}({}));e("UIConfigData",((i={})[l.LoadingView]={layer:n.loadingUI,prefab:"prefab/loading_layer",destroy:!0},i[l.HomeLayer]={layer:n.UI,bundle:o.HOME_LAYER},i[l.SettingDialog]={layer:n.PopUp,bundle:o.SETTING_DIALOG,mask:!0},i[l.GameFinishClose]={layer:n.PopUp,bundle:o.GameFinishClose,mask:!0},i[l.GAMESTART]={layer:n.PopUp,bundle:o.GAMESTART,mask:!0},i[l.TTSSIDEBAR]={layer:n.PopUp,bundle:o.TTSSIDEBAR,mask:!0},i[l.CleanDialog]={layer:n.PopUp,bundle:o.CLEANDIALOG,mask:!0},i[l.DeveloperDialog]={layer:n.PopUp,bundle:o.DEVELOPER_DIALOG,mask:!0},i));a._RF.pop()}}}));

System.register("chunks:///_virtual/GroupRender.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,r,t;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,t=e.Component}],execute:function(){var u;o._RF.push({},"a3a2c30g95BKphIiRC/zbxy","GroupRender",void 0);var i=r.ccclass;r.property,r.type,r.disallowMultiple,r.requireComponent,r.executeInEditMode,e("GroupRender",i("GroupRender")(u=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var r=o.prototype;return r.onEnable=function(){this.node.openGroupRendering=!0},r.onDisable=function(){this.node.openGroupRendering=null},o}(t))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/GUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts"],(function(t){var i,e,r,o,n,s,a,h,l,g;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.UITransform,n=t.view,s=t.math,a=t.screen,h=t.ResolutionPolicy,l=t.Component},function(t){g=t.GameApp}],execute:function(){var p;e._RF.push({},"3bb630B/fNBAaDf6DTNWC58","GUI",void 0);var c=r.ccclass;t("GUI",c("GUI")(p=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this).portrait=void 0,i.portraitDrz=null,i.landscapeDrz=null,i.transform=null,i}i(e,t);var r=e.prototype;return r.onLoad=function(){this.init()},r.init=function(){this.transform=this.getComponent(o),n.getDesignResolutionSize().width>n.getDesignResolutionSize().height?(this.landscapeDrz=n.getDesignResolutionSize(),this.portraitDrz=new s.Size(this.landscapeDrz.height,this.landscapeDrz.width)):(this.portraitDrz=n.getDesignResolutionSize(),this.landscapeDrz=new s.Size(this.portraitDrz.height,this.portraitDrz.width)),this.resize()},r.resize=function(){var t;t=n.getDesignResolutionSize().width>n.getDesignResolutionSize().height?this.landscapeDrz:this.portraitDrz;var i=a.windowSize,e=i.width,r=i.height,o=e,s=r;e/r>t.width/t.height?(o=(s=t.height)*e/r,this.portrait=!1):(s=(o=t.width)*r/e,this.portrait=!0),n.setDesignResolutionSize(o,s,h.UNKNOWN),this.transform.width=o,this.transform.height=s,g.game.portrait=this.portrait,g.log.logView(g.game.portrait,"屏幕竖屏"),g.log.logView(t,"设计尺寸"),g.log.logView(i,"屏幕尺寸")},e}(l))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,i,r,o,s,p,u,l,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,n=e.inheritsLoose,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,p=e.CCString,u=e.Label,l=e.RichText,c=e.warn,g=e.Component}],execute:function(){var h,d,f,y,m,b,_,L,v,z,D,I,k,w;o._RF.push({},"44ceekc8u9Pcq9KWAdFtOAM","LanguageLabel",void 0);var S=s.ccclass,C=s.property,U=s.menu,F=e("LangLabelParamsItem",S("LangLabelParamsItem")((f=t((d=function(){a(this,"key",f,this),a(this,"value",y,this)}).prototype,"key",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(d.prototype,"value",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=d))||h);e("LanguageLabel",(m=S("LanguageLabel"),b=U("ui/language/LanguageLabel"),_=C({type:F,displayName:"params"}),L=C({type:F,displayName:"params"}),v=C({serializable:!0}),z=C({type:p,serializable:!0}),m(D=b((k=t((I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"_params",k,i(t)),a(t,"_dataID",w,i(t)),t.initFontSize=0,t._needUpdate=!1,t}n(t,e);var o=t.prototype;return o.language=function(){this._needUpdate=!0},o.onLoad=function(){this._needUpdate=!0},o.setVars=function(e,t){for(var a=!1,n=0;n<this._params.length;n++){var i=this._params[n];i.key===e&&(i.value=t,a=!0)}if(!a){var r=new F;r.key=e,r.value=t,this._params.push(r)}this._needUpdate=!0},o.update=function(){this._needUpdate&&(this.updateContent(),this._needUpdate=!1)},o.updateContent=function(){var e=this.getComponent(u),t=this.getComponent(l);e?(e.string=this.string,this.initFontSize=e.fontSize):t?(this.initFontSize=t.fontSize,t.string=this.string,this.initFontSize=t.fontSize):c("[LanguageLabel], 该节点没有cc.Label || cc.RichText组件")},r(t,[{key:"params",get:function(){return this._params||[]},set:function(e){this._params=e,this._needUpdate=!0}},{key:"dataID",get:function(){return this._dataID||""},set:function(e){this._dataID=e,this._needUpdate=!0}},{key:"string",get:function(){var e="-----------1";return e&&this._params.length>0&&this._params.forEach((function(t){e=e.replace("%{"+t.key+"}",t.value)})),e||(c("[LanguageLabel] 未找到语言标识，使用dataID替换"),e=this._dataID),e}}]),t}(g)).prototype,"_params",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(I.prototype,"params",[L],Object.getOwnPropertyDescriptor(I.prototype,"params"),I.prototype),w=t(I.prototype,"_dataID",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(I.prototype,"dataID",[z],Object.getOwnPropertyDescriptor(I.prototype,"dataID"),I.prototype),D=I))||D)||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerPopUp.ts"],(function(a){var s,t,e;return{setters:[function(a){s=a.inheritsLoose},function(a){t=a.cclegacy},function(a){e=a.LayerPopUp}],execute:function(){t._RF.push({},"e18d6fUDVlCkLQHBt6jhh/a","LayerDialog",void 0);a("LayerDialog",function(a){function t(){for(var s,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(s=a.call.apply(a,[this].concat(e))||this).params=[],s}s(t,a);var e=t.prototype;return e.add=function(a,s,t){this.ui_nodes.size>0?this.params.push({config:a,params:s,callbacks:t}):(this.black.enabled=!0,this.show(a,s,t))},e.show=function(a,s,t){var e=this,i=this.ui_cache.get(a.id);null==i&&((i={}).config=a,i.valid=!0),this.ui_nodes.set(a.id,i),i.callbacks=null!=t?t:{};var n=i.callbacks.onRemoved;return i.callbacks.onRemoved=function(a,s){n&&n(a,s),setTimeout(e.next.bind(e),0)},i.params=s||{},this.load(i,a.bundle),a.prefab},e.setBlackDisable=function(){0==this.params.length&&(this.black.enabled=!1,this.closeVacancyRemove(),this.closeMask())},e.next=function(){if(this.params.length>0){var a=this.params.shift();this.show(a.config,a.params,a.callbacks)}},t}(e));t._RF.pop()}}}));

System.register("chunks:///_virtual/LayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerUI.ts","./LayerPopUp.ts","./LayerDialog.ts","./LayerNotify.ts","./DelegateComponent.ts"],(function(e){var i,t,a,o,n,s,r,d,c,h,p,l,u;return{setters:[function(e){i=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e.warn,n=e.Node,s=e.Layers,r=e.Widget,d=e.Camera},function(e){c=e.LayerUI},function(e){h=e.LayerPopUp},function(e){p=e.LayerDialog},function(e){l=e.LayerNotify},function(e){u=e.DelegateComponent}],execute:function(){a._RF.push({},"f75e3rd+dJPA58kAlCeAWIj","LayerManager",void 0);var f=e("LayerType",function(e){return e.GameApp="LayerGame",e.UI="LayerUI",e.loadingUI="loadingUI",e.PopUp="LayerPopUp",e.Dialog="LayerDialog",e.animation="LayerAnimation",e.System="LayerSystem",e.Notify="LayerNotify",e.Guide="LayerGuide",e.Top="LayerTop",e}({}));e("LayerManager",function(){var e=a.prototype;function a(e){this.root=void 0,this.camera=void 0,this.game=void 0,this.guide=void 0,this.animation=void 0,this.Top=void 0,this.ui=void 0,this.loading=void 0,this.popup=void 0,this.dialog=void 0,this.system=void 0,this.notify=void 0,this.configs={},this.root=e,this.camera=this.root.getComponentInChildren(d),this.game=this.create_node(f.GameApp),this.ui=new c(f.UI),this.loading=new c(f.loadingUI),this.popup=new h(f.PopUp),this.dialog=new p(f.Dialog),this.system=new p(f.System),this.notify=new l(f.Notify),this.animation=this.create_node(f.animation),this.guide=this.create_node(f.Guide),this.Top=this.create_node(f.Top),e.addChild(this.game),e.addChild(this.ui),e.addChild(this.loading),e.addChild(this.popup),e.addChild(this.dialog),e.addChild(this.animation),e.addChild(this.system),e.addChild(this.notify),e.addChild(this.guide),e.addChild(this.Top)}return e.init=function(e){this.configs=e},e.toast=function(e,i){void 0===i&&(i=!1),this.notify.toast(e,i)},e.toastSprite=function(e,i){void 0===i&&(i=!1),this.notify.toast(e,i,!0)},e.waitOpen=function(){this.notify.waitOpen()},e.waitClose=function(){this.notify.waitClose()},e.setConfig=function(e,i){this.configs[e]=i},e.open=function(e,i,t){void 0===i&&(i=null);var a=this.configs[e];if(null!=a)switch(a.id=e,console.log("打开窗口：",a.bundle),a.layer){case f.UI:this.ui.add(a,i,t);break;case f.loadingUI:this.loading.add(a,i,t);break;case f.PopUp:this.popup.add(a,i,t);break;case f.Dialog:this.dialog.add(a,i,t);break;case f.System:this.system.add(a,i,t);break;default:o("打开编号为【"+e+"】的界面失败，未知的层级类型")}else o("打开编号为【"+e+"】的界面失败，配置信息不存在")},e.openAsync=function(){var e=i(t().mark((function e(i,a){var o=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=null),e.abrupt("return",new Promise((function(e,t){var n={onAdded:function(i,t){e(i)}};o.open(i,a,n)})));case 2:case"end":return e.stop()}}),e)})));return function(i,t){return e.apply(this,arguments)}}(),e.replace=function(e,i,t){void 0===t&&(t=null),this.open(i,t),this.remove(e)},e.replaceAsync=function(e,a,o){var n=this;return void 0===o&&(o=null),new Promise(i(t().mark((function i(s,r){var d;return t().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.openAsync(a,o);case 2:d=i.sent,n.remove(e),s(d);case 5:case"end":return i.stop()}}),i)}))))},e.has=function(e){var i=this.configs[e];if(null==i)return o("编号为【"+e+"】的界面配置不存在，配置信息不存在"),!1;i.id=e;var t=!1;switch(i.layer){case f.UI:t=this.ui.has(i.id);break;case f.PopUp:t=this.popup.has(i.id);break;case f.Dialog:t=this.dialog.has(i.id);break;case f.System:t=this.system.has(i.id)}return t},e.get=function(e){var i=this.configs[e];if(null==i)return o("编号为【"+e+"】的界面配置不存在，配置信息不存在"),null;i.id=e;var t=null;switch(i.layer){case f.UI:t=this.ui.get(i.id);break;case f.PopUp:t=this.popup.get(i.id);break;case f.Dialog:t=this.dialog.get(i.id);break;case f.System:t=this.system.get(i.id)}return t},e.remove=function(e,i){var t=this.configs[e];if(null!=t)switch(t.id=e,t.layer){case f.UI:this.ui.remove(t.id,i);break;case f.loadingUI:this.loading.remove(t.id,i);break;case f.PopUp:this.popup.remove(t.id,i);break;case f.Dialog:this.dialog.remove(t.id,i);break;case f.System:this.system.remove(t.id,i);break;default:o("打开编号为【"+e+"】的界面失败，未知的层级类型")}else o("删除编号为【"+e+"】的界面失败，配置信息不存在")},e.removeByNode=function(e,i){if(e instanceof n){var t=e.getComponent(u);if(t&&t.vp){if(e.parent)e.parent.remove(t.vp.config.prefab,i);else if(i)switch(t.vp.config.layer){case f.UI:this.ui.removeCache(t.vp.config.prefab);break;case f.PopUp:this.popup.removeCache(t.vp.config.prefab);break;case f.Dialog:this.dialog.removeCache(t.vp.config.prefab);break;case f.System:this.system.removeCache(t.vp.config.prefab)}}else o("当前删除的node不是通过界面管理器添加到舞台上"),e.destroy()}},e.clear=function(e){void 0===e&&(e=!1),this.ui.clear(e),this.popup.clear(e),this.dialog.clear(e),this.system.clear(e)},e.create_node=function(e){var i=new n(e);i.layer=s.Enum.UI_2D;var t=i.addComponent(r);return t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.left=t.right=t.top=t.bottom=0,t.alignMode=2,t.enabled=!0,i},a}());a._RF.pop()}}}));

System.register("chunks:///_virtual/LayerNotify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ViewUtil.ts","./Notify.ts"],(function(t){var n,e,i,o,r,a,s,c,l,f,u,h;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t.Layers,a=t.BlockInputEvents,s=t.Widget,c=t.Node,l=t.instantiate,f=t.find},function(t){u=t.ViewUtil},function(t){h=t.Notify}],execute:function(){o._RF.push({},"157cacHiI1I067m/woHkcqo","LayerNotify",void 0);t("LayerNotify",function(t){function o(n){var e;(e=t.call(this,n)||this).black=void 0,e.wait=null,e.notify=null,e.notifyItem=null;var i=e.addComponent(s);return i.isAlignLeft=i.isAlignRight=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,i.alignMode=2,i.enabled=!0,e.init(),e}n(o,t);var c=o.prototype;return c.init=function(){this.layer=r.Enum.UI_2D,this.black=this.addComponent(a),this.black.enabled=!1},c.waitOpen=function(){var t=e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.wait){t.next=4;break}return t.next=3,u.createPrefabNodeAsync("common/prefab/wait");case 3:this.wait=t.sent;case 4:null==this.wait.parent&&(this.wait.parent=this,this.black.enabled=!0);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.waitClose=function(){this.wait.parent&&(this.wait.parent=null,this.black.enabled=!1)},c.toast=function(){var t=e(i().mark((function t(n,e,o){var r,a,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===o&&(o=!1),t.prev=1,null!=this.notify){t.next=8;break}return t.next=5,u.createPrefabNodeAsync("common/prefab/notify");case 5:this.notify=t.sent,this.notifyItem=f("item",this.notify),this.notifyItem.parent=null;case 8:this.notify.parent=this,r=l(this.notifyItem),a=r.getChildByName("prompt").getComponent(h),r.parent=this.notify,a.onComplete=function(){0==s.notify.children.length&&(s.notify.parent=null)},o?a.toastSprite(n,e):a.toast(n,e),this.notify.children.length>3&&this.notify.children[0].destroy(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.error("预制体未找到",t.t0);case 20:case"end":return t.stop()}}),t,this,[[1,17]])})));return function(n,e,i){return t.apply(this,arguments)}}(),o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerPopUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerUI.ts","./ViewUtil.ts"],(function(e){var t,n,i,s,o,a,c,r,h,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,i=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.Layers,c=e.BlockInputEvents,r=e.Node},function(e){h=e.LayerUI},function(e){u=e.ViewUtil}],execute:function(){o._RF.push({},"d7255H9uhJE4I20w29Ra8m4","LayerPopUp",void 0);e("LayerPopUp",function(e){function o(t){var n;return(n=e.call(this,t)||this).black=void 0,n.mask=void 0,n.init(),n}t(o,e);var h=o.prototype;return h.init=function(){this.layer=a.Enum.UI_2D,this.black=this.addComponent(c),this.black.enabled=!1},h.showUi=function(t){e.prototype.showUi.call(this,t),this.openVacancyRemove(t.config),this.black.enabled=!0},h.onHide=function(t){e.prototype.onHide.call(this,t),this.setBlackDisable()},h.setBlackDisable=function(){0==this.ui_nodes.size&&(this.black.enabled=!1),this.closeVacancyRemove(),this.closeMask()},h.closeMask=function(){for(var e,t=!0,i=n(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.mask){t=!1;break}}t&&(this.mask.parent=null)},h.openVacancyRemove=function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasEventListener(r.EventType.TOUCH_END,this.onTouchEnd,this)||this.on(r.EventType.TOUCH_END,this.onTouchEnd,this),null!=this.mask){e.next=5;break}return e.next=4,u.createPrefabNodeAsync("common/prefab/mask");case 4:this.mask=e.sent;case 5:t.mask&&(this.mask.parent=this,this.mask.setSiblingIndex(0));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),h.closeVacancyRemove=function(){for(var e,t=!0,i=n(this.ui_nodes.values());!(e=i()).done;){if(e.value.config.vacancy){t=!1;break}}t&&this.hasEventListener(r.EventType.TOUCH_END,this.onTouchEnd,this)&&this.off(r.EventType.TOUCH_END,this.onTouchEnd,this)},h.onTouchEnd=function(e){var t=this;e.target===this&&this.ui_nodes.forEach((function(e){e.valid&&e.config.vacancy&&t.remove(e.config.prefab,!0)}))},h.clear=function(t){e.prototype.clear.call(this,t),this.black.enabled=!1,this.active=!1,this.closeVacancyRemove(),this.closeMask()},o}(h));o._RF.pop()}}}));

System.register("chunks:///_virtual/LayerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./DelegateComponent.ts","./BaseComp.ts"],(function(e){var i,o,n,t,a,s,d,r,c,u;return{setters:[function(e){i=e.inheritsLoose},function(e){o=e.cclegacy,n=e.warn,t=e.error,a=e.instantiate,s=e.Widget,d=e.Node},function(e){r=e.GameApp},function(e){c=e.DelegateComponent},function(e){u=e.BaseComp}],execute:function(){o._RF.push({},"04fe6zXY25IVap3oRgZKL4/","LayerUI",void 0);e("LayerUI",function(e){function o(i){var o;(o=e.call(this,i)||this).ui_nodes=new Map,o.ui_cache=new Map;var n=o.addComponent(s);return n.isAlignLeft=n.isAlignRight=n.isAlignTop=n.isAlignBottom=!0,n.left=n.right=n.top=n.bottom=0,n.alignMode=2,n.enabled=!0,o}i(o,e);var d=o.prototype;return d.add=function(e,i,o){if(e.id&&this.ui_nodes.has(e.id))n("ID为【"+e.id+"】的预制重复加载");else{var t=this.ui_cache.get(e.id);null==t&&(t={config:e,params:{},callbacks:{},valid:!0}),this.ui_nodes.set(e.id,t),t.params=null!=i?i:{},t.callbacks=null!=o?o:{},t.valid=!0,this.load(t,e.bundle)}},d.load=function(e,i){var o=this;if(e&&e.node)this.showUi(e);else{var n=e.config.prefab;if(!n){if(!i)return void t("预制件路径为空");n=i}i=i||r.res.defaultBundleName,r.res.load(i,n,(function(i,s){if(i)return o.ui_nodes.delete(e.config.id),void t("路径为【"+n+"】的预制加载失败");var d=a(s);e.node=d;var r=d.addComponent(c);r.vp=e,r.onHide=o.onHide.bind(o),o.showUi(e)}))}},d.onHide=function(e){this.ui_nodes.delete(e.config.id)},d.showUi=function(e){var i=e.node.getComponent(u);i&&(i.vp=e),e.node.getComponent(c).add(),e.node.parent=this,e.valid=!0},d.remove=function(e,i){var o=void 0;void 0!==i&&(o=i);var n=this.ui_nodes.get(e);n&&(console.log("vp:",n),!1===(o=void 0!==o||void 0===n.config.destroy||n.config.destroy)&&this.ui_cache.set(n.config.id,n),n.node.getComponent(c).remove(o));!0===o&&this.removeCache(e)},d.removeCache=function(e){var i=this.ui_cache.get(e);(console.log("removeCache:",i),i)&&(this.ui_nodes.delete(e),this.ui_cache.delete(e),i.node.destroy(),console.log("----170----"))},d.get=function(e){var i=this.ui_nodes.get(e);return i?i.node:null},d.has=function(e){return this.ui_nodes.has(e)},d.clear=function(e){var i=this;this.ui_nodes.forEach((function(o,n){i.remove(o.config.id,e),o.valid=!1})),this.ui_nodes.clear(),e&&this.ui_cache.forEach((function(e,o){i.removeCache(o)}))},o}(d));o._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingIndicator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,n,r,e,a,l,c;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){e=t.cclegacy,a=t._decorator,l=t.Node,c=t.Component}],execute:function(){var s,d,u,p,g;e._RF.push({},"95143M/82NCOLKGzw14JlmS","LoadingIndicator",void 0);var h=a.ccclass,f=a.property;t("LoadingIndicator",(s=h("LoadingIndicator"),d=f(l),s((g=o((p=function(t){function o(){for(var o,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return o=t.call.apply(t,[this].concat(e))||this,n(o,"loading",g,r(o)),o.loading_rotate=0,o}return i(o,t),o.prototype.update=function(t){this.loading_rotate+=220*t,this.loading.setRotationFromEuler(0,0,-this.loading_rotate%360),this.loading_rotate>360&&(this.loading_rotate-=360)},o}(c)).prototype,"loading",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComp.ts","./platform.ts","./UserModel.ts","./PlatformModel.ts","./GameApp.ts","./Config.ts","./ViewUtil.ts","./SoundModel.ts","./VibrateManager.ts","./platform-const.ts","./env","./GameUIConfig.ts","./Common.ts"],(function(n){var e,t,o,r,i,a,s,c,u,l,f,d,p,h,g,m,y,w,v,B,L,b,P,S,E,G,C;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized,i=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){s=n.cclegacy,c=n._decorator,u=n.ProgressBar,l=n.assetManager,f=n.Button},function(n){d=n.BaseComp},function(n){p=n.initPlatform,h=n.platform},function(n){g=n.userModel},function(n){m=n.platformModel},function(n){y=n.GameApp},function(n){w=n.Bundle,v=n.Sound,B=n.EventName},function(n){L=n.ViewUtil},function(n){b=n.SoundModel},function(n){P=n.VibrateManager},function(n){S=n.VibrateType},function(n){E=n.DEBUG},function(n){G=n.ViewName},function(n){C=n.common}],execute:function(){var M,D,A,T,_;s._RF.push({},"5e42dGqB5lG/ZrE8LdwQutT","LoadingLayer",void 0);var k=c.ccclass,x=c.property;n("LoadingLayer",(M=k("HomeLayer"),D=x(u),M((_=e((T=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=n.call.apply(n,[this].concat(i))||this,o(e,"loadingBar",_,r(e)),e}t(e,n);var s=e.prototype;return s.start=function(){var n=i(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.on(B.LOADING_CLOSE,this.loadComplete.bind(this)),this.autoPlayProgressBar(),n.next=4,this.initBundle();case 4:this.initProject(),this.setGameView(),this.AddButtonSound(),this.removeLog(),y.Layer.root.getChildByName("loading_bg").destroy();case 9:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.autoPlayProgressBar=function(){var n=this;this.loadingBar.progress=0,this.schedule((function(){n.loadingBar.progress<.95&&(n.loadingBar.progress+=.015)}),.01)},s.loadComplete=function(){var n=i(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("loading加载完成！"),this.loadingBar.progress=1,n.next=4,C.sleep(100);case 4:y.Layer.replaceAsync(G.LoadingView,G.HomeLayer);case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.initProject=function(){try{p(),h.initSDK(),g.load(),m.initTGA()}catch(n){this.onErrShowDiaolog(n)}},s.setGameView=function(){var n=this;y.game.setGameViewBundle(w.GAME,!0).then((function(e){L.createPrefabNodeAsync("prefab/game_bg",w.GAME,!0).then((function(t){e.addChild(t),n.loadComplete()})),h.trackEvent("init_game",{remark:"游戏初始化成功"})})).catch((function(e){n.onErrShowDiaolog(e)}))},s.initBundle=function(){var n=this,e=Date.now();return new Promise((function(t,o){Promise.all([n.initRemote(),n.initScripts()]).then((function(){var n=Date.now();console.log("init bundle success:",n-e,"ms"),t(null)})).catch(i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("init bundle error:",t),console.error("enterGame:加载游戏场景出现问题，请退出重试"),console.error(t),n.onErrShowDiaolog(t);case 4:case"end":return e.stop()}}),e)}))))}))},s.initRemote=function(){return new Promise((function(n,e){l.loadBundle(w.REMOTE,(function(t,o){if(t)return console.log("err:",t),void e();n(null)}))}))},s.initScripts=function(){return new Promise((function(n,e){l.loadBundle("scripts_bundle",(function(t,o){if(t)return console.log("err:",t),void e();n(null)}))}))},s.AddButtonSound=function(){f.prototype.touchBeganClone=f.prototype._onTouchEnded,f.prototype._onTouchEnded=i(a().mark((function n(e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.interactable&&this.enabledInHierarchy&&this.isSound&&(b.getInstance().audioPlay(v.clickButton),P.getInstance().play(S.SHORT)),this.touchBeganClone(e);case 2:case"end":return n.stop()}}),n,this)}))),f.prototype.isSound=!0},s.removeLog=function(){y.config.game.isTest||E||(console.log=function(){})},s.onErrShowDiaolog=function(){var n=i(a().mark((function n(e){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.showModal({title:"友情提示",content:"加载游戏场景出现问题，请退出重试",confirmText:"确定",showCancel:!1});case 2:t=n.sent,h.trackEvent("error",{type:"loading",message:e}),t&&h.refreshGame();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e}(d)).prototype,"loadingBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=T))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/LogManager.ts",["cc"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy,e=t.log}],execute:function(){n._RF.push({},"10d8a3iydBN5pnbCySAmfSu","LogManager",void 0);var i=t("LogType",function(t){return t[t.Net=1]="Net",t[t.Model=2]="Model",t[t.Business=4]="Business",t[t.View=8]="View",t[t.Config=16]="Config",t[t.Trace=32]="Trace",t}({})),o={1:"网络日志",2:"数据日志",4:"业务日志",8:"视图日志",16:"配置日志",32:"标准日志"};t("LogManager",function(){function t(){this.tags=0,this.tags=i.Net|i.Model|i.Business|i.View|i.Config|i.Trace}var n=t.prototype;return n.setTags=function(t){void 0===t&&(t=null),t&&(this.tags=t)},n.start=function(t){void 0===t&&(t="Time"),console.time(t)},n.end=function(t){void 0===t&&(t="Time"),console.timeEnd(t)},n.table=function(t,n){this.isOpen(i.Trace)&&console.table(t)},n.trace=function(t,n){(void 0===n&&(n="color:#ffffff;"),this.isOpen(i.Trace))&&(console.log||e).call(null,"%c%s%s",n,this.getDateString(),t)},n.logNet=function(t,n){this.orange(i.Net,t,n)},n.logModel=function(t,n){this.violet(i.Model,t,n)},n.logBusiness=function(t,n){this.blue(i.Business,t,n)},n.logView=function(t,n){this.green(i.View,t,n)},n.logConfig=function(t,n){this.gray(i.Config,t,n)},n.orange=function(t,n,e){this.print(t,n,"color:#ee7700;",e)},n.violet=function(t,n,e){this.print(t,n,"color:Violet;",e)},n.blue=function(t,n,e){this.print(t,n,"color:#3a5fcd;",e)},n.green=function(t,n,e){this.print(t,n,"color:green;",e)},n.gray=function(t,n,e){this.print(t,n,"color:gray;",e)},n.isOpen=function(t){return 0!=(this.tags&t)},n.print=function(t,n,i,s){if(this.isOpen(t)){var r=console.log||e,c=o[t];s?r.call(null,"%c%s%s%s:%s%o",i,this.getDateString(),"["+c+"]",this.stack(5),s,n):r.call(null,"%c%s%s%s:%o",i,this.getDateString(),"["+c+"]",this.stack(5),n)}},n.stack=function(t){var n=(new Error).stack.split("\n"),e=[];n.forEach((function(t){var n,i=(t=t.substring(7)).split(" ");i.length<2?e.push(i[0]):e.push(((n={})[i[0]]=i[1],n))}));var i,o=[],s=[];if(t<e.length-1)for(var r in e[t]){if(2==(s=r.split(".")).length)o=s.concat();else{var c=(i=e[t][r]).lastIndexOf("/"),l=i.lastIndexOf(".");if(c>-1&&l>-1){var g=i.substring(c+1,l);o.push(g)}else o.push(i)}}return 1==o.length?"["+o[0]+".ts]":2==o.length?"["+o[0]+".ts->"+o[1]+"]":""},n.getDateString=function(){var t=new Date,n=t.getHours().toString(),e="";return e+=(1==n.length?"0"+n:n)+":",e+=(1==(n=t.getMinutes().toString()).length?"0"+n:n)+":",e+=(1==(n=t.getSeconds().toString()).length?"0"+n:n)+":",1==(n=t.getMilliseconds().toString()).length&&(n="00"+n),2==n.length&&(n="0"+n),e="["+(e+=n)+"]"},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./platform.ts","./bytedance.ts","./platform-const.ts","./platform2.ts","./tdanalytics.mg.cocoscreator.min.mjs_cjs=&original=.js","./web.ts","./wechat.ts","./animationEvent.ts","./video-button.ts","./Config.ts","./GameConfig2.ts","./GameUIConfig.ts","./seeg.mjs_cjs=&original=.js","./main.ts","./VibrateManager.ts","./GameMapModel.ts","./GameModel.ts","./PlatformModel.ts","./SoundModel.ts","./UserModel.ts","./AnimationUtil.ts","./Common.ts","./NodeUtil.ts","./NumberUtil.ts","./ObjectUtil.ts","./TimeUtil.ts","./Vec3Util.ts","./LoadingLayer.ts","./GameApp.ts","./Root.ts","./GUI.ts","./LanguageLabel.ts","./BaseComp.ts","./GroupRender.ts","./node.jsb.ts","./ui-renderer.ts","./ui-transform.ts","./ui.ts","./sorting-define.ts","./sorting-group.ts","./DelegateComponent.ts","./LayerDialog.ts","./LayerNotify.ts","./LayerPopUp.ts","./LayerUI.ts","./CommonPrompt.ts","./LoadingIndicator.ts","./Notify.ts","./EventConfig.ts","./main2.ts","./AssetsManager.ts","./EventManager.ts","./GameManager.ts","./LayerManager.ts","./LogManager.ts","./StorageManager.ts","./TimerManager.ts","./AudioEffect.ts","./AudioManager.ts","./AudioMusic.ts","./Config2.ts","./GameConfig.ts","./GameQueryConfig.ts","./EncryptUtil.ts","./StringUtil.ts","./ViewUtil.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Root.ts","./GameApp.ts","./GameUIConfig.ts"],(function(n){var t,e,o,i,r,a,c,u,s,p,f;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){i=n.cclegacy,r=n._decorator,a=n.macro,c=n.DynamicAtlasManager},function(n){u=n.Root},function(n){s=n.GameApp},function(n){p=n.UIConfigData,f=n.ViewName}],execute:function(){var l;i._RF.push({},"437ccroJ+lFwL2L2uLebwQX","main",void 0);var h=r.ccclass;r.property;a.CLEANUP_IMAGE_CACHE=!1,c.instance.enabled=!0;n("main",h("main")(l=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var r=i.prototype;return r.onLoad=function(){var t=this;this.scheduleOnce((function(){n.prototype.onLoad.call(t)}))},r.initGui=function(){console.log("初始化游戏界面"),s.Layer.init(p)},r.run=function(){var n=e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.onShowView();case 2:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.onShowView=function(){s.Layer.open(f.LoadingView)},i}(u))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/main2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Root.ts"],(function(t){var n,o,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){r=t.Root}],execute:function(){var e;o._RF.push({},"f1910nBib9Ivbkjg7vCuWkZ","main",void 0);var c=i.ccclass;i.property,t("main",c("main")(e=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.start=function(){this.onShowView()},i.onShowView=function(){},o}(r))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/node.jsb.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e5b76FVBYpBe5e1LMUQq7xS","node.jsb",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/NodeUtil.ts",["cc"],(function(n){var e,t,i,o,r,a,c,l;return{setters:[function(n){e=n.cclegacy,t=n.RigidBody,i=n.Vec3,o=n.CylinderCollider,r=n.PhysicMaterial,a=n.EventTouch,c=n.Button,l=n.Node}],execute:function(){e._RF.push({},"608efsuELtFnYQrITwBSsJz","NodeUtil",void 0);n("node_util",new(function(){function n(){}var e=n.prototype;return e.onCloseRigidBody=function(n){var e=n.getComponent(t);e&&(n.activeInHierarchy&&e.setLinearVelocity(new i(0,0,0)),e.enabled=!1);var r=n.getComponent(o);r&&(r.enabled=!1)},e.onCloseRigidBodyNoVelocity=function(n){var e=n.getComponent(t);e&&(e.enabled=!1);var i=n.getComponent(o);i&&(i.isTrigger=!0)},e.onRemovePhysics=function(n){n&&(n.removeComponent(t),n.removeComponent(o))},e.onOpenRigidBody=function(n,e,i,a,c){n.getComponent(t).enabled=!0;var l=n.getComponent(o);l.enabled=!0;var u=new r;u.friction=e,u.restitution=i,u.rollingFriction=a,u.spinningFriction=c,l.material=u},e.setPhysicMaterial=function(n,e,t,i,a){var c=n.getComponent(o),l=new r;l.friction=e,l.restitution=t,l.rollingFriction=i,l.spinningFriction=a,c.material=l},e.removeAllChildrenToArray=function(n,e){for(;n.children.length>0;){var t=n.children[0];e.push(t),n.removeChild(t)}},e.findNodeByName=function(n,e){if(n.name===e)return n;for(var t=n.children,i=0;i<t.length;i++){var o=t[i],r=this.findNodeByName(o,e);if(r)return r}return null},e.tempDisableButton=function(n,e){var t=this;if(void 0===e&&(e=0),null!=n){n instanceof a&&(n=n.target);var i=null;if(n instanceof c?i=n:n instanceof l&&(i=n.getComponent(c)),null!=i){var o=function(){t.disableBtn(i,!0)};return this.disableBtn(i,!1),i.scheduleOnce(o,e),function(){o(),i.unschedule(o)}}}},e.disableBtn=function(n,e){var t;n instanceof c?t=n:n instanceof l&&(t=n.getComponent(c)),t&&(t.interactable=e)},n}()));e._RF.pop()}}}));

System.register("chunks:///_virtual/Notify.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageLabel.ts","./BaseComp.ts"],(function(t){var n,e,i,o,a,r,s,c,l,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Label,c=t.Sprite,l=t.Animation},function(t){u=t.LanguageLabel},function(t){p=t.BaseComp}],execute:function(){var f,h,b,d,m,y,v,_,g;a._RF.push({},"01391Mp6X1Gn554rkzavN4K","Notify",void 0);var L=r.ccclass,F=r.property;t("Notify",(f=L("Notify"),h=F(s),b=F(c),d=F(l),f((v=n((y=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,i(n,"lab_content",v,o(n)),i(n,"sprite_content",_,o(n)),i(n,"animation",g,o(n)),n.onComplete=null,n}e(n,t);var a=n.prototype;return a.onLoad=function(){this.animation&&this.animation.on(l.EventType.FINISHED,this.onFinished,this)},a.onFinished=function(){this.node.destroy(),this.onComplete&&this.onComplete()},a.toast=function(t,n){this.lab_content.node.active=!0,this.sprite_content.node.active=!1;var e=this.lab_content.getComponent(u);n?(e.enabled=!0,e.dataID=t):(e.enabled=!1,this.lab_content.string=t)},a.toastSprite=function(t,n){var e=this;this.lab_content.node.active=!1,this.sprite_content.node.active=!0,this.loadSpriteFrame("/texture/toast/"+t,"remote").then((function(t){e.sprite_content.spriteFrame=t}))},n}(p)).prototype,"lab_content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(y.prototype,"sprite_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(y.prototype,"animation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/NumberUtil.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"2e415//CgFCmaz6jZnBCN0m","NumberUtil",void 0);t("number_util",new(function(){function t(){}var n=t.prototype;return n.keepTwoDecimal=function(t,n){return void 0===n&&(n=2),parseFloat(t.toFixed(n))},n.randomNum=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},n.shuffle=function(t){for(var n=t.slice(),e=n.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),o=[n[r],n[e]];n[e]=o[0],n[r]=o[1]}return n},n.fillNum=function(t,n,e){for(t=t.toString();t.length<n;)t="0"+t;return e&&t.length>n&&(t=t.slice(t.length-n,t.length)),t},t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtil.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"4304ciYA9JAxLFkOGJP56CK","ObjectUtil",void 0);var r=t("ObjectUtil",function(){function t(){}return t.prototype.deepCopy=function(t){if("object"!=typeof t)return t;var e=Array.isArray(t)?[]:{};for(var r in t)t.hasOwnProperty(r)&&("object"==typeof t[r]?e[r]=this.deepCopy(t[r]):e[r]=t[r]);return e},t}());t("objectUtil",new r);e._RF.pop()}}}));

System.register("chunks:///_virtual/platform-const.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9c6b97pPwFIALBnNsbIGdMT","platform-const",void 0);e("PlatformCode",{QQ:"qq",Wechat:"wechat",Bytedance:"DY",Web:"H5",Vivo:"vivo"}),e("LogTag","[Platform]"),e("VideoCoolTime",6e4),e("AdEvent",function(e){return e[e.VIDEO=0]="VIDEO",e[e.VIDEO_END=1]="VIDEO_END",e[e.VIDEO_SUC=2]="VIDEO_SUC",e[e.SHARE=3]="SHARE",e[e.SHARE_END=4]="SHARE_END",e[e.SHARE_SUC=5]="SHARE_SUC",e}({})),e("VideoUnitType",function(e){return e[e.SHORT=15]="SHORT",e[e.MEDIUM=30]="MEDIUM",e[e.LONG=60]="LONG",e[e.RANDOM=6]="RANDOM",e}({})),e("VideoUnit",{15:"",30:"",60:"",6:"adunit-1f1ce0df81785ac3"}),e("VideoFailCode",function(e){return e[e.NO_AD=0]="NO_AD",e[e.IS_AUDIT=1]="IS_AUDIT",e[e.LOW_SDK_VERSION=2]="LOW_SDK_VERSION",e[e.CANCELED=3]="CANCELED",e}({})),e("VibrateType",function(e){return e[e.SHORT=0]="SHORT",e[e.LONG=1]="LONG",e}({})),e("DefaultSystemInfo",{SDKVersion:"1.0.0",brand:"devtools",pixelRatio:2,model:"iPhone",platform:"devtools",screenHeight:568,screenWidth:325,statusBarHeight:20,system:"iOS 10.0.1",version:"6.6.3",windowHeight:667,windowWidth:375}),e("TgaConfig",{appId:"66cfecdc029e4e5c99b05506591636c1",serverUrl:"https://receiver-ta.kampfiregames.cn",autoTrack:{appShow:!0,appHide:!0}});t._RF.pop()}}}));

System.register("chunks:///_virtual/platform.ts",["cc","./wechat.ts","./web.ts","./bytedance.ts"],(function(t){var o,n,a,e,f;return{setters:[function(t){o=t.cclegacy,n=t.sys},function(t){a=t.WeChatPlatform},function(t){e=t.WebPlatform},function(t){f=t.ByteDancePlatform}],execute:function(){t({initPlatform:function(){n.platform===n.Platform.WECHAT_GAME?t("platform",new a):n.platform===n.Platform.BYTEDANCE_MINI_GAME?t("platform",new f):t("platform",new e)},platform:void 0}),o._RF.push({},"3c903ZRYDFDNYSVClPZ/ICb","platform",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/platform2.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"9a492EAd45J26YHGPpP67mV","platform",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatformModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./platform.ts","./GameApp.ts","./UserModel.ts","./GameModel.ts","./ObjectUtil.ts"],(function(t){var a,s,e,n,i,r,o;return{setters:[function(t){a=t.extends},function(t){s=t.cclegacy},function(t){e=t.platform},function(t){n=t.GameApp},function(t){i=t.userModel},function(t){r=t.game_model},function(t){o=t.objectUtil}],execute:function(){s._RF.push({},"227854ZMQtEIbajZuiGPxNS","PlatformModel",void 0);var l="game_player_data",h="game_player_data_pass",u=t("PlatformModel",function(){function t(){this.shareData=null,this.pass_list=[],this.pass_data=null,this.launchOption={scene:0,query:{},source_appid:""}}var s=t.prototype;return s.init=function(){},s.initTGA=function(){var t=n.storage.getJson(l);t||(t={register_time_date:new Date,register_ver:n.config.game.version,register_platform:e.string(),register_channel:this.getLaunchParam("channel",""),register_scene:this.getLaunchParam("scene",0),game:n.config.game.projectName},console.log("initTGA2:",t),e.trackUserSetOnce(t),n.storage.set(l,t),e.trackEvent("register",{ver:n.config.game.version,channel:this.getLaunchParam("channel",""),scene:this.getLaunchParam("scene",0),platform:e.string()}));e.trackEvent("login",{step:"end"}),e.trackUserSet({device_model:e.getSystemData().model,ver:n.config.game.version,platform:e.string(),maxLevel:i.game_pass-1});var a=n.storage.getJson(h);a?this.pass_list=a:(this.pass_list=[],this.pass_list.push(-1),n.storage.set(h,this.pass_list))},s.getLaunchParam=function(t,a){if(null==this.launchOption)return a;var s=this.launchOption[t];return null!=s?s:null!=this.launchOption.query&&null!=this.launchOption.query[t]?s=this.launchOption.query[t]:a},s.syncLaunchOption=function(t){console.log("<<<< syncLaunchOption:",t),this.launchOption.query={},this.launchOption=a({},this.launchOption,t)},s.randomShareInfo=function(t){if(null==this.shareData)return p;var a=this.shareData[t];return null==a||null==a.length||a.length<=0?p:a[Math.floor(100*Math.random())%a.length]},s.addPass=function(){this.pass_list[i.game_pass]||(this.pass_list[i.game_pass]=0),this.pass_list[i.game_pass]++,n.storage.set(h,this.pass_list),e.trackEvent("startMainLevel",{level:i.game_pass,cnt:this.pass_list[i.game_pass]})},s.resetPass=function(){this.pass_data?(this.pass_data.useTime=Date.now(),this.pass_data.videoNum=0,this.pass_data.remainShoot=0,this.pass_data.useRemoveCnt=0,this.pass_data.useTailorCnt=0,this.pass_data.reviveCnt=0,this.pass_data.remainCoinCnt=0,this.pass_data.targetCoinCnt=0,this.pass_data.magneticCnt=0,this.pass_data.removeBottom=0,this.pass_data.replay++):this.pass_data={level:i.game_pass,videoNum:0,useTime:Date.now(),remainShoot:0,useRemoveCnt:0,useTailorCnt:0,reviveCnt:0,replay:0,remainCoinCnt:0,targetCoinCnt:0,magneticCnt:0,removeBottom:0}},s.addPassData=function(t){for(var a in t)this.pass_data.hasOwnProperty(a)&&(this.pass_data[a]+=t[a])},s.finishPass=function(t,a,s){void 0===t&&(t=1);var n=o.deepCopy(this.pass_data);n.useTime=this.getPassTime(),n.remainShoot=a,n.remainCoinCnt=r.getPostionList().filter((function(t){return t.isFixed})).length,n.targetCoinCnt=s;var i="";1==t?i="finishMainLevel":2==t?i="resetMainLevel":3==t&&(i="failMainLevel"),e.trackEvent(i,n),1==t&&(this.pass_data=null)},s.getPassTime=function(){return this.pass_data&&this.pass_data.useTime?Date.now()-this.pass_data.useTime:0},t}()),p=t("DefaultShare",{ID:1,type:"default",url:"share_002.jpg",text:"我猜这游戏智商没有180玩不来！"});t("platformModel",new u);s._RF.pop()}}}));

System.register("chunks:///_virtual/Root.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./GameQueryConfig.ts","./GameConfig.ts","./AudioManager.ts","./TimerManager.ts","./LayerManager.ts","./GUI.ts","./EventConfig.ts","./GameManager.ts"],(function(e){var t,n,i,o,a,r,s,u,c,f,l,g,m,p,d,h,y,v,E,R,G,M,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node,u=e.JsonAsset,c=e.sys,f=e.game,l=e.director,g=e.Game,m=e.screen,p=e.Component},function(e){d=e.GameApp},function(e){h=e.GameQueryConfig},function(e){y=e.GameConfig},function(e){v=e.AudioManager},function(e){E=e.TimerManager},function(e){R=e.LayerManager},function(e){G=e.GUI},function(e){M=e.EventMessage},function(e){A=e.GameManager}],execute:function(){var N,S,w,_,I;a._RF.push({},"d9ee1z4TSZO7aYeohj+etpH","Root",void 0);var b=r.property,C=!1;e("Root",(N=b({type:s,tooltip:"游戏层"}),S=b({type:s,tooltip:"界面层"}),_=t((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"game",_,o(t)),i(t,"gui",I,o(t)),t.persistRootNode=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;if(!C){C=!0,d.init(),this.enabled=!1;var t="config";d.res.load(t,u,(function(){var n=d.res.get(t);d.config.query=new h,d.config.game=new y(n),d.storage.init(d.config.game.localDataKey,d.config.game.localDataIv),c.os===c.OS.IOS?(console.log("ios设备"),f.frameRate=d.config.game.frameRateIOS):(console.log("os:",c.os),f.frameRate=d.config.game.frameRate),e.enabled=!0,e.init(),e.run()}))}},a.initGui=function(){},a.initEcsSystem=function(){},a.run=function(){},a.init=function(){this.persistRootNode=new s("PersistRootNode"),l.addPersistRootNode(this.persistRootNode),d.audio=this.persistRootNode.addComponent(v),d.audio.load(),d.timer=this.persistRootNode.addComponent(E),d.game=new A(this.game),d.Layer=new R(this.gui),this.initGui(),this.initEcsSystem(),f.on(g.EVENT_SHOW,this.onShow,this),f.on(g.EVENT_HIDE,this.onHide,this);var e=this.gui.addComponent(G);0==c.isMobile&&(m.on("window-resize",(function(){e.resize(),d.event.emit(M.GAME_RESIZE)}),this),m.on("fullscreen-change",(function(){d.event.emit(M.GAME_FULL_SCREEN)}),this)),m.on("orientation-change",(function(){d.event.emit(M.GAME_ORIENTATION)}),this)},a.onShow=function(){d.timer.load(),d.audio.resumeAll(),l.resume(),f.resume(),d.event.emit(M.GAME_SHOW)},a.onHide=function(){d.timer.save(),d.audio.pauseAll(),l.pause(),f.pause(),d.event.emit(M.GAME_HIDE)},t}(p)).prototype,"game",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"gui",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w));a._RF.pop()}}}));

System.register("chunks:///_virtual/seeg.js",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var o=e("__cjsMetaURL",t.meta.url);n.define(o,(function(t,n,o,r,i){var a,s;a={629:function(){!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof GameGlobal?GameGlobal:{};"undefined"==typeof window&&(e.window=e),window.zs=window.zs||{};var t=void 0!==window.ks?window.ks:void 0!==window.tt?window.tt:void 0!==window.wx?window.wx:null,n=void 0!==window.ks?"ks":void 0!==window.tt?"tt":void 0!==window.wx?"wx":"web";if(zs.pf=n,!t)return zs.login=function(e){var t,n=function(){var t,n;null==e||null===(t=e.fail)||void 0===t||t.call(e,{errCode:-1,errMsg:"平台不支持"}),null==e||null===(n=e.complete)||void 0===n||n.call(e)};(t=[{name:"device",keyPath:"name"}],new Promise((function(e,n){if(window.indexedDB){var o=window.indexedDB.open("zs_sdk",2);o.onerror=function(e){n&&n({errCode:-1,errMsg:"登录失败"})},o.onsuccess=function(t){var n=t.target.result;e(n)},o.onupgradeneeded=function(e){var n=e.target.result;t.forEach((function(e){n.objectStoreNames.contains(e.name)||(e.keyPath?n.createObjectStore(e.name,{keyPath:e.keyPath}):n.createObjectStore(e.name,{autoIncrement:!0}))}))}}else n&&n({errCode:-1,errMsg:"平台不支持"})}))).then((function(t){(function(e,t,n,o){return new Promise((function(n,o){e.transaction(t).objectStore(t).openCursor().onsuccess=function(e){var t=e.target.result;t?("uuid"===t.key&&n(t.value),t.continue()):n(null)}}))})(t,"device").then((function(n){var o,r,i;null==n?(i="web_"+Math.random().toString(36).substring(2),function(e,t,n){new Promise((function(o,r){var i=e.transaction([t],"readwrite").objectStore(t).put(n);i.onsuccess=function(e){},i.onerror=function(e){}}))}(t,"device",{name:"uuid",value:i})):i=n.value,null==e||null===(o=e.success)||void 0===o||o.call(e,{pf:"zs",code:i}),null==e||null===(r=e.complete)||void 0===r||r.call(e)})).catch((function(){n()}))})).catch((function(){n()}))},zs.request=function(e){if(null!=e){var t=!0,n=e.url;if(null!=n&&""!==n){var o,r=e.responseType||"text",i=e.dataType||"json",a=e.timeout||6e4,s=new XMLHttpRequest,c=e.method||"GET",u=null;if(e.data&&"string"!=typeof e.data?"GET"===c||"application/x-www-form-urlencoded"===(null===(o=e.header)||void 0===o?void 0:o["content-type"])?(u=function(e){var t="";for(var n in e)t+="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n]),"&");return t.slice(0,t.length-1)}(e.data),"GET"===c&&(n+=u)):u=JSON.stringify(e.data):u=e.data,s.onreadystatechange=function(){if(4==s.readyState){if(s.status>=200&&s.status<400){var t,n,o=null;if(o="arraybuffer"===r?s.response:s.responseText,"json"===i)try{o=JSON.parse(o)}catch(e){return void f(-1,"服务器数据解析失败")}return null===(t=e.success)||void 0===t||t.call(e,{data:o,statusCode:s.status,header:s.getAllResponseHeaders()}),void(null===(n=e.complete)||void 0===n||n.call(e))}f(s.status,"网络请求失败")}},s.onerror=function(e){f(-1,"网络请求错误")},s.ontimeout=function(){f(-1,"网络请求超时")},s.timeout=a,s.responseType=r,s.open(c,n,!0),e.header)for(var l in e.header)s.setRequestHeader(l,e.header[l]);return"POST"===c&&null!=u?s.send(u):s.send(),s}f(-1,"网络请求地址为空")}function f(n,o){var r,i;t&&(t=!1,null===(r=e.fail)||void 0===r||r.call(e,{errCode:n,errMsg:o}),null===(i=e.complete)||void 0===i||i.call(e))}},zs.getLaunchOptionsSync=function(){return{}},zs.getSystemInfoSync=function(){return{}},zs.getSystemInfo=function(e){var t,n;null==e||null===(t=e.success)||void 0===t||t.call(e,{}),null==e||null===(n=e.complete)||void 0===n||n.call(e,{})},zs.setStorageSync=localStorage.setItem,zs.getStorage=function(e){var t,n,o=localStorage.getItem(e.key);null==e||null===(t=e.success)||void 0===t||t.call(e,o),null==e||null===(n=e.complete)||void 0===n||n.call(e)},zs.getStorageSync=localStorage.getItem,zs.removeStorageSync=localStorage.removeItem,zs.getStorageInfoSync=function(){return null},zs.getNetworkType=function(e){var t,n;null==e||null===(t=e.success)||void 0===t||t.call(e,{networkType:"unknown"}),null==e||null===(n=e.complete)||void 0===n||n.call(e,{networkType:"unknown"})},zs.onShow=function(){},zs.onHide=function(){},void(zs.getAccountInfoSync=function(){return{miniProgram:{envVersion:"develop",version:"1.0.0"}}});if(zs.login=function(e){t.login({success:function(o){var r;"ks"===n&&e.old?t.getUserInfo({success:function(t){var n;null!=t&&t.unionID?e.success({pf:"ks",is_old:0,unionID:t.unionID}):null===(n=e.fail)||void 0===n||n.call(e,{errCode:-1,errMsg:"不支持"})},fail:e.fail,complete:e.complete}):(o.pf=n,"ks"===n&&(o.is_old=1),null===(r=e.success)||void 0===r||r.call(e,o))},fail:function(t){var n,o;null===(n=e.fail)||void 0===n||n.call(e,t),null===(o=e.complete)||void 0===o||o.call(e)},complete:e.complete})},zs.request=t.request,zs.getLaunchOptionsSync=function(){var e=t.getLaunchOptionsSync();return"ks"===n&&(e.scene=e.from),e},zs.getSystemInfoSync=t.getSystemInfoSync,zs.getSystemInfo=t.getSystemInfo,zs.setStorageSync=t.setStorageSync,zs.getStorage=t.getStorage,zs.getStorageSync=t.getStorageSync,zs.removeStorageSync=t.removeStorageSync,zs.getStorageInfoSync=t.getStorageInfoSync,zs.getNetworkType=t.getNetworkType,zs.onShow=t.onShow,zs.onHide=t.onHide,"tt"===n){var o=null;zs.getAccountInfoSync=function(){if(o)return{miniProgram:o};o={};var e=zs.getLaunchOptionsSync();if(e&&e.extra&&(o.version=e.extra.mpVersion,o.appId=e.extra.appId),tt.getEnvInfoSync){var t=tt.getEnvInfoSync().microapp.envType;o.envVersion="production"===t?"release":"development"===t?"trial":"preview"===t?"develop":t}return{miniProgram:o}}}else zs.getAccountInfoSync=t.getAccountInfoSync}()},572:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpManager=void 0;var n=function(){function e(){this.config={timeout:5e3}}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.request=function(e){var t=this;if(!e.success)return new Promise((function(n,o){t._dealRequest(e,n,o)}));this._dealRequest(e,e.success,e.fail,e.complete)},e.prototype._dealRequest=function(e,t,n,o,r){var i=this;void 0===r&&(r=0),zs.request({url:e.url,data:JSON.stringify(e.data),header:e.header,method:e.method||"POST",timeout:e.timeout||this.config.timeout,success:function(e){null==t||t(e.data)},fail:function(a){r<(e.retryTimes||0)?i._dealRequest(e,t,n,o,r+1):(a.errCode=a.errCode||a.errno,null==n||n(a))},complete:function(){r>=(e.retryTimes||0)&&(null==o||o())}})},e._instance=null,e}();t.HttpManager=n},397:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ZSHttp=void 0;var i,a=n(652),s=n(997),c=n(49),u=n(572);!function(e){e.LOGIN="game/login",e.CONFIG="game/config",e.USER_INFO_UPDATE="/game/batchEdit",e.USER_DATA_UPDATE="game/batchUpdate",e.USER_DATA_INFO="game/download",e.VIDEO="game/video",e.DY_REPORT="attribution/dyReport",e.DY_ZT="attribution/ztReport",e.KS_REPORT="attribution/allReport",e.KS_ZT="attribution/ksZtReport",e.USER_PROVINCE="rank/province/data",e.USER_PROVINCE_RANK="rank/province/list",e.USER_PROVINCE_RANK_CHANGE="rank/province/edit",e.USER_RANK="rank/generalList",e.USER_RANK_CHANGE="rank/generalEdit"}(i||(i={}));var l=function(){function e(){this._loginInfo=null,this._reportData={data:{},callback:[]},this._canSave=!1}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.req=function(e,t,n){var i,s,l=this;void 0===t&&(t=null);var f={};(null===(i=this._loginInfo)||void 0===i?void 0:i.version)?(f.v=this._loginInfo.version,f.version=this._loginInfo.version):(f.v=zs.gameConfig.v,f.version=zs.gameConfig.v),f.reqId=Date.now()+"_"+Math.ceil(1e3*Math.random()),f.gid=zs.gameConfig.gid,Object.assign(f,t||{});var d="".concat(zs.gameConfig.debug?"https://test-gameapi2.zxmn2018.com/":"https://gamesapi2.aslk2018.com/","v2/").concat(e),g={"content-type":"application/json"};return(null===(s=this._loginInfo)||void 0===s?void 0:s.token)&&(g.authorization=this._loginInfo.token),new Promise((function(t,i){return o(l,void 0,void 0,(function(){var o,s;return r(this,(function(r){switch(r.label){case 0:return o={url:d,header:g,data:f},n&&Object.assign(o,n),[4,u.HttpManager.instance.request(o).catch((function(t){a.Logger.log("网络请求错误, router=",e,"params=",f,"errCode=",t.errCode,"errMsg=",t.errMsg),i(t)}))];case 1:if(s=r.sent()){if(s.timestamp&&c.TimeUtil.updateServerTime(1e3*s.timestamp),1===s.code)return a.Logger.log("网络请求成功, route=",e,"params=",f,"data=",s.data),t(s.data),[2];if(4006===s.code||4007===s.code)return a.Logger.log("您的登录已过期或在其它地点登录"),[2];a.Logger.log("网络请求错误, router=",e,"params=",f,"errCode=",s.code,"errMsg=",s.msg),i({errCode:s.code,errMsg:s.msg})}return[2]}}))}))}))},e.prototype.login=function(e){return o(this,void 0,void 0,(function(){var t,n,o,a,c;return r(this,(function(r){switch(r.label){case 0:return t=null,s.StringUtil.isEmpty(zs.gameConfig.gid)?[2,Promise.reject({errCode:-1,errMsg:"没有填写gid"})]:(n=e.code,e.account,e.password,o=null,n?(o={pf:"zs",code:n},[3,3]):[3,1]);case 1:return[4,this.zsLogin()];case 2:o=r.sent(),"ks"===zs.pf&&(o.openid=o.unionID),r.label=3;case 3:o||(o={}),o.gid=zs.gameConfig.gid,o.scene=null===(c=zs.getLaunchOptionsSync())||void 0===c?void 0:c.scene,r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this.req(i.LOGIN,o)];case 5:return t=r.sent(),[3,7];case 6:return a=r.sent(),console.error("登录错误",a),[2,Promise.reject(a)];case 7:return this._loginInfo=t,"0"!=zs.gameConfig.v.split(".")[1]&&(this._loginInfo.version=zs.gameConfig.v),[2,this._loginInfo]}}))}))},e.prototype.getGameConfig=function(){return this.req(i.CONFIG,{type:"json"})},e.prototype.dmp=function(){var e,t=null,n=null;if("ks"===zs.pf){var o=zs.getLaunchOptionsSync().query||{},r=o.callback,a=o.ksCreativeId,c=void 0===a?"":a,u=o.advertiser_id,l=void 0===u?"":u,f=o.ksCampaignId,d=void 0===f?"":f,g=o.ksUnitId,p=void 0===g?"":g;if(s.StringUtil.isEmpty(r))return Promise.reject({errCode:-1,errMsg:"非快手投放场景，请忽略"});t=i.KS_REPORT,n={clue_token:r,creative_id:c,advertiser_id:l,ad_id:d,group_id:p,channel:"kuaishou",event_type:"1"}}else if("tt"===zs.pf){var v=zs.getLaunchOptionsSync().query||{},h=v.clickid,m=v.channel,y=void 0===m?this._loginInfo.channel||"":m,_=v.creativeid,S=(c=void 0===_?"":_,v.advertiser_id),w=(l=void 0===S?"":S,d=v.adid,v.request_id),b=void 0===w?"":w,D=v.projectid,R=(p=void 0===D?"":D,v.promotionid),z=void 0===R?"":R;if(s.StringUtil.isEmpty(h))return Promise.reject({errCode:-1,errMsg:"非抖音投放场景，请忽略"});s.StringUtil.isEmpty(d)&&(d=z),t=i.DY_REPORT,n={click_id:h,channel:y,creative_id:c,advertiser_id:l,ad_id:d,request_id:b,group_id:p,event_type:"active"}}return t?this.req(t,Object.assign({v:"1.0.0",version:"1.0.0",uid:null===(e=this._loginInfo)||void 0===e?void 0:e.user_id,os:"ios"===zs.getSystemInfoSync().platform?"1":"2"},n)):Promise.reject({errCode:-1,errMsg:"非直投渠道，请忽略"})},e.prototype.reportAd=function(e){return o(this,void 0,void 0,(function(){var t,n,o,s,c;return r(this,(function(r){switch(r.label){case 0:if(t={uid:null===(c=this._loginInfo)||void 0===c?void 0:c.user_id,v:"1.0.0",version:"1.0.0",uvid:"1",video_id:"default",video_name:"默认视频",video_type:"1",os:"ios"===zs.getSystemInfoSync().platform?"1":"2",scene:zs.getLaunchOptionsSync().scene},n=null,"ks"===zs.pf?(t.channel="kuaishou",n=i.KS_ZT):"tt"===zs.pf&&(n=i.DY_ZT),o=null,!n)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.req(n,t)];case 2:return r.sent(),[3,4];case 3:return s=r.sent(),o=s,[3,4];case 4:return e.complete&&this.req(i.VIDEO,{uvid:"1",video_id:"default",video_name:"默认视频",video_type:"3",ecpm:0,timestamp:Date.now()}).catch((function(e){a.Logger.debug("普通广告事件上报失败",e)})),o?[2,Promise.reject(o)]:[2,!0]}}))}))},e.prototype.getUserData=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,i,a,s,u,l,f,d,g;return r(this,(function(r){switch(r.label){case 0:return[4,this._getUserData()];case 1:for(o in(e=r.sent())||(e={}),t={},n={},e)"base"===(i=o.split("_",1)[0])?(a=o.substring(5),t[a]=e[o]):"game"===i&&(a=o.substring(5),n[a]=e[o]);return this._canSave=!0,s=zs.getSystemInfoSync(),u=zs.getLaunchOptionsSync(),l={},e.login?l.login=e.login:l.login={},e.reg||(l.reg={version:this._loginInfo.version,device:"".concat(s.brand,"-").concat(s.model),appVersion:s.version,scene:u.scene,launchQuery:u.query,seegVersion:"1.0.7"}),Object.assign(l.login,{version:this._loginInfo.version,device:"".concat(s.brand,"-").concat(s.model),appVersion:s.version,system:s.system,scene:u.scene,launchQuery:u.query}),((f=c.TimeUtil.getDiffDayNum(1e3*((null===(g=this._loginInfo)||void 0===g?void 0:g.add_time)||0),Date.now()))<=7||14==f||30==f)&&(d="login_".concat(f),l.login[d]=(l.login[d]||0)+1),this._setUserData(l,[]),[2,{base:t,game:n}]}}))}))},e.prototype.setUserData=function(e,t,n){return o(this,void 0,void 0,(function(){var o,i,a=this;return r(this,(function(r){if(o={},e)for(i in e)o["base_"+i]=e[i];if(t)for(i in t)o["game_"+i]=t[i];if(n)for(i in n)o["report_"+i]=n[i];return[2,new Promise((function(e,t){a._setUserData(o,[function(n){null==n?e(!0):t(n)}])}))]}))}))},e.prototype.reportUserInfo=function(e,t,n){return this.req(i.USER_INFO_UPDATE,{data:{avatar:e,nickname:t}})},e.prototype.getUserProvince=function(){return this.req(i.USER_PROVINCE)},e.prototype.getProvinceList=function(e){return this.req(i.USER_PROVINCE_RANK,{type:e})},e.prototype.addProvinceData=function(e){return this.req(i.USER_PROVINCE_RANK_CHANGE,{type:e})},e.prototype.getRankList=function(e,t){return this.req(i.USER_RANK,{type:e,limit:t})},e.prototype.changeRankData=function(e,t,n,o,r,a){return this.req(i.USER_RANK_CHANGE,{type:e,value_type:t,num:n,limit:a,time_duration:o,rank_data:r})},e.prototype._getUserData=function(){return o(this,void 0,void 0,(function(){return r(this,(function(e){return[2,this.req(i.USER_DATA_INFO)]}))}))},e.prototype._setUserData=function(e,t){return o(this,void 0,void 0,(function(){var n,o,a,s,c;return r(this,(function(r){switch(r.label){case 0:if(!this._canSave)return Object.assign(this._reportData.data,e),(c=this._reportData.callback).push.apply(c,t),[2];this._canSave=!1,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.req(i.USER_DATA_UPDATE,{data:e})];case 2:for(r.sent(),s=0;s<t.length;s++)t[s]&&t[s](null);return this._canSave=!0,n=this._reportData.data,Object.keys(n).length>0&&(this._reportData.data={},(o=this._reportData.callback).length>0&&(this._reportData.callback=[]),this._setUserData(n,o)),[3,4];case 3:for(a=r.sent(),this._reportData.data=Object.assign(e,this._reportData.data),s=0;s<t.length;s++)t[s]&&t[s](a);return this._canSave=!0,[3,4];case 4:return[2]}}))}))},e.prototype.zsLogin=function(){return new Promise((function(e,t){zs.login({old:zs.gameConfig.old,success:function(t){e(t)},fail:function(e){t(e)}})}))},e._instance=null,e}();t.ZSHttp=l},862:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(397),a=n(652),s=n(997),c=n(49);n(629),function(){var e=this,t=!1,n=!1,u=!0,l=[],f=[],d=0,g=0,p=null,v=null,h=null,m=window.seeg=window.seeg||{};m.init=function(e){if(!t){if(null==e)throw"参数不能为空";e.loggerLevel&&a.Logger.setLoggerLevel(e.loggerLevel),s.StringUtil.isEmpty(e.gid)?a.Logger.error("gid不能为空"):1!==e.gid.split("_").length?"web"==zs.pf||e.gid.startsWith(zs.pf)?(a.Logger.debug("SDK开始集成，版本=","1.0.7"),t=!0,zs.gameConfig=zs.gameConfig||{},zs.gameConfig.gid=e.gid,zs.gameConfig.v=e.version||"1.0.0",zs.gameConfig.old=e.old||!1,S(0)):a.Logger.error("请填写正确的gid，或者请勿在该sdk前修改ks、tt、wx等平台全局变量"):a.Logger.error("请填写正确的gid")}},m.getGameConfig=function(e){m.onLoginRet((function(){var t=e.success,n=e.fail;i.ZSHttp.instance.getGameConfig().then((function(e){null==t||t(e)})).catch((function(e){null==n||n(e)}))}))},m.onLoginRet=function(e){p?null==e||e({uid:p.uid,openid:p.openid,white:1===p.is_white_list}):l.push(e)},m.getUserData=_,m.reportAd=function(e){p?i.ZSHttp.instance.reportAd(e).then((function(){a.Logger.debug("广告上报成功")})).catch((function(e){a.Logger.error("广告上报失败",e)})):S(0,0)},m.now=c.TimeUtil.getTime,m.onEvent=function(e,t){},m.setUserData=function(e){var t=c.TimeUtil.getTime();(!d||t-d>6e4)&&(d=t,g=0),++g>6?zs.showModal({title:"一分钟内请求该接口超过6次，请注意检查逻辑"}):i.ZSHttp.instance.setUserData(null,e,null).catch((function(){}))},m.reportUserInfo=function(e,t,n){i.ZSHttp.instance.reportUserInfo(e,t,n).catch((function(){}))},m.getUserProvince=function(){return o(e,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return h?[2,h]:[4,i.ZSHttp.instance.getUserProvince().catch((function(){}))];case 1:return[2,h=e.sent()]}}))}))},m.getProvinceList=function(t){return o(e,void 0,void 0,(function(){var e,n,o,a;return r(this,(function(r){switch(r.label){case 0:return[4,i.ZSHttp.instance.getProvinceList(t).catch((function(){}))];case 1:for(a in null==(e=r.sent())&&(e={list:[]}),null==e.list&&(e.list=[]),o=function(t){e.list.find((function(e){return e.province_code==t}))||e.list.push({province:n[t],province_code:t,num:1})},n={p11:"北京",p12:"天津",p13:"河北",p14:"山西",p15:"内蒙古",p21:"辽宁",p22:"吉林",p23:"黑龙江",p31:"上海",p32:"江苏",p33:"浙江",p34:"安徽",p35:"福建",p36:"江西",p37:"山东",p41:"河南",p42:"湖北",p43:"湖南",p44:"广东",p45:"广西",p46:"海南",p50:"重庆",p51:"四川",p52:"贵州",p53:"云南",p54:"西藏",p61:"陕西",p62:"甘肃",p63:"青海",p64:"宁夏",p65:"新疆",p71:"台湾",p81:"香港",p82:"澳门"})o(a);return[2,e]}}))}))},m.addProvinceData=function(e){try{i.ZSHttp.instance.addProvinceData(e)}catch(e){}},m.getRankList=function(e,t){return void 0===t&&(t=100),i.ZSHttp.instance.getRankList(e,t).catch((function(){}))},m.changeDayRankData=function(e,t,n,o,r){void 0===o&&(o=""),void 0===r&&(r=100),y(e,t,n,0,o,r)},m.changeWeekRankData=function(e,t,n,o,r){void 0===o&&(o=""),void 0===r&&(r=100),y(e,t,n,1,o,r)},m.changeMonthRankData=function(e,t,n,o,r){void 0===o&&(o=""),void 0===r&&(r=100),y(e,t,n,2,o,r)};var y=function(e,t,n,o,r,a){void 0===r&&(r=""),void 0===a&&(a=100);var s=c.TimeUtil.getTime(),u=0===o?c.TimeUtil.getDayEndTime(s):1===o?c.TimeUtil.getWeekEndTime(s):c.TimeUtil.getMonthEndTime(s);try{i.ZSHttp.instance.changeRankData(e,t,n,Math.ceil((u-s)/1e3),r,a)}catch(e){}};function _(e){return o(this,void 0,void 0,(function(){var t,n;return r(this,(function(o){switch(o.label){case 0:if(v)return null==e||e({errCode:0,data:v}),[2];if(e&&f.push(e),u)return[2];u=!0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.ZSHttp.instance.getUserData()];case 2:return t=o.sent(),[3,4];case 3:return n=o.sent(),u=!1,f.forEach((function(e){e({errCode:(null==n?void 0:n.errCode)||-1,errMsg:"获取数据失败"})})),f.length=0,[2];case 4:return v=t.game,f.forEach((function(e){e({errCode:0,data:t.game})})),f.length=0,[2]}}))}))}function S(e){return o(this,arguments,void 0,(function(e,t){var o,s;return void 0===t&&(t=2),r(this,(function(r){switch(r.label){case 0:if(n)return a.Logger.debug("正在登录中..."),[2];n=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,i.ZSHttp.instance.login({})];case 2:return o=r.sent(),[3,4];case 3:return s=r.sent(),n=!1,e<t?(S(e+1),[2]):(a.Logger.error("用户登录失败",s),[2]);case 4:return p=o,l.forEach((function(e){null==e||e({uid:o.uid,openid:o.openid,white:o.is_white_list})})),l.length=0,u=!1,_(),i.ZSHttp.instance.dmp().then((function(){a.Logger.debug("投放用户上报成功")})).catch((function(e){a.Logger.error("投放用户上报失败",e)})),a.Logger.debug("用户登录成功"),[2]}}))}))}}()},652:function(e,t){var n,o,r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LoggerLevel=void 0,function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.DEBUG=3]="DEBUG",e[e.INFO=4]="INFO",e[e.ALL=5]="ALL"}(n||(t.LoggerLevel=n={})),function(e){var t="[Seeg SDK]",o=n.OFF;e.setLoggerLevel=function(e){o=e},e.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o===n.ALL&&console.log.apply(console,r([t],e,!0))},e.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o>=n.DEBUG&&console.debug.apply(console,r([t],e,!0))},e.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o>=n.INFO&&console.info.apply(console,r([t],e,!0))},e.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o>=n.WARN&&console.warn.apply(console,r([t],e,!0))},e.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];o>=n.ERROR&&console.error.apply(console,r([t],e,!0))}}(o||(t.Logger=o={}))},997:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=void 0,function(e){e.isEmpty=function(e){return null==e||""===e}}(n||(t.StringUtil=n={}))},49:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUtil=void 0;var n=864e5,o=function(){function e(){}return e.updateServerTime=function(e){this._diff=e-(new Date).getTime()},e.getTime=function(){return(new Date).getTime()+this._diff},e.getDayStartTime=function(e){return new Date(e).setHours(0,0,0,0)},e.getDayEndTime=function(e){return new Date(e).setHours(23,59,59,999)},e.getWeekEndTime=function(e){var t=new Date(e).getDay();return this.getDayEndTime(e)+(0===t?0:(7-t)*n)},e.getMonthEndTime=function(e){var t=new Date(e);return 11===t.getMonth()?t.setFullYear(t.getFullYear()+1,0,0):t.setMonth(t.getMonth()+1,0),t.setHours(23,59,59,999)},e.getDiffDayNum=function(e,t){var o=this.getDayStartTime(e),r=this.getDayStartTime(t);return Math.ceil(Math.abs(o-r)/n)},e._diff=0,e}();t.TimeUtil=o}},s={},function e(t){var n=s[t];if(void 0!==n)return n.exports;var o=s[t]={exports:{}};return a[t].call(o.exports,o,o.exports,e),o.exports}(862),e("default",o.exports)}),{})}}}));

System.register("chunks:///_virtual/seeg.mjs_cjs=&original=.js",["./seeg.js","./cjs-loader.mjs"],(function(e,t){var s,r;return{setters:[function(t){s=t.__cjsMetaURL;var r={};r.__cjsMetaURL=t.__cjsMetaURL,r.default=t.default,e(r)},function(e){r=e.default}],execute:function(){s||r.throwInvalidWrapper("./seeg.js",t.meta.url),r.require(s)}}}));

System.register("chunks:///_virtual/sorting-define.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"6a1f4H13klFUYlMIOMX2lFJ","sorting-define",void 0);e("SortingLayer",function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.TOPITEM=1]="TOPITEM",e[e.PLAYER=2]="PLAYER",e}({})),e("ORDER_IN_LAYER_MAX",1e5);n._RF.pop()}}}));

System.register("chunks:///_virtual/sorting-group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sorting-define.ts"],(function(r){var n,t,i,e,o,a,s,u,c,l,p,f;return{setters:[function(r){n=r.applyDecoratedDescriptor,t=r.inheritsLoose,i=r.initializerDefineProperty,e=r.assertThisInitialized},function(r){o=r.cclegacy,a=r._decorator,s=r.UITransform,u=r.Enum,c=r.CCFloat,l=r.Component},function(r){p=r.SortingLayer,f=r.ORDER_IN_LAYER_MAX}],execute:function(){var g,y,h,d,m,L,b,_,T,E;o._RF.push({},"7c5dbzCchZM75lecc9AhLkW","sorting-group",void 0);var v=a.ccclass,I=a.property,M=a.type,C=a.disallowMultiple,D=a.requireComponent,z=a.executeInEditMode;r("SortingGroup",(g=v("lcc-ui/SortingGroup"),y=D(s),h=C(!0),d=z(!0),m=M(u(p)),L=I({type:c,min:0,max:f}),g(b=y(b=h(b=d((T=n((_=function(r){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=r.call.apply(r,[this].concat(o))||this,i(n,"sortingLayer",T,e(n)),i(n,"orderInLayer",E,e(n)),n._uiTransform=null,n}t(n,r);var o=n.prototype;return o.onLoad=function(){this._uiTransform=this.getComponent(s)},o.onEnable=function(){this._uiTransform.sortingPriority=Math.sign(this.sortingLayer)*(Math.abs(this.sortingLayer)*f+this.orderInLayer),this._uiTransform.sortingEnabled=!0},o.onDisable=function(){this._uiTransform.sortingPriority=0,this._uiTransform.sortingEnabled=!1},n}(l)).prototype,"sortingLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.DEFAULT}}),E=n(_.prototype,"orderInLayer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=_))||b)||b)||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/SoundModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Config.ts"],(function(n){var t,e,r,u,a,s;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy,u=n.JsonAsset},function(n){a=n.GameApp},function(n){s=n.Bundle}],execute:function(){r._RF.push({},"416f2INQgJIOrmCxE5Id6J9","SoundModel",void 0),n("SoundModel",function(){function n(){this.jsonData=null}n.getInstance=function(){return null==n._instance&&(n._instance=new n),this._instance};var r=n.prototype;return r.getSoundById=function(){var n=t(e().mark((function n(t){var r,u;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getSoundList();case 2:r=n.sent,u=0;case 4:if(!(u<r.length)){n.next=10;break}if(r[u].id!=t){n.next=7;break}return n.abrupt("return",r[u]);case 7:u++,n.next=4;break;case 10:return n.abrupt("return",null);case 11:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),r.getSoundList=function(){var n=t(e().mark((function n(){var t;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=this.jsonData){n.next=6;break}return n.next=3,a.res.loadAsync(s.REMOTE,"config/sound_arr",u);case 3:t=n.sent,this.jsonData=t.json,t.decRef();case 6:return n.abrupt("return",this.jsonData);case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.audioPlay=function(){var r=t(e().mark((function t(r,u){var s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getInstance().getSoundById(r);case 2:if(s=t.sent,!u){t.next=6;break}return u.playEffect(s.sound_path,s.volume_ratio),t.abrupt("return");case 6:a.audio.playEffect(s.sound_path,s.volume_ratio);case 7:case"end":return t.stop()}}),t)})));return function(n,t){return r.apply(this,arguments)}}(),n}())._instance=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/StorageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EncryptUtil.ts","./env"],(function(e){var t,n,r,i,o;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,r=e.sys},function(e){i=e.EncryptUtil},function(e){o=e.PREVIEW}],execute:function(){n._RF.push({},"83a20BMd2pCh6z1US65tHrU","StorageManager",void 0);e("StorageManager",function(){function e(){this._key=null,this._iv=null,this._id=null}var n=e.prototype;return n.init=function(e,t){i.initCrypto(e,t),this._key=i.md5(e),this._iv=i.md5(t)},n.setUser=function(e){this._id=e},n.set=function(e,t){var n=this.getKey(e);if(null!=e){if(this.encrypted&&(n=i.md5(n)),null==t)return console.warn("存储的值为空，则直接移除该存储"),void this.remove(e);if("function"!=typeof t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(e){return void console.error("解析失败，str = "+t)}else"number"==typeof t&&(t+="");this.encrypted&&null!=this._key&&null!=this._iv&&(t=i.aesEncrypt(""+t,this._key,this._iv)),r.localStorage.setItem(n,t)}else console.error("储存的值不能为方法")}else console.error("存储的key不能为空")},n.get=function(e,t){if(void 0===t&&(t=""),null==e)return console.error("存储的key不能为空"),null;e=this.getKey(e),this.encrypted&&(e=i.md5(e));var n=r.localStorage.getItem(e);return null!=n&&""!==n&&this.encrypted&&null!=this._key&&null!=this._iv&&(n=i.aesDecrypt(n,this._key,this._iv)),null===n?t:n},n.getNumber=function(e,t){void 0===t&&(t=0);var n=this.get(e);return"0"==n?Number(n):Number(n)||t},n.getBoolean=function(e){var t=this.get(e);return Boolean(t)||!1},n.getJson=function(e,t){var n=this.get(e);return n&&JSON.parse(n)||t},n.remove=function(e){if(null!=e){var t=this.getKey(e);this.encrypted&&(t=i.md5(t)),r.localStorage.removeItem(t)}else console.error("存储的key不能为空")},n.clear=function(){r.localStorage.clear()},n.getKey=function(e){return null==this._id||""==this._id?e:this._id+"_"+e},t(e,[{key:"encrypted",get:function(){return!o}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"c4e40xynJ5IlL2BBzHJ58ez","StringUtil",void 0);t("StringUtil",function(){function t(){}return t.guid=function(){for(var t="",r=1;r<=32;r++){t+=Math.floor(16*Math.random()).toString(16),8!=r&&12!=r&&16!=r&&20!=r||(t+="-")}return t},t.numberTotPermil=function(t){return t.toLocaleString()},t.numberToThousand=function(t,r){void 0===r&&(r=2);var n=1e3;if(t<n)return t.toString();var e=Math.floor(Math.log(t)/Math.log(n));return(t/Math.pow(n,e)).toFixed(r)+["","K","M","G"][e]},t.numberToTenThousand=function(t,r){void 0===r&&(r=2);var n=1e4;if(t<n)return t.toString();var e=Math.floor(Math.log(t)/Math.log(n));return(t/Math.pow(n,e)).toFixed(r)+["","万","亿","万亿"][e]},t.format=function(t,r){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var e in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+e+")").test(r)&&(r=r.replace(RegExp.$1,1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return r},t.stringToArray1=function(t){return""==t?[]:t.split(",")},t.stringToArray2=function(t){return""==t?[]:t.split("|")},t.stringToArray3=function(t){return""==t?[]:t.split(":")},t.stringToArray4=function(t){return""==t?[]:t.split(";")},t.sub=function(t,r,n){void 0===n&&(n=!1);var e=/[^\x00-\xff]/g;if(t.replace(e,"mm").length<=r)return t;for(var o=Math.floor(r/2);o<t.length;o++)if(t.substr(0,o).replace(e,"mm").length>=r)return n?t.substr(0,o)+"...":t.substr(0,o);return t},t.stringLen=function(t){for(var r=0,n=t.length,e=-1,o=0;o<n;o++)r+=(e=t.charCodeAt(o))>=0&&e<=128?1:2;return r},t.IsEmpty=function(t){return null==t||null==t||0==t.length},t.substitute=function(t){if(null==t)return"";for(var r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];var o,u=n.length;1==u&&n[0]instanceof Array?u=(o=n[0]).length:o=n;for(var i=0;i<u;i++)t=t.replace(new RegExp("\\{"+i+"\\}","g"),o[i]);return t},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/tdanalytics.mg.cocoscreator.min.js",["./cjs-loader.mjs"],(function(e,t){var i;return{setters:[function(e){i=e.default}],execute:function(){e("default",void 0);var n=e("__cjsMetaURL",t.meta.url);i.define(n,(function(t,i,n,a,r){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}var l="3.0.1",h="MG",p={},d=Array.prototype,f=Object.prototype,g=d.slice,m=f.toString,v=Object.prototype.hasOwnProperty,y=d.forEach,_=Array.isArray,k={},S=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"];p.each=function(e,t,i){if(null==e)return!1;if(y&&e.forEach===y)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,a=e.length;n<a;n++)if(n in e&&t.call(i,e[n],n,e)===k)return!1}else for(var r in e)if(v.call(e,r)&&t.call(i,e[r],r,e)===k)return!1},p.extend=function(e){return p.each(g.call(arguments,1),(function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])})),e},p.extend2Layers=function(e){return p.each(g.call(arguments,1),(function(t){for(var i in t)void 0!==t[i]&&(p.isObject(t[i])&&p.isObject(e[i])?p.extend(e[i],t[i]):e[i]=t[i])})),e},p.isArray=_||function(e){return"[object Array]"===m.call(e)},p.isFunction=function(e){try{return"function"==typeof e}catch(e){return!1}},p.isPromise=function(e){return"[object Promise]"===m.call(e)&&null!=e},p.isObject=function(e){return"[object Object]"===m.call(e)&&null!=e},p.isEmptyObject=function(e){if(p.isObject(e)){for(var t in e)if(v.call(e,t))return!1;return!0}return!1},p.isUndefined=function(e){return void 0===e},p.isString=function(e){return"[object String]"===m.call(e)},p.isDate=function(e){return"[object Date]"===m.call(e)},p.isBoolean=function(e){return"[object Boolean]"===m.call(e)},p.isNumber=function(e){return"[object Number]"===m.call(e)&&/[\d\.]+/.test(String(e))},p.isJSONString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p.decodeURIComponent=function(e){var t="";try{t=decodeURIComponent(e)}catch(i){t=e}return t},p.encodeURIComponent=function(e){var t="";try{t=encodeURIComponent(e)}catch(i){t=e}return t},p.utf8Encode=function(e){for(var t,i="",n=t=0,a=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<a;r++){var s=e.charCodeAt(r),o=null;s<128?t++:o=127<s&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==o&&(n<t&&(i+=e.substring(n,t)),i+=o,n=t=r+1)}return n<t&&(i+=e.substring(n,e.length)),i},p.base64Encode=function(e){var t,i,n,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,o=0,c="",u=[];if(!e)return e;for(e=p.utf8Encode(e);t=(a=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,i=a>>12&63,n=a>>6&63,a&=63,u[o++]=r.charAt(t)+r.charAt(i)+r.charAt(n)+r.charAt(a),s<e.length;);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},p.encodeDates=function(e){return p.each(e,(function(t,i){if(p.isDate(t))e[i]=p.formatDate(t);else if(p.isObject(t))e[i]=p.encodeDates(t);else if(p.isArray(t))for(var n=0;n<t.length;n++)p.isDate(t[n])&&(e[i][n]=p.formatDate(t[n]))})),e},p.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+((i=e.getMilliseconds())<100&&9<i?"0"+i:i<10?"00"+i:i);var i},p.searchObjDate=function(e){try{(p.isObject(e)||p.isArray(e))&&p.each(e,(function(t,i){p.isObject(t)||p.isArray(t)?p.searchObjDate(e[i]):p.isDate(t)&&(e[i]=p.formatDate(t))}))}catch(e){b.warn(e)}},p.UUID=function(){var e=(new Date).getTime();return String(Math.random()).replace(".","").slice(1,11)+"-"+e},p.UUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},p.setMpPlatform=function(e){p.mpPlatform=e},p.getMpPlatform=function(){return p.mpPlatform},p.createExtraHeaders=function(){return{"TA-Integration-Type":h,"TA-Integration-Version":l,"TA-Integration-Count":"1","TA-Integration-Extra":p.getMpPlatform()}},p.checkAppId=function(e){return e.replace(/\s*/g,"")},p.checkUrl=function(e){return e=e.replace(/\s*/g,""),p.url("basic",e)},p.url=function(){function e(){return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function t(e,t){var i=e.charAt(0);t=t.split(i);return i===e?t:t[(e=parseInt(e.substring(1),10))<0?t.length+e:e-1]}function i(e,t){for(var i,n,a=e.charAt(0),r=t.split("&"),s=[],o={},c=e.substring(1),u=0,l=r.length;u<l;u++)if(""!==(s=(s=r[u].match(/(.*?)=(.*)/))||[r[u],r[u],""])[1].replace(/\s/g,"")){if(s[2]=(n=s[2]||"",p.decodeURIComponent(n.replace(/\+/g," "))),c===s[1])return s[2];(i=s[1].match(/(.*)\[([0-9]+)\]/))?(o[i[1]]=o[i[1]]||[],o[i[1]][i[2]]=s[2]):o[s[1]]=s[2]}return a===e?o:o[c]}return function(n,a){var r={};if("tld?"===n)return e();if(a=a||window.location.toString(),!n)return a;if(n=n.toString(),a.match(/^mailto:([^/].+)/))s=a.match(/^mailto:([^/].+)/),r.protocol="mailto",r.email=s[1];else{if(a.match(/(.*?)\/#!(.*)/)&&(a=(s=a.match(/(.*?)\/#!(.*)/))[1]+s[2]),a.match(/(.*?)#(.*)/)&&(s=a.match(/(.*?)#(.*)/),r.hash=s[2],a=s[1]),r.hash&&n.match(/^#/))return i(n,r.hash);if(a.match(/(.*?)\?(.*)/)&&(s=a.match(/(.*?)\?(.*)/),r.query=s[2],a=s[1]),r.query&&n.match(/^\?/))return i(n,r.query);if(a.match(/(.*?):?\/\/(.*)/)&&(s=a.match(/(.*?):?\/\/(.*)/),r.protocol=s[1].toLowerCase(),a=s[2]),a.match(/(.*?)(\/.*)/)&&(s=a.match(/(.*?)(\/.*)/),r.path=s[2],a=s[1]),r.path=(r.path||"").replace(/^([^/])/,"/$1").replace(/\/$/,""),n.match(/^[-0-9]+$/)&&(n=n.replace(/^([^/])/,"/$1")),n.match(/^\//))return t(n,r.path.substring(1));if((s=(s=t("/-1",r.path.substring(1)))&&s.match(/(.*?)\.(.*)/))&&(r.file=s[0],r.filename=s[1],r.fileext=s[2]),a.match(/(.*):([0-9]+)$/)&&(s=a.match(/(.*):([0-9]+)$/),r.port=s[2],a=s[1]),a.match(/(.*?)@(.*)/)&&(s=a.match(/(.*?)@(.*)/),r.auth=s[1],a=s[2]),r.auth&&(s=r.auth.match(/(.*):(.*)/),r.user=s?s[1]:r.auth,r.pass=s?s[2]:void 0),r.hostname=a.toLowerCase(),"."===n.charAt(0))return t(n,r.hostname);e()&&(s=r.hostname.match(e()))&&(r.tld=s[3],r.domain=s[2]?s[2]+"."+s[3]:void 0,r.sub=s[1]||void 0);var s=r.port?":"+r.port:"";r.protocol=r.protocol||window.location.protocol.replace(":",""),r.port=r.port||("https"===r.protocol?"443":"80"),r.protocol=r.protocol||("443"===r.port?"https":"http"),r.basic=r.protocol+"://"+r.hostname+s}return n in r?r[n]:"{}"===n?r:""}}(),p.createString=function(e){for(var t=e,i=Math.random().toString(36).substr(2);i.length<t;)i+=Math.random().toString(36).substr(2);return i.substr(0,e)},p.createAesKey=function(){return p.createString(16)},p.generateEncryptyData=function(e,t){if(void 0===t)return e;var i=t.publicKey,n=t.version;if(void 0===i||void 0===n)return e;if("undefined"==typeof CryptoJS||"undefined"==typeof JSEncrypt)return e;var a=p.createAesKey();try{var r=CryptoJS.enc.Utf8.parse(a),s=CryptoJS.enc.Utf8.parse(JSON.stringify(e)),o=p.isUndefined(CryptoJS.pad.Pkcs7)?CryptoJS.pad.PKCS7:CryptoJS.pad.Pkcs7;r=CryptoJS.AES.encrypt(s,r,{mode:CryptoJS.mode.ECB,padding:o}).toString();return(o=new JSEncrypt).setPublicKey(i),!1===(o=o.encrypt(a))?(b.warn("Encryption failed, return the original data"),e):{pkv:n,ekey:o,payload:r}}catch(e){b.warn("Encryption failed, return the original data: "+e)}return e},p.getUtm=function(){var e={};return p.each(S,(function(t){try{var i=p.getQueryParam(location.href,t);i.length&&(e[t]=i)}catch(t){b.warn("get utm fail: "+t)}})),JSON.stringify(e)},p.getQueryParam=function(e,t){return t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),e=p.decodeURIComponent(e),null===(e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e))||e&&"string"!=typeof e[1]&&e[1].length?"":p.decodeURIComponent(e[1])},p.getUtmFromQuery=function(e){var t={};return p.each(S,(function(i){e[i]&&(t[i]=e[i])})),JSON.stringify(t)},p.indexOf=function(e,t){var i=e.indexOf;if(i)return i.call(e,t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},p.checkCalibration=function(e,t,i){return e};var b="object"===s(b)?b:{};b.info=function(){if("object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&b.enabled)try{return arguments[0]="[ThinkingData] Info: "+arguments[0],console.log.apply(console,arguments)}catch(e){console.log("[ThinkingData] Info: "+arguments[0])}},b.warn=function(){if("object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&b.enabled)try{return arguments[0]="[ThinkingData] Warning: "+arguments[0],console.warn.apply(console,arguments)}catch(e){console.warn("[ThinkingData] Warning: "+arguments[0])}};var I=function(){function e(){o(this,e),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"}}return u(e,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,i){if(e=localStorage.getItem(e),!t)return p.isJSONString(e)?JSON.parse(e):{};p.isJSONString(e)?i(JSON.parse(e)):i({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeStorage",value:function(e){localStorage.removeItem(e)}},{key:"_setSystemProxy",value:function(e){this._sysCallback=e}},{key:"getSystemInfo",value:function(e){var t={mp_platform:"web",system:this._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height,systemLanguage:navigator.language};this._sysCallback&&(t=p.extend(t,this._sysCallback(e))),e.success(t),e.complete()}},{key:"_getOs",value:function(){var e=navigator.userAgent;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"MacOS":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"ChromeOS":""}},{key:"getNetworkType",value:function(e){e.complete()}},{key:"onNetworkStatusChange",value:function(){}},{key:"request",value:function(e){var t={},i=new XMLHttpRequest;if(i.open(e.method,e.url),e.header)for(var n in e.header)i.setRequestHeader(n,e.header[n]);return i.onreadystatechange=function(){4===i.readyState&&200===i.status?(t.statusCode=200,p.isJSONString(i.responseText)&&(t.data=JSON.parse(i.responseText)),e.success(t)):200!==i.status&&(t.errMsg="network error",e.fail(t))},i.ontimeout=function(){t.errMsg="timeout",e.fail(t)},i.send(e.data),i}},{key:"initAutoTrackInstance",value:function(e,t){this.instance=e,this.autoTrack=t.autoTrack;var i=this;i.onPageShow(),i.autoTrack.appHide&&i.instance.timeEvent("ta_page_hide"),"onvisibilitychange"in document&&(document.onvisibilitychange=function(){document.hidden?i.onPageHide(!0):(i.onPageShow(),i.autoTrack.appHide&&i.instance.timeEvent("ta_page_hide"))})}},{key:"setGlobal",value:function(e,t){window[t]=e}},{key:"getAppOptions",value:function(){}},{key:"showToast",value:function(){}},{key:"onPageShow",value:function(){var e;this.autoTrack.appShow&&(e={},p.extend(e,this.autoTrack.properties),p.isFunction(this.autoTrack.callback)&&p.extend(e,this.autoTrack.callback("appShow")),this.instance._internalTrack("ta_page_show",e))}},{key:"onPageHide",value:function(e){var t;this.autoTrack.appHide&&(t={},p.extend(t,this.autoTrack.properties),p.isFunction(this.autoTrack.callback)&&p.extend(t,this.autoTrack.callback("appHide")),this.instance._internalTrack("ta_page_hide",t,new Date,null,e))}}],[{key:"createInstance",value:function(){return new e}}]),e}(),P=function(){function e(t,i){o(this,e),this.taInstance=t,this.config=i||{},this.referrer="Directly open",this.config.isPlugin?(t.App=function(){App.apply(this,arguments)},inension(t.Page)):(t=App,App=this._initAppExtention(t),t=Page,Page=this._initPageExtension(t))}return u(e,[{key:"_initPageExtension",value:function(e){var t=this;return function(i){var n=i.onShow,a=i.onShareAppMessage;return i.onShow=function(e){t.onPageShow(),"function"==typeof n&&n.call(this,e)},"function"==typeof a&&(i.onShareAppMessage=function(e){return e=a.call(this,e),t.onPageShare(e)}),e(i)}}},{key:"_initAppExtention",value:function(e){var t=this;return function(i){var n=i.onLaunch,a=i.onShow,r=i.onHide;return i.onLaunch=function(e){t.onAppLaunch(e,this),"function"==typeof n&&n.call(this,e)},i.onShow=function(e){t.onAppShow(e),"function"==typeof a&&a.call(this,e)},i.onHide=function(){t.onAppHide(),"function"==typeof r&&r.call(this)},e(i)}}},{key:"onAppLaunch",value:function(e,t){this._setAutoTrackProperties(e),p.isUndefined(t)||(t[this.taInstance.name]=this.taInstance),this.config.appLaunch&&(t={},e&&e.path&&(t["#url_path"]=this._getPath(e.path)),e&&e.query&&(t["#utm"]=p.getUtmFromQuery(e.query)),this.taInstance._internalTrack("ta_mp_launch",t))}},{key:"onAppShow",value:function(e){var t;this.config.appHide&&this.taInstance.timeEvent("ta_mp_hide"),this._setAutoTrackProperties(e),this.config.appShow&&(t={},e&&e.path&&(t["#url_path"]=this._getPath(e.path)),e&&e.query&&(t["#utm"]=p.getUtmFromQuery(e.query)),p.extend(t,this.config.properties),p.isFunction(this.config.callback)&&p.extend(t,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mp_show",t))}},{key:"onAppHide",value:function(){var e;this.config.appHide&&(e={"#url_path":this._getCurrentPath()},p.extend(e,this.config.properties),p.isFunction(this.config.callback)&&p.extend(e,this.config.callback("appHide")),this.taInstance._internalTrack("ta_mp_hide",e))}},{key:"_getCurrentPath",value:function(){var e="Not to get";try{var t=getCurrentPages();e=t[t.length-1].route}catch(e){b.info("")}return e}},{key:"_setAutoTrackProperties",value:function(e){e={"#scene":e.scene},this.taInstance._setAutoTrackProperties(e)}},{key:"_getPath",value:function(e){return"string"==typeof e?e.replace(/^\//,""):"Abnormal values"}},{key:"onPageShare",value:function(e){return this.config.pageShare&&this.taInstance._internalTrack("ta_mp_share",{"#url_path":this._getCurrentPath()}),p.isObject(e)?e:{}}},{key:"onPageShow",value:function(){var e,t;this.config.pageShow&&(t={"#url_path":(e=this._getCurrentPath())||"The system did not get a value","#referrer":this.referrer},this.referrer=e,this.taInstance._internalTrack("ta_mp_view",t))}}]),e}(),C=function(){function e(t,i,n){var a=this;o(this,e),this.taInstance=t,this.config=i||{},i=n.getLaunchOptionsSync(),this._onShow(i),this.startTracked=!0,n.onShow((function(e){a._onShow(e)})),n.onHide((function(){var e;a.startTracked=!1,a.config.appHide&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appHide")),a.taInstance._internalTrack("ta_mg_hide",e))}))}return u(e,[{key:"_onShow",value:function(e){this.startTracked||(this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),e&&e.scene&&this.taInstance._setAutoTrackProperties({"#scene":e.scene}),this.config.appShow&&(e={},p.extend(e,this.config.properties),p.isFunction(this.config.callback)&&p.extend(e,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",e)))}}]),e}(),N=function(){function e(t,i,n){o(this,e),this.api=t,this.config=i,this._config=n}return u(e,[{key:"getConfig",value:function(){return this.config}},{key:"getStorage",value:function(e,t,i){if(!t){if("dd_mp"===this._config.platform){var n=this.api.getStorageSync({key:e});return p.isJSONString(n.data)?JSON.parse(n.data):{}}return n=this.api.getStorageSync(e),p.isJSONString(n)?JSON.parse(n):{}}this.api.getStorage({key:e,success:function(e){e=p.isJSONString(e.data)?JSON.parse(e.data):{},i(e)},fail:function(){b.warn("getStorage faild"),i({})}})}},{key:"setStorage",value:function(e,t){"ali_mp"===this._config.platform||"tb_mp"===this._config.platform||"dd_mp"===this._config.platform?this.api.setStorageSync({key:e,data:t}):this.api.setStorageSync(e,t)}},{key:"removeStorage",value:function(e){p.isFunction(this.api.removeStorage)?this.api.removeStorage({key:e}):p.isFunction(this.api.deleteStorage)&&this.api.deleteStorage({key:e})}},{key:"_getPlatform",value:function(){return""}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform;this.api.getSystemInfo({success:function(i){p.isFunction(t)?i.mp_platform=t(i):i.mp_platform=t,e.success(i),"wechat"===t&&e.complete()},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){p.isFunction(this.api.getNetworkType)?this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}}):(e.success({}),e.complete())}},{key:"onNetworkStatusChange",value:function(e){p.isFunction(this.api.onNetworkStatusChange)?this.api.onNetworkStatusChange(e):e({})}},{key:"request",value:function(e){if("ali_mp"!==this._config.platform&&"dd_mp"!==this._config.platform)return this.api.request(e);var t=p.extend({},e);return t.headers=e.header,t.success=function(t){t.statusCode=t.status,e.success(t)},t.fail=function(t){t.errMsg=t.errorMessage,e.fail(t)},"dd_mp"===this._config.platform?this.api.httpRequest(t):this.api.request(t)}},{key:"initAutoTrackInstance",value:function(e,t){return p.isObject(t.autoTrack)&&(t.autoTrack.isPlugin=t.is_plugin),new(this._config.mp?P:C)(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){this._config.mp?b.warn("ThinkingAnalytics: we do not set global name for TA instance when you do not enable auto track."):GameGlobal[t]=e}},{key:"getAppOptions",value:function(e){var t={};try{t=this.api.getLaunchOptionsSync()}catch(e){b.warn("Cannot get launch options.")}if(p.isFunction(e))try{this._config.mp?this.api.onAppShow(e):this.api.onShow(e)}catch(e){b.warn("Cannot register onShow callback.")}return t}},{key:"showToast",value:function(e){var t;p.isFunction(this.api.showToast)&&(t={title:e},"dd_mp"!==this._config.platform&&"ali_mp"!==this._config.platform||(t.content=e),this.api.showToast(t))}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"wechat_mp":return new e(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat"},{mpPlatform:"wechat",mp:!0,platform:t});case"wechat_mg":return new e(wx,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_wechat_game"},{mpPlatform:"wechat",platform:t});case"qq_mp":return new e(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq"},{mpPlatform:"qq",mp:!0,platform:t});case"qq_mg":return new e(qq,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qq_game"},{mpPlatform:"qq",platform:t});case"baidu_mp":return new e(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan"},{mpPlatform:function(e){return e.host},mp:!0,platform:t});case"baidu_mg":return new e(swan,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_swan_game"},{mpPlatform:function(e){return e.host},platform:t});case"tt_mg":return new e(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt_game"},{mpPlatform:function(e){return e.appName},platform:t});case"tt_mp":return new e(tt,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tt"},{mpPlatform:function(e){return e.appName},mp:!0,platform:t});case"ali_mp":return new e(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_ali"},{mpPlatform:function(e){return e.app},mp:!0,platform:t});case"dd_mp":return new e(dd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_dd"},{mpPlatform:"dingding",mp:!0,platform:t});case"bl_mg":return new e(bl,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_mg"},{mpPlatform:"bilibili",platform:t});case"kuaishou_mp":return new e(ks,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_kuaishou"},{mpPlatform:"kuaishou",mp:!0,platform:t});case"qh360_mg":return new e(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",platform:t});case"tb_mp":return new e(my,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_tb"},{mpPlatform:"tb",mp:!0,platform:t});case"jd_mp":return new e(jd,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_jd"},{mpPlatform:"jd",mp:!0,platform:t});case"qh360_mp":return new e(qh,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qh360"},{mpPlatform:"qh360",mp:!0,platform:t});case"WEB":return new I.createInstance}}}]),e}(),A=function e(t,i){var n=this;o(this,e),this.taInstance=t,this.config=i||{},this.config.appShow&&this.taInstance._internalTrack("ta_mg_show"),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),qg.onShow((function(){var e;n.config.appHide&&n.taInstance.timeEvent("ta_mg_hide"),n.config.appShow&&(e={},p.extend(e,n.config.properties),p.isFunction(n.config.callback)&&p.extend(e,n.config.callback("appShow")),n.taInstance._internalTrack("ta_mg_show"))})),qg.onHide((function(){var e;n.config.appHide&&(e={},p.extend(e,n.config.properties),p.isFunction(n.config.callback)&&p.extend(e,n.config.callback("appHide")),n.taInstance._internalTrack("ta_mg_hide"))}))},w=function(){function e(){o(this,e),this.config={persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_vivo_game",asyncPersistence:!0}}return u(e,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,i){if(!t)return t=qg.getStorageSync({key:e}),p.isJSONString(t)?JSON.parse(t):{};qg.getStorage({key:e,success:function(e){e=p.isJSONString(e)?JSON.parse(e):{},i(e)},fail:function(){i({})}})}},{key:"setStorage",value:function(e,t){qg.setStorage({key:e,value:t})}},{key:"removeStorage",value:function(e){qg.deleteStorage({key:e})}},{key:"getSystemInfo",value:function(e){qg.getSystemInfo({success:function(t){var i=t,n=[t.osType,t.osVersionName].join(" ");i.brand=t.manufacturer,i.system=n,i.mp_platform="vivo_qg",e.success(i)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){qg.getNetworkType({success:function(t){var i=t;i.networkType=t.type,e.success(i)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){qg.subscribeNetworkStatus({callback:function(t){var i=t;i.networkType=t.type,e(i)}})}},{key:"request",value:function(e){return qg.request({url:e.url,data:e.data,method:e.method,header:e.header,success:function(t){e.success(t)},fail:function(t){e.fail(t)}})}},{key:"initAutoTrackInstance",value:function(e,t){return new A(e,t.autoTrack)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return{}}},{key:"showToast",value:function(e){qg.showToast({message:e,duration:0})}}],[{key:"createInstance",value:function(){return new e}}]),e}(),O=function e(t,i,n){var a=this;o(this,e),this.taInstance=t,this.config=i||{},this.config.appShow&&(i={},p.extend(i,this.config.properties),p.isFunction(this.config.callback)&&p.extend(i,this.config.callback("appShow")),this.taInstance._internalTrack("ta_mg_show",i)),this.config.appHide&&this.taInstance.timeEvent("ta_mg_hide"),n.onShow((function(){var e;a.config.appHide&&a.taInstance.timeEvent("ta_mg_hide"),a.config.appShow&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appShow")),a.taInstance._internalTrack("ta_mg_show",e))})),n.onHide((function(){var e;a.config.appHide&&(e={},p.extend(e,a.config.properties),p.isFunction(a.config.callback)&&p.extend(e,a.config.callback("appHide")),a.taInstance._internalTrack("ta_mg_hide",e))}))},T=function(){function e(t,i,n){o(this,e),this.api=t,this.config=i,this._config=n}return u(e,[{key:"getConfig",value:function(){return this.config||{}}},{key:"getStorage",value:function(e,t,i){if(e=localStorage.getItem(e),!t)return p.isJSONString(e)?JSON.parse(e):{};p.isJSONString(e)?i(JSON.parse(e)):i({})}},{key:"setStorage",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeStorage",value:function(e){localStorage.removeItem(e)}},{key:"getSystemInfo",value:function(e){var t=this._config.mpPlatform;this.api.getSystemInfo({success:function(i){i.mp_platform=t,e.success(i)},complete:function(){e.complete()}})}},{key:"getNetworkType",value:function(e){this.api.getNetworkType({success:function(t){e.success(t)},complete:function(){e.complete()}})}},{key:"onNetworkStatusChange",value:function(e){this.api.onNetworkStatusChange({callback:function(t){e(t)}})}},{key:"request",value:function(e){var t={},i=new XMLHttpRequest;if(i.open(e.method,e.url),e.header)for(var n in e.header)i.setRequestHeader(n,e.header[n]);return i.onreadystatechange=function(){4===i.readyState&&200===i.status?(t.statusCode=200,p.isJSONString(i.responseText)&&(t.data=JSON.parse(i.responseText)),e.success(t)):200!==i.status&&(t.errMsg="network error",e.fail(t))},i.ontimeout=function(){t.errMsg="timeout",e.fail(t)},i.send(e.data),i}},{key:"initAutoTrackInstance",value:function(e,t){return new O(e,t.autoTrack,this.api)}},{key:"setGlobal",value:function(e,t){globalThis[t]=e}},{key:"getAppOptions",value:function(){return this.api.getLaunchOptionsSync()}},{key:"showToast",value:function(e){this.api.showToast({title:e,icon:"none",duration:2e3})}}],[{key:"createInstance",value:function(){return this._createInstance("R_CURRENT_PLATFORM")}},{key:"_createInstance",value:function(t){switch(t){case"oppo":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_oppo_game"},{mpPlatform:"oppo_qg"});case"huawei":return new e(hbs,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_huawei_game"},{mpPlatform:"huawei_qg"});case"mz":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg_mz_game"},{mpPlatform:"mz"});case"xiaomi":return new e(qg,{persistenceName:"thinkingdata",persistenceNameOld:"thinkingdata_qg"},{mpPlatform:"xiaomi"})}}}]),e}(),j=function(){function e(){o(this,e)}return u(e,null,[{key:"createInstance",value:function(){var e=Object.freeze({WECHAT_GAME:104,QQ_PLAY:105,BAIDU_GAME:107,VIVO_GAME:108,OPPO_GAME:109,HUAWEI_GAME:110,XIAOMI_GAME:111,BYTEDANCE_GAME:117,QTT_GAME:116,LINKSURE:119,WECHAT_MINI_GAME:"WECHAT_GAME",BAIDU_MINI_GAME:"BAIDU_MINI_GAME",XIAOMI_QUICK_GAME:"XIAOMI_QUICK_GAME",OPPO_MINI_GAME:"OPPO_MINI_GAME",VIVO_MINI_GAME:"VIVO_MINI_GAME",HUAWEI_QUICK_GAME:"HUAWEI_QUICK_GAME",BYTEDANCE_MINI_GAME:"BYTEDANCE_MINI_GAME",QTT_MINI_GAME:"QTT_MINI_GAME",LINKSURE_MINI_GAME:"LINKSURE_MINI_GAME"});if(cc.sys.platform===e.WECHAT_GAME||cc.sys.platform===e.WECHAT_MINI_GAME)return N._createInstance("wechat_mg");if(cc.sys.platform===e.BAIDU_GAME||cc.sys.platform===e.BAIDU_MIN_GAME)return N._createInstance("baidu_mg");if(cc.sys.platform===e.VIVO_GAME||cc.sys.platform===e.VIVO_MINI_GAME)return w.createInstance();if(cc.sys.platform===e.QQ_PLAY)return N._createInstance("qq_mg");if(cc.sys.platform===e.OPPO_GAME||cc.sys.platform===e.OPPO_MINI_GAME)return T._createInstance("oppo");if(cc.sys.platform===e.HUAWEI_GAME||cc.sys.platform===e.HUAWEI_QUICK_GAME)return T._createInstance("huawei");if(cc.sys.platform===e.XIAOMI_GAME||cc.sys.platform===e.XIAOMI_QUICK_GAME)return T._createInstance("xiaomi");if(cc.sys.platform===e.BYTEDANCE_GAME||cc.sys.platform===e.BYTEDANCE_MINI_GAME)return N._createInstance("tt_mg");var t=I.createInstance();return t._sysCallback=function(){return{system:cc.sys.os.replace(" ","")+" "+cc.sys.osVersion}},t.getNetworkType=function(e){var t={};switch(cc.sys.getNetworkType()){case cc.sys.NetworkType.LAN:t.networkType="WIFI";break;case cc.sys.NetworkType.WWAN:t.networkType="WWAN";break;default:t.networkType="NONE"}e.success(t),e.complete()},t.getSystemInfo=function(e){var i={mp_platform:cc.sys.platform.toString(),system:t._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height};t._sysCallback&&(i=p.extend(i,t._sysCallback(e))),e.success(i),e.complete()},t}}]),e}(),D=function(){function e(){o(this,e)}return u(e,null,[{key:"_getCurrentPlatform",value:function(){return this.currentPlatform||(this.currentPlatform=j.createInstance())}},{key:"getConfig",value:function(){return this._getCurrentPlatform().getConfig()}},{key:"getStorage",value:function(e,t,i){return this._getCurrentPlatform().getStorage(e,t,i)}},{key:"setStorage",value:function(e,t){return this._getCurrentPlatform().setStorage(e,t)}},{key:"removeStorage",value:function(e){return this._getCurrentPlatform().removeStorage(e)}},{key:"getSystemInfo",value:function(e){return this._getCurrentPlatform().getSystemInfo(e)}},{key:"getNetworkType",value:function(e){return this._getCurrentPlatform().getNetworkType(e)}},{key:"onNetworkStatusChange",value:function(e){this._getCurrentPlatform().onNetworkStatusChange(e)}},{key:"request",value:function(e){return this._getCurrentPlatform().request(e)}},{key:"initAutoTrackInstance",value:function(e,t){return this._getCurrentPlatform().initAutoTrackInstance(e,t)}},{key:"setGlobal",value:function(e,t){e&&t&&this._getCurrentPlatform().setGlobal(e,t)}},{key:"getAppOptions",value:function(e){return this._getCurrentPlatform().getAppOptions(e)}},{key:"showDebugToast",value:function(e){this._getCurrentPlatform().showToast(e)}}]),e}(),x=/^[a-zA-Z][a-zA-Z0-9_]{0,49}$/,M=function(){function e(){o(this,e)}return u(e,null,[{key:"stripProperties",value:function(e){return p.isObject(e)&&p.each(e,(function(e,t){p.isString(e)||p.isNumber(e)||p.isDate(e)||p.isBoolean(e)||p.isArray(e)||p.isObject(e)||b.warn("Your data -",t,e,"- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object")})),e}},{key:"_checkPropertiesKey",value:function(e){var t=!0;return p.each(e,(function(e,i){x.test(i)||(b.warn("Invalid KEY: "+i),t=!1)})),t}},{key:"event",value:function(e){return!(!p.isString(e)||!x.test(e))||(b.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: "+e),!1)}},{key:"propertyName",value:function(e){return!(!p.isString(e)||!x.test(e))||(b.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: "+e),!1)}},{key:"properties",value:function(e){return this.stripProperties(e),!(e&&(p.isObject(e)?!this._checkPropertiesKey(e)&&(b.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),1):(b.warn("properties can be none, but it must be an object"),1)))}},{key:"propertiesMust",value:function(e){return this.stripProperties(e),void 0===e||!p.isObject(e)||p.isEmptyObject(e)?(b.warn("properties must be an object with a value"),!1):!!this._checkPropertiesKey(e)||(b.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"),!1)}},{key:"userId",value:function(e){return!(!p.isString(e)||!/^.{1,64}$/.test(e))||(b.warn("The user ID must be a string of less than 64 characters and cannot be null"),!1)}},{key:"userAddProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!p.isNumber(e[t]))return b.warn("The attributes of userAdd need to be Number"),!1;return!0}},{key:"userAppendProperties",value:function(e){if(!this.propertiesMust(e))return!1;for(var t in e)if(!p.isArray(e[t]))return b.warn("The attribute of userAppend must be Array"),!1;return!0}}]),e}(),F=function(){function e(t,i,n,a,r){o(this,e),this.data=t,this.serverUrl=i,this.callback=r,this.tryCount=p.isNumber(n)?n:1,this.timeout=p.isNumber(a)?a:3e3,this.taClassName="HttpTask"}return u(e,[{key:"run",value:function(){var e=this,t=p.createExtraHeaders();t["content-type"]="application/json";var i=D.request({url:this.serverUrl,method:"POST",data:this.data,header:t,success:function(t){e.onSuccess(t),clearTimeout(n)},fail:function(t){e.onFailed(t),clearTimeout(n)}}),n=setTimeout((function(){(p.isObject(i)||p.isPromise(i))&&p.isFunction(i.abort)&&i.abort()}),this.timeout)}},{key:"onSuccess",value:function(e){if(200===e.statusCode){var t;switch(e.data.code){case 0:t="success";break;case-1:t="invalid data";break;case-2:t="invalid APP ID";break;default:t="Unknown return code"}this.callback({code:e.data.code,msg:t})}else this.callback({code:-3,msg:e.statusCode})}},{key:"onFailed",value:function(e){0<--this.tryCount?this.run():this.callback({code:-3,msg:e.errMsg})}}]),e}(),U=function(){function e(t,i,n,a,r,s,c){o(this,e),this.data=t,this.serverDebugUrl=i,this.callback=c,this.tryCount=p.isNumber(n)?n:1,this.timeout=p.isNumber(a)?a:3e3,this.dryrun=r,this.deviceId=s,this.taClassName="HttpTaskDebug"}return u(e,[{key:"run",value:function(){var e=this,t="appid="+this.data["#app_id"]+"&source=client&dryRun="+this.dryrun+"&deviceId="+this.deviceId+"&data="+encodeURIComponent(JSON.stringify(this.data.data[0])),i=p.createExtraHeaders();i["content-type"]="application/x-www-form-urlencoded";var n=D.request({url:this.serverDebugUrl,method:"POST",data:t,header:i,success:function(t){e.onSuccess(t),clearTimeout(a)},fail:function(t){e.onFailed(t),clearTimeout(a)}}),a=setTimeout((function(){(p.isObject(n)||p.isPromise(n))&&p.isFunction(n.abort)&&n.abort()}),this.timeout)}},{key:"onSuccess",value:function(e){if(200===e.statusCode){var t;if(0===e.data.errorLevel)t="Verify data success.";else if(1===e.data.errorLevel){for(var i=e.data.errorProperties,n="",a=0;a<i.length;a++){var r=i[a].errorReason;n=n+" propertyName:"+i[a].propertyName+" errorReasons:"+r+"\n"}t="Debug data error. errorLevel:"+e.data.errorLevel+" reason:"+n}else 2!==e.data.errorLevel&&-1!==e.data.errorLevel||(t="Debug data error. errorLevel:"+e.data.errorLevel+" reason:"+e.data.errorReasons);b.info(""),this.callback({code:e.data.errorLevel,msg:t})}else this.callback({code:-3,msg:e.statusCode})}},{key:"onFailed",value:function(e){0<--this.tryCount?this.run():this.callback({code:-3,msg:e.errMsg})}}]),e}(),E=new(function(){function e(){o(this,e),this.items=[],this.isRunning=!1,this.showDebug=!1}return u(e,[{key:"enqueue",value:function(e,t,i,n){n=!(3<arguments.length&&void 0!==n)||n;var a=this;t="debug"===i.debugMode?new U(e,t,i.maxRetries,i.sendTimeout,0,i.deviceId,(function(e){a.isRunning=!1,p.isFunction(i.callback)&&i.callback(e),a._runNext(),!1===a.showDebug&&(0!==e.code&&1!==e.code&&2!==e.code||(a.showDebug=!0,p.isFunction(D.showDebugToast)&&D.showDebugToast("The current mode is Debug")))})):"debugOnly"===i.debugMode?new U(e,t,i.maxRetries,i.sendTimeout,1,i.deviceId,(function(e){a.isRunning=!1,p.isFunction(i.callback)&&i.callback(e),a._runNext(),!1===a.showDebug&&(0!==e.code&&1!==e.code&&2!==e.code||(a.showDebug=!0,p.isFunction(D.showDebugToast)&&D.showDebugToast("The current mode is debugOnly")))})):new F(JSON.stringify(e),t,i.maxRetries,i.sendTimeout,(function(e){a.isRunning=!1,p.isFunction(i.callback)&&i.callback(e),a._runNext()}));!0===n?(this.items.push(t),this._runNext()):t.run()}},{key:"_dequeue",value:function(){return this.items.shift()}},{key:"_runNext",value:function(){if(0<this.items.length&&!this.isRunning)if(this.isRunning=!0,"HttpTask"!==this.items[0].taClassName)this._dequeue().run();else{var e=this.items.splice(0,this.items.length),t=e[0],i=JSON.parse(t.data),n=i["#app_id"],a=[];a.push(t.callback);for(var r=1;r<e.length;r++){var s=e[r],o=JSON.parse(s.data);o["#app_id"]===n&&t.serverUrl===s.serverUrl?(i.data=i.data.concat(o.data),a.push(s.callback)):this.items.push(s)}var c=(new Date).getTime();i["#flush_time"]=c,new F(JSON.stringify(i),t.serverUrl,t.tryCount,t.timeout,(function(e){for(var t in a)Object.hasOwnProperty.call(a,t)&&(0,a[t])(e)})).run()}}}]),e}()),q={name:"thinkingdata",is_plugin:!1,maxRetries:3,sendTimeout:3e3,enablePersistence:!0,asyncPersistence:!1,enableLog:!0,strict:!1,debugMode:"none",enableCalibrationTime:!1},L={properties:{"#lib":h,"#lib_version":l},initDeviceId:function(e){p.isString(e)&&(this.properties["#device_id"]=e)},getSystemInfo:function(e){var t=this;D.onNetworkStatusChange((function(e){t.properties["#network_type"]=e.networkType})),D.getNetworkType({success:function(e){t.properties["#network_type"]=e.networkType},complete:function(){D.getSystemInfo({success:function(e){var i=e.system?e.system.replace(/\s+/g," ").split(" "):[];i={"#manufacturer":e.brand,"#device_model":e.model,"#screen_width":Number(e.screenWidth),"#screen_height":Number(e.screenHeight),"#os":i[0],"#os_version":i[1],"#mp_platform":e.mp_platform,"#system_language":e.systemLanguage};p.extend(t.properties,i),p.setMpPlatform(e.mp_platform)},complete:function(){e()}})}})}},J=function(){function e(t,i){var n=this;o(this,e),this.enabled=t.enablePersistence,this.enabled?(t.isChildInstance?(this.name=t.persistenceName+"_"+t.name,this.nameOld=t.persistenceNameOld+"_"+t.name):(this.name=t.persistenceName,this.nameOld=t.persistenceNameOld),t.asyncPersistence?(this._state={},D.getStorage(this.name,!0,(function(e){p.isEmptyObject(e)?D.getStorage(n.nameOld,!0,(function(e){n._state=p.extend2Layers({},e,n._state),n._init(t,i),n._save()})):(n._state=p.extend2Layers({},e,n._state),n._init(t,i),n._save())}))):(this._state=D.getStorage(this.name)||{},p.isEmptyObject(this._state)&&(this._state=D.getStorage(this.nameOld)||{}),this._init(t,i))):(this._state={},this._init(t,i))}return u(e,[{key:"_init",value:function(e,t){this.getDistinctId()||this.setDistinctId(p.UUID()),e.isChildInstance||(this.getDeviceId()||this._setDeviceId(p.UUID()),L.initDeviceId(this.getDeviceId())),this.initComplete=!0,"function"==typeof t&&t(),this._save()}},{key:"_save",value:function(){this.enabled&&this.initComplete&&D.setStorage(this.name,JSON.stringify(this._state))}},{key:"_set",value:function(e,t){var i,n=this;"string"==typeof e?(i={})[e]=t:"object"===s(e)&&(i=e),p.each(i,(function(e,t){n._state[t]=e})),this._save()}},{key:"_get",value:function(e){return this._state[e]}},{key:"setEventTimer",value:function(e,t){var i=this._state.event_timers||{};i[e]=t,this._set("event_timers",i)}},{key:"removeEventTimer",value:function(e){var t=(this._state.event_timers||{})[e];return p.isUndefined(t)||(delete this._state.event_timers[e],this._save()),t}},{key:"getDeviceId",value:function(){return this._state.device_id}},{key:"_setDeviceId",value:function(e){this.getDeviceId()?b.warn("cannot modify the device id."):this._set("device_id",e)}},{key:"getDistinctId",value:function(){return this._state.distinct_id}},{key:"setDistinctId",value:function(e){this._set("distinct_id",e)}},{key:"getAccountId",value:function(){return this._state.account_id}},{key:"setAccountId",value:function(e){this._set("account_id",e)}},{key:"getSuperProperties",value:function(){return this._state.props||{}}},{key:"setSuperProperties",value:function(e,t){e=t?e:p.extend(this.getSuperProperties(),e),this._set("props",e)}}]),e}(),R=function(){function e(t,i){o(this,e),this.config=t,this.ta=i,this.timer=null,this.batchConfig=p.extend({size:5,interval:5e3,storageLimit:200},this.config.batchConfig),this.batchConfig.size<1&&(this.batchConfig.size=1),30<this.batchConfig.size&&(this.batchConfig.size=30),this.tabKey="tab_tampsdk_"+this.config.appId,this.storageLimit=this.batchConfig.storageLimit,this.isRequest=!1,this.trackList=[],this.needFlush=!1}return u(e,[{key:"batchInterval",value:function(){var e=this;e.timer=setTimeout((function(){e.recycle(),e.send(),clearTimeout(e.timer),e.batchInterval()}),this.batchConfig.interval)}},{key:"add",value:function(e){if(this.isRequest)this.trackList.push(e);else{var t=e,i="tampsdk_"+this.config.appId+"_"+String(p.UUID());e=D.getStorage(this.tabKey);if(p.isArray(e)||(e=[]),e.length<=this.storageLimit)e.push(i),D.setStorage(this.tabKey,JSON.stringify(e)),D.setStorage(i,JSON.stringify(t));else{var n=e.splice(0,20);console.log("deleted events data:"+n),e.push(i),D.setStorage(this.tabKey,JSON.stringify(e)),D.setStorage(i,JSON.stringify(t));t={};for(var a=[],r=0;r<n.length;r++){var s=D.getStorage(n[r]);a.push(s)}t.data=a,t["#app_id"]=this.config.appId,this.request(t,n)}}}},{key:"flush",value:function(){clearTimeout(this.timer),this.send(),this.batchInterval()}},{key:"send",value:function(){if(this.isRequest)this.needFlush=!0;else{var e=D.getStorage(this.tabKey);if(e&&e.length){for(var t={},i=[],n=[],a=e.length<this.batchConfig.size?e.length:this.batchConfig.size,r=0;r<a;r++){var s=D.getStorage(e[r]);i.push(s),n.push(e[r])}t.data=i,t["#app_id"]=this.config.appId,this.request(t,n)}}}},{key:"request",value:function(e,t){var i=this;b.info(""),i.isRequest=!0,E.enqueue(e,this.ta.serverUrl,{maxRetries:this.config.maxRetries,sendTimeout:this.config.sendTimeout,callback:function(e){0===e.code&&i.remove(t),i.isRequest=!1;for(var n=0;n<i.trackList.length;n++)i.add(i.trackList[n]);i.trackList=[],i.needFlush&&(i.needFlush=!1,i.flush())},debugMode:this.config.debugMode,deviceId:this.ta.getDeviceId()})}},{key:"remove",value:function(e){var t=D.getStorage(this.tabKey);if(t){for(var i=0;i<e.length;i++){var n=p.indexOf(t,e[i]);-1<n&&t.splice(n,1),D.removeStorage(e[i])}D.setStorage(this.tabKey,JSON.stringify(t))}}},{key:"recycle",value:function(){}}]),e}(),H=function(){function e(t){o(this,e),t.appId=t.appId?p.checkAppId(t.appId):p.checkAppId(t.appid),t.serverUrl=t.serverUrl?p.checkUrl(t.serverUrl):p.checkUrl(t.server_url);var i=p.extend({},q,D.getConfig());p.isObject(t)?this.config=p.extend(i,t):this.config=i,this._init(this.config)}return u(e,[{key:"_init",value:function(e){var t=this;this.name=e.name,this.appId=e.appId||e.appid;var i=e.serverUrl||e.server_url;this.serverUrl=i+"/sync_xcx",this.serverDebugUrl=i+"/data_debug",this.configUrl=i+"/config",this.autoTrackProperties={},this._queue=[],this.updateConfig(this.configUrl,this.appId),e.isChildInstance?this._state={}:(b.enabled=e.enableLog,this.instances=[],this._state={getSystemInfo:!1,initComplete:!1},D.setGlobal(this,this.name)),this.store=new J(e,(function(){t.config.asyncPersistence&&p.isFunction(t.config.persistenceComplete)&&t.config.persistenceComplete(t),t._updateState()})),this.enabled=!p.isBoolean(this.store._get("ta_enabled"))||this.store._get("ta_enabled"),this.isOptOut=!!p.isBoolean(this.store._get("ta_isOptOut"))&&this.store._get("ta_isOptOut"),!e.isChildInstance&&e.autoTrack&&(this.autoTrack=D.initAutoTrackInstance(this,e)),void 0!==this.config.enableBatch&&!1!==this.config.enableBatch&&(this.batchConsumer=new R(this.config,this),this.batchConsumer.batchInterval())}},{key:"initSystemInfo",value:function(){var e=this;this.config.isChildInstance||L.getSystemInfo((function(){e._updateState({getSystemInfo:!0})}))}},{key:"updateConfig",value:function(e,t){var i=this,n=p.createExtraHeaders();n["content-type"]="application/json";var a=D.request({url:e+"?appid="+t,method:"GET",header:n,success:function(e){p.isUndefined(e)||p.isUndefined(e.data)||(b.info(""),p.isUndefined(e.data.data)||(i.config.syncBatchSize=e.data.data.sync_batch_size,i.config.syncInterval=e.data.data.sync_interval,i.config.disableEventList=e.data.data.disable_event_list,p.isUndefined(e.data.data.secret_key)||(e=e.data.data.secret_key,i.config.secretKey={publicKey:e.key,version:e.version})))},fail:function(e){b.info("")}});setTimeout((function(){(p.isObject(a)||p.isPromise(a))&&p.isFunction(a.abort)&&a.abort()}),3e3)}},{key:"initInstance",value:function(t,i){if(this.config.isChildInstance)b.warn("initInstance() cannot be called on child instance");else{if(p.isString(t)&&t!==this.name&&p.isUndefined(this[t]))return i=new e(p.extend({},this.config,{enablePersistence:!1,isChildInstance:!0,name:t},i)),this[t]=i,this.instances.push(t),this[t]._state=this._state,i;b.warn("initInstance() failed due to the name is invalid: "+t)}}},{key:"lightInstance",value:function(e){return this[e]}},{key:"_setAutoTrackProperties",value:function(e){p.extend(this.autoTrackProperties,e)}},{key:"init",value:function(){if(this.initSystemInfo(),this._state.initComplete)return!1;this._updateState({initComplete:!0}),b.info("")}},{key:"_isReady",value:function(){return this._state.getSystemInfo&&this._state.initComplete&&this.store.initComplete&&this.getDeviceId()}},{key:"_updateState",value:function(e){var t=this;p.isObject(e)&&p.extend(this._state,e),this._onStateChange(),p.each(this.instances,(function(e){t[e]._onStateChange()}))}},{key:"_onStateChange",value:function(){var e=this;this._isReady()&&this._queue&&0<this._queue.length&&(p.each(this._queue,(function(t){e[t[0]].apply(e,g.call(t[1]))})),this._queue=[])}},{key:"_hasDisabled",value:function(){var e=!this.enabled||this.isOptOut;return e&&b.info(""),e}},{key:"_sendRequest",value:function(e,t,i){if(!this._hasDisabled())if(p.isUndefined(this.config.disableEventList)||!this.config.disableEventList.includes(e.eventName)){t=p.isDate(t)?t:new Date;var n={data:[{"#type":e.type,"#time":p.formatDate(t),"#distinct_id":this.store.getDistinctId()}]};this.store.getAccountId()&&(n.data[0]["#account_id"]=this.store.getAccountId()),"track"===e.type||"track_update"===e.type||"track_overwrite"===e.type?(n.data[0]["#event_name"]=e.eventName,"track_update"===e.type||"track_overwrite"===e.type?n.data[0]["#event_id"]=e.extraId:e.firstCheckId&&(n.data[0]["#first_check_id"]=e.firstCheckId),n.data[0].properties=p.extend({"#zone_offset":0-t.getTimezoneOffset()/60},L.properties,this.autoTrackProperties,this.store.getSuperProperties(),this.dynamicProperties?this.dynamicProperties():{}),t=this.store.removeEventTimer(e.eventName),p.isUndefined(t)||(a=(new Date).getTime()-t,86400<(a=parseFloat((a/1e3).toFixed(3)))?a=86400:a<0&&(a=0),n.data[0].properties["#duration"]=a)):n.data[0].properties={},p.isObject(e.properties)&&!p.isEmptyObject(e.properties)&&p.extend(n.data[0].properties,e.properties),p.searchObjDate(n.data[0]),1<this.config.maxRetries&&(n.data[0]["#uuid"]=p.UUIDv4()),n["#app_id"]=this.appId,b.info("");var a="debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?this.serverDebugUrl:this.serverUrl;if(p.isBoolean(this.config.enableEncrypt)&&!0===this.config.enableEncrypt&&(n.data[0]=p.generateEncryptyData(n.data[0],this.config.secretKey)),this.batchConsumer&&"none"===this.config.debugMode&&!i)return this.batchConsumer.add(n.data[0]),void(p.isFunction(e.onComplete)&&e.onComplete({code:0,msg:"success"}));i?(i=new FormData,"debug"===this.config.debugMode||"debugOnly"===this.config.debugMode?(i.append("source","client"),i.append("appid",this.appId),i.append("dryRun","debugOnly"===this.config.debugMode?1:0),i.append("deviceId",this.getDeviceId()),i.append("data",JSON.stringify(n.data[0])),navigator.sendBeacon(a,i)):(i=(new Date).getTime(),n["#flush_time"]=i,navigator.sendBeacon(a,JSON.stringify(n))),p.isFunction(e.onComplete)&&e.onComplete({statusCode:200})):E.enqueue(n,a,{maxRetries:this.config.maxRetries,sendTimeout:this.config.sendTimeout,callback:e.onComplete,debugMode:this.config.debugMode,deviceId:this.getDeviceId()})}else b.info("")}},{key:"_isObjectParams",value:function(e){return p.isObject(e)&&p.isFunction(e.onComplete)}},{key:"track",value:function(e,t,i,n){var a;this._hasDisabled()||(this._isObjectParams(e)&&(e=(a=e).eventName,t=a.properties,i=a.time,n=a.onComplete),M.event(e)&&M.properties(t)||!this.config.strict?this._internalTrack(e,t,i,n):p.isFunction(n)&&n({code:-1,msg:"invalid parameters"}))}},{key:"trackUpdate",value:function(e){var t,i;this._hasDisabled()||(e&&e.eventId&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track_update",eventName:e.eventName,properties:t,onComplete:e.onComplete,extraId:e.eventId},i)):this._queue.push(["trackUpdate",[e]]):(b.warn("Invalide parameter for trackUpdate: you should pass an object contains eventId to trackUpdate()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackOverwrite",value:function(e){var t,i;this._hasDisabled()||(e&&e.eventId&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track_overwrite",eventName:e.eventName,properties:t,onComplete:e.onComplete,extraId:e.eventId},i)):this._queue.push(["trackOverwrite",[e]]):(b.warn("Invalide parameter for trackOverwrite: you should pass an object contains eventId to trackOverwrite()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"trackFirstEvent",value:function(e){var t,i;this._hasDisabled()||(e&&e.eventName&&(M.event(e.eventName)&&M.properties(e.properties)||!this.config.strict)?this._isReady()?(t=p.checkCalibration(e.properties,e.time,this.config.enableCalibrationTime),i=p.isDate(e.time)?e.time:new Date,this._sendRequest({type:"track",eventName:e.eventName,properties:t,onComplete:e.onComplete,firstCheckId:e.firstCheckId||this.getDeviceId()},i)):this._queue.push(["trackFirstEvent",[e]]):(b.warn("Invalide parameter for trackFirstEvent: you should pass an object contains eventName to trackFirstEvent()"),p.isFunction(e.onComplete)&&e.onComplete({code:-1,msg:"invalid parameters"})))}},{key:"_internalTrack",value:function(e,t,i,n,a){var r;this._hasDisabled()||(r=p.checkCalibration(t,i,this.config.enableCalibrationTime),i=p.isDate(i)?i:new Date,this._isReady()?this._sendRequest({type:"track",eventName:e,properties:r,onComplete:n},i,a):this._queue.push(["_internalTrack",[e,t,i,n]]))}},{key:"userSet",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.propertiesMust(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_set",properties:e,onComplete:i},t):this._queue.push(["userSet",[e,t,i]])):(b.warn("calling userSet failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userSetOnce",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.propertiesMust(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_setOnce",properties:e,onComplete:i},t):this._queue.push(["userSetOnce",[e,t,i]])):(b.warn("calling userSetOnce failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userUnset",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(n)&&(e=n.property,t=n.time,i=n.onComplete),M.propertyName(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?((n={})[e]=0,this._sendRequest({type:"user_unset",properties:n,onComplete:i},t)):this._queue.push(["userUnset",[e,i,t]])):(b.warn("calling userUnset failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userDel",value:function(e,t){var i;this._hasDisabled()||(this._isObjectParams(e)&&(e=(i=e).time,t=i.onComplete),e=p.isDate(e)?e:new Date,this._isReady()?this._sendRequest({type:"user_del",onComplete:t},e):this._queue.push(["userDel",[e,t]]))}},{key:"userAdd",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAddProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_add",properties:e,onComplete:i},t):this._queue.push(["userAdd",[e,t,i]])):(b.warn("calling userAdd failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userAppend",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAppendProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_append",properties:e,onComplete:i},t):this._queue.push(["userAppend",[e,t,i]])):(b.warn("calling userAppend failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"userUniqAppend",value:function(e,t,i){var n;this._hasDisabled()||(this._isObjectParams(e)&&(e=(n=e).properties,t=n.time,i=n.onComplete),M.userAppendProperties(e)||!this.config.strict?(t=p.isDate(t)?t:new Date,this._isReady()?this._sendRequest({type:"user_uniq_append",properties:e,onComplete:i},t):this._queue.push(["userUniqAppend",[e,t,i]])):(b.warn("calling userAppend failed due to invalid arguments"),p.isFunction(i)&&i({code:-1,msg:"invalid parameters"})))}},{key:"flush",value:function(){this.batchConsumer&&"none"===this.config.debugMode&&this.batchConsumer.flush()}},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){if(!this._hasDisabled()){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setDistinctId(e),b.info("")}}},{key:"getDistinctId",value:function(){return this.store.getDistinctId()}},{key:"login",value:function(e){if(!this._hasDisabled()){if("number"==typeof e)e=String(e);else if("string"!=typeof e)return!1;this.store.setAccountId(e),b.info("")}}},{key:"getAccountId",value:function(){return this.store.getAccountId()}},{key:"logout",value:function(){this._hasDisabled()||(this.store.setAccountId(null),b.info(""))}},{key:"setSuperProperties",value:function(e){this._hasDisabled()||(M.propertiesMust(e)||!this.config.strict?this.store.setSuperProperties(e):b.warn("setSuperProperties parameter must be a valid property value"))}},{key:"clearSuperProperties",value:function(){this._hasDisabled()||this.store.setSuperProperties({},!0)}},{key:"unsetSuperProperty",value:function(e){var t;this._hasDisabled()||p.isString(e)&&(delete(t=this.getSuperProperties())[e],this.store.setSuperProperties(t,!0))}},{key:"getSuperProperties",value:function(){return this.store.getSuperProperties()}},{key:"getPresetProperties",value:function(){var e=L.properties,t={},i=e["#os"];t.os=p.isUndefined(i)?"":i,i=e["#screen_width"],t.screenWidth=p.isUndefined(i)?0:i,i=e["#screen_height"],t.screenHeight=p.isUndefined(i)?0:i,i=e["#network_type"],t.networkType=p.isUndefined(i)?"":i,i=e["#device_model"],t.deviceModel=p.isUndefined(i)?"":i,i=e["#os_version"],t.osVersion=p.isUndefined(i)?"":i,t.deviceId=this.getDeviceId();var n=0-(new Date).getTimezoneOffset()/60;return t.zoneOffset=n,e=e["#manufacturer"],t.manufacturer=p.isUndefined(e)?"":e,t.toEventPresetProperties=function(){return{"#device_model":t.deviceModel,"#device_id":t.deviceId,"#screen_width":t.screenWidth,"#screen_height":t.screenHeight,"#os":t.os,"#os_version":t.osVersion,"#network_type":t.networkType,"#zone_offset":n,"#manufacturer":t.manufacturer}},t}},{key:"setDynamicSuperProperties",value:function(e){this._hasDisabled()||("function"==typeof e?M.properties(e())||!this.config.strict?this.dynamicProperties=e:b.warn("A dynamic public property must return a valid property value"):b.warn("setDynamicSuperProperties parameter must be a function type"))}},{key:"timeEvent",value:function(e,t){this._hasDisabled()||(t=p.isDate(t)?t:new Date,this._isReady()?M.event(e)||!this.config.strict?this.store.setEventTimer(e,t.getTime()):b.warn("calling timeEvent failed due to invalid eventName: "+e):this._queue.push(["timeEvent",[e,t]]))}},{key:"getDeviceId",value:function(){return L.properties["#device_id"]}},{key:"enableTracking",value:function(e){this.enabled=e,this.store._set("ta_enabled",e)}},{key:"optOutTracking",value:function(){this.store.setSuperProperties({},!0),this.store.setDistinctId(p.UUID()),this.store.setAccountId(null),this._queue.splice(0,this._queue.length),this.isOptOut=!0,this.store._set("ta_isOptOut",!0)}},{key:"optOutTrackingAndDeleteUser",value:function(){var e=new Date;this._sendRequest({type:"user_del"},e),this.optOutTracking()}},{key:"optInTracking",value:function(){this.isOptOut=!1,this.store._set("ta_isOptOut",!1)}},{key:"setTrackStatus",value:function(e){switch(e){case"PAUSE":this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!1);break;case"STOP":this.eventSaveOnly=!1,this.optOutTracking(!0);break;case"SAVE_ONLY":break;case"NORMAL":default:this.eventSaveOnly=!1,this.optInTracking(),this.enableTracking(!0)}b.info("")}}]),e}(),G={name:"thinkingdata",enableLog:!0,enableNative:!1},V=function(){function e(t){o(this,e),t.appId=t.appId?p.checkAppId(t.appId):p.checkAppId(t.appid),t.serverUrl=t.serverUrl?p.checkUrl(t.serverUrl):p.checkUrl(t.server_url);var i=p.extend({},G,D.getConfig());p.isObject(t)?this.config=p.extend(i,t):this.config=i,this._init(this.config)}return u(e,[{key:"_isNativePlatform",value:function(){return!(!this._isIOS()&&!this._isAndroid()||!this.config.enableNative)}},{key:"_isIOS",value:function(){return!(!cc.sys.isNative||"iOS"!==cc.sys.os)}},{key:"_isAndroid",value:function(){return!(!cc.sys.isNative||"Android"!==cc.sys.os)}},{key:"_init",value:function(e){this.name=e.name,this.appId=e.appId||e.appid,this._isNativePlatform()?(this.initInstanceForNative(e),this._readStorage(e)):this.taJs=new ThinkingAnalyticsAPIForJS(e)}},{key:"_readStorage",value:function(e){var t=this,i=e.persistenceName,n=e.persistenceNameOld;e.isChildInstance&&(i=e.persistenceName+"_"+e.name,n=e.persistenceNameOld+"_"+e.name),this._state=D.getStorage(i)||{},p.isEmptyObject(this._state)&&(this._state=D.getStorage(n)||{}),p.isEmptyObject(this._state)?D.getStorage(i,!0,(function(e){p.isEmptyObject(e)?D.getStorage(n,!0,(function(e){t._state=p.extend2Layers({},e,t._state)})):t._state=p.extend2Layers({},e,t._state),t._state.distinct_id&&t.identifyForNative(t._state.distinct_id),t._state.account_id&&t.loginForNative(t._state.account_id)})):(this._state.distinct_id&&this.identifyForNative(this._state.distinct_id),this._state.account_id&&this.loginForNative(this._state.account_id))}},{key:"initInstance",value:function(e,t){return this._isNativePlatform()?p.isUndefined(t)?this[e]=new ThinkingAnalyticsAPI(this.config):this[e]=new ThinkingAnalyticsAPI(t):this[e]=this.taJs.initInstance(e,t),this[e]}},{key:"lightInstance",value:function(){return this._isNativePlatform()?this.lightInstanceForNative(this.appId):this}},{key:"init",value:function(){if(this._isNativePlatform()){var e=window,t=this;return e.__autoTrackCallback=function(e){return p.isFunction(t.config.autoTrack.callback)?(e=t.config.autoTrack.callback(e),JSON.stringify(e)):"{}"},void this.startThinkingAnalyticsForNative(this.appId)}this.taJs.init()}},{key:"track",value:function(e,t,i,n){this._isNativePlatform()?this.trackForNative(e,t,i,this.appId):this.taJs.track(e,t,i,n)}},{key:"trackUpdate",value:function(e){this._isNativePlatform()?this.trackUpdateForNative(e,this.appId):this.taJs.trackUpdate(e)}},{key:"trackOverwrite",value:function(e){this._isNativePlatform()?this.trackOverwriteForNative(e,this.appId):this.taJs.trackOverwrite(e)}},{key:"trackFirstEvent",value:function(e){this._isNativePlatform()?this.trackFirstEventForNative(e,this.appId):this.taJs.trackFirstEvent(e)}},{key:"userSet",value:function(e,t,i){this._isNativePlatform()?this.userSetForNative(e,this.appId):this.taJs.userSet(e,t,i)}},{key:"userSetOnce",value:function(e,t,i){this._isNativePlatform()?this.userSetOnceForNative(e,this.appId):this.taJs.userSetOnce(e,t,i)}},{key:"userUnset",value:function(e,t,i){this._isNativePlatform()?this.userUnsetForNative(e,this.appId):this.taJs.userUnset(e,t,i)}},{key:"userDel",value:function(e,t){this._isNativePlatform()?this.userDelForNative(this.appId):this.taJs.userDel(e,t)}},{key:"userAdd",value:function(e,t,i){this._isNativePlatform()?this.userAddForNative(e,this.appId):this.taJs.userAdd(e,t,i)}},{key:"userAppend",value:function(e,t,i){this._isNativePlatform()?this.userAppendForNative(e,this.appId):this.taJs.userAppend(e,t,i)}},{key:"userUniqAppend",value:function(e,t,i){this._isNativePlatform()?this.userUniqAppendForNative(e,this.appId):this.taJs.userUniqAppend(e,t,i)}},{key:"flush",value:function(){this._isNativePlatform()?this.flushForNative(this.appId):this.taJs.flush()}},{key:"authorizeOpenID",value:function(e){this.identify(e)}},{key:"identify",value:function(e){this._isNativePlatform()?this.identifyForNative(e,this.appId):this.taJs.identify(e)}},{key:"getDistinctId",value:function(){return this._isNativePlatform()?this.getDistinctIdForNative(this.appId):this.taJs.getDistinctId()}},{key:"login",value:function(e){this._isNativePlatform()?this.loginForNative(e,this.appId):this.taJs.login(e)}},{key:"getAccountId",value:function(){return this._isNativePlatform()?this.getAccountIdForNative(this.appId):this.taJs.getAccountId()}},{key:"logout",value:function(){this._isNativePlatform()?this.logoutForNative(this.appId):this.taJs.logout()}},{key:"setSuperProperties",value:function(e){this._isNativePlatform()?this.setSuperPropertiesForNative(e,this.appId):this.taJs.setSuperProperties(e)}},{key:"clearSuperProperties",value:function(){this._isNativePlatform()?this.clearSuperPropertiesForNative(this.appId):this.taJs.clearSuperProperties()}},{key:"unsetSuperProperty",value:function(e){this._isNativePlatform()?this.unsetSuperPropertyForNative(e,this.appId):this.taJs.unsetSuperProperty(e)}},{key:"getSuperProperties",value:function(){return this._isNativePlatform()?this.getSuperPropertiesForNative(this.appId):this.taJs.getSuperProperties()}},{key:"getPresetProperties",value:function(){if(this._isNativePlatform()){var e=this.getPresetPropertiesForNative(this.appId),t={},i=e["#os"];t.os=p.isUndefined(i)?"":i,i=e["#screen_width"],t.screenWidth=p.isUndefined(i)?0:i,i=e["#screen_height"],t.screenHeight=p.isUndefined(i)?0:i,i=e["#network_type"],t.networkType=p.isUndefined(i)?"":i,i=e["#device_model"],t.deviceModel=p.isUndefined(i)?"":i,i=e["#os_version"],t.osVersion=p.isUndefined(i)?"":i,t.deviceId=this.getDeviceId();var n=0-(new Date).getTimezoneOffset()/60;return t.zoneOffset=n,e=e["#manufacturer"],t.manufacturer=p.isUndefined(e)?"":e,t.toEventPresetProperties=function(){return{"#device_model":t.deviceModel,"#device_id":t.deviceId,"#screen_width":t.screenWidth,"#screen_height":t.screenHeight,"#os":t.os,"#os_version":t.osVersion,"#network_type":t.networkType,"#zone_offset":n,"#manufacturer":t.manufacturer}},t}return this.taJs.getPresetProperties()}},{key:"setDynamicSuperProperties",value:function(e){this._isNativePlatform()?"function"==typeof e?(this.dynamicProperties=e,window.__dynamicPropertiesForNative=function(t){return console.log("__dynamicPropertiesForNative: native msg: ",t),t=e(),t=p.encodeDates(t),JSON.stringify(t)},this.setDynamicSuperPropertiesForNative("__dynamicPropertiesForNative")):logger.warn("setDynamicSuperProperties parameter must be a function type"):this.taJs.setDynamicSuperProperties(e)}},{key:"timeEvent",value:function(e,t){return this._isNativePlatform()?this.timeEventForNative(e,this.appId):this.taJs.timeEvent(e,t)}},{key:"getDeviceId",value:function(){return this._isNativePlatform()?this.getDeviceIdForNative(this.appId):this.taJs.getDeviceId()}},{key:"enableTracking",value:function(e){this._isNativePlatform()?this.enableTrackingForNative(e,this.appId):this.taJs.enableTracking(e)}},{key:"optOutTracking",value:function(){this._isNativePlatform()?this.optOutTrackingForNative(this.appId):this.taJs.optOutTracking()}},{key:"optOutTrackingAndDeleteUser",value:function(){this._isNativePlatform()?this.optOutTrackingAndDeleteUserForNative(this.appId):this.taJs.optOutTrackingAndDeleteUser()}},{key:"optInTracking",value:function(){this._isNativePlatform()?this.optInTrackingForNative(this.appId):this.taJs.optInTracking()}},{key:"setTrackStatus",value:function(e){this._isNativePlatform()?this.setTrackStatusForNative(e,this.appId):this.taJs.setTrackStatus(e)}},{key:"trackForNative",value:function(e,t,i,n){i=p.isDate(i)?p.formatDate(i):"",p.isUndefined(t)&&(t={}),t=p.extend(t,this.dynamicProperties?this.dynamicProperties():{}),t=p.encodeDates(t),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","track","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,JSON.stringify(t),i,n):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","track:properties:time:appId:",e,JSON.stringify(t),i,n)}},{key:"trackUpdateForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackUpdate","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackUpdate:appId:",JSON.stringify(e),t)}},{key:"trackFirstEventForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackFirstEvent","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackFirstEvent:appId:",JSON.stringify(e),t)}},{key:"trackOverwriteForNative",value:function(e,t){e.properties=p.extend(p.isUndefined(e.properties)?{}:e.properties,this.dynamicProperties?this.dynamicProperties():{}),e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","trackOverwrite","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","trackOverwrite:appId:",JSON.stringify(e),t)}},{key:"timeEventForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","timeEvent","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","timeEvent:appId:",e,t)}},{key:"loginForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","login","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","login:appId:",e,t)}},{key:"logoutForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","logout","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","logout:",e)}},{key:"setSuperPropertiesForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setSuperProperties:appId:",JSON.stringify(e),t)}},{key:"getSuperPropertiesForNative",value:function(e){var t="{}";return this._isAndroid()?t=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getSuperProperties","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()&&(t=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getSuperProperties:",e)),JSON.parse(t)}},{key:"unsetSuperPropertyForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","unsetSuperProperty","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","unsetSuperProperty:appId:",e,t)}},{key:"clearSuperPropertiesForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","clearSuperProperties","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","clearSuperProperties:",e)}},{key:"userSetForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSet","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSet:appId:",JSON.stringify(e),t)}},{key:"userSetOnceForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userSetOnce","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userSetOnce:appId:",JSON.stringify(e),t)}},{key:"userAppendForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAppend:appId:",JSON.stringify(e),t)}},{key:"userUniqAppendForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUniqAppend","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUniqAppend:appId:",JSON.stringify(e),t)}},{key:"userAddForNative",value:function(e,t){e=p.encodeDates(e),this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userAdd","(Ljava/lang/String;Ljava/lang/String;)V",JSON.stringify(e),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userAdd:appId:",JSON.stringify(e),t)}},{key:"userUnsetForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userUnset","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userUnset:appId:",e,t)}},{key:"userDelForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","userDel","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","userDel:",e)}},{key:"flushForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","flush","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","flush:",e)}},{key:"authorizeOpenIDForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","authorizeOpenID","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","authorizeOpenID:appId:",e,t)}},{key:"identifyForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","identify","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","identify:appId:",e,t)}},{key:"initInstanceForNative",value:function(e){this._isAndroid()?(jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setCustomerLibInfo","(Ljava/lang/String;Ljava/lang/String;)V",h,l),jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","initWithConfig","(Ljava/lang/String;)V",JSON.stringify(e))):this._isIOS()&&(jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setCustomerLibInfoWithLibName:libVersion:",h,l),jsb.reflection.callStaticMethod("CocosCreatorProxyApi","initWithConfig:",JSON.stringify(e)))}},{key:"lightInstanceForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","lightInstance","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","lightInstance:",e):void 0}},{key:"startThinkingAnalyticsForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","startThinkingAnalytics","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","startThinkingAnalytics:",e)}},{key:"setDynamicSuperPropertiesForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setDynamicSuperProperties","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setDynamicSuperProperties:appId:",e,t)}},{key:"getDeviceIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDeviceId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDeviceId:",e):void 0}},{key:"getDistinctIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getDistinctId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getDistinctId:",e):void 0}},{key:"getAccountIdForNative",value:function(e){return this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getAccountId","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()?jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getAccountId:",e):void 0}},{key:"getPresetPropertiesForNative",value:function(e){var t="{}";return this._isAndroid()?t=jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","getPresetProperties","(Ljava/lang/String;)Ljava/lang/String;",e):this._isIOS()&&(t=jsb.reflection.callStaticMethod("CocosCreatorProxyApi","getPresetProperties:",e)),JSON.parse(t)}},{key:"enableTrackingForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","enableTracking","(Ljava/lang/String;Ljava/lang/String;)V",e.toString(),t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","enableTracking:appId:",e.toString(),t)}},{key:"optOutTrackingForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTracking","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTracking:",e)}},{key:"optOutTrackingAndDeleteUserForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optOutTrackingAndDeleteUser","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optOutTrackingAndDeleteUser:",e)}},{key:"optInTrackingForNative",value:function(e){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","optInTracking","(Ljava/lang/String;)V",e):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","optInTracking:",e)}},{key:"setTrackStatusForNative",value:function(e,t){this._isAndroid()?jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi","setTrackStatus","(Ljava/lang/String;Ljava/lang/String;)V",e,t):this._isIOS()&&jsb.reflection.callStaticMethod("CocosCreatorProxyApi","setTrackStatus:appId:",e,t)}}]),e}();window.ThinkingAnalyticsAPI=V,window.ThinkingAnalyticsAPIForJS=H;var z=function(){function e(){o(this,e)}return u(e,null,[{key:"_shareInstance",value:function(e){return void 0!==this._instanceMaps[e]?this._instanceMaps[e]:void 0!==this._defaultInstance?this._defaultInstance:void 0}},{key:"init",value:function(e){var t=new V(e);t.init(),void 0!==t&&(void 0===this._defaultInstance&&(this._defaultInstance=t,this._instanceMaps={}),this._instanceMaps[e.appId]=t)}},{key:"lightInstance",value:function(e){return this._shareInstance(e).lightInstance()}},{key:"track",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).track(e.eventName,e.properties,e.time,e.onComplete)}},{key:"trackFirst",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackFirstEvent(e)}},{key:"trackUpdate",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackUpdate(e)}},{key:"trackOverwrite",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).trackOverwrite(e)}},{key:"timeEvent",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).timeEvent(e.eventName,e.time)}},{key:"userSet",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userSet(e.properties,e.time,e.onComplete)}},{key:"userSetOnce",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userSetOnce(e.properties,e.time,e.onComplete)}},{key:"userUnset",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userUnset(e.property,e.time,e.onComplete)}},{key:"userAdd",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userAdd(e.properties,e.time,e.onComplete)}},{key:"userAppend",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userAppend(e.properties,e.time,e.onComplete)}},{key:"userUniqAppend",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userUniqAppend(e.properties,e.time,e.onComplete)}},{key:"userDelete",value:function(e,t){e=0<arguments.length&&void 0!==e?e:{},t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).userDel(e.time,e.onComplete)}},{key:"setSuperProperties",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setSuperProperties(e)}},{key:"unsetSuperProperty",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).unsetSuperProperty(e)}},{key:"clearSuperProperties",value:function(e){this._shareInstance(e).clearSuperProperties()}},{key:"getSuperProperties",value:function(e){return this._shareInstance(e).getSuperProperties()}},{key:"setDynamicSuperProperties",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setDynamicSuperProperties(e)}},{key:"getPresetProperties",value:function(e){return this._shareInstance(e).getPresetProperties()}},{key:"login",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).login(e)}},{key:"logout",value:function(e){this._shareInstance(e).logout()}},{key:"setDistinctId",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).identify(e)}},{key:"getDistinctId",value:function(e){return this._shareInstance(e).getDistinctId()}},{key:"getSDKVersion",value:function(){return"1.0.0"}},{key:"getDeviceId",value:function(e){return this._shareInstance(e).getDeviceId()}},{key:"flush",value:function(e){this._shareInstance(e).flush()}},{key:"setTrackStatus",value:function(e,t){t=1<arguments.length&&void 0!==t?t:"",this._shareInstance(t).setTrackStatus(e)}},{key:"ThinkingDataAPI",value:function(){return V}}]),e}();window.TDAnalytics=z,n.exports=z,e("default",n.exports)}),{})}}}));

System.register("chunks:///_virtual/tdanalytics.mg.cocoscreator.min.mjs_cjs=&original=.js",["./tdanalytics.mg.cocoscreator.min.js","./cjs-loader.mjs"],(function(t,a){var c,e;return{setters:[function(a){c=a.__cjsMetaURL;var e={};e.__cjsMetaURL=a.__cjsMetaURL,e.default=a.default,t(e)},function(t){e=t.default}],execute:function(){c||e.throwInvalidWrapper("./tdanalytics.mg.cocoscreator.min.js",a.meta.url),e.require(c)}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtil.ts"],(function(e){var t,i,s,n,r,o;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){s=e.cclegacy,n=e.game,r=e.Component},function(e){o=e.StringUtil}],execute:function(){s._RF.push({},"f678dptKvFNi6InSQq+ppWG","TimerManager",void 0);e("TimerManager",function(e){function i(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).times={},t.date_s=new Date,t.date_s_start=new Date,t.polymeric_s=0,t.date_c=new Date,t}t(i,e);var s=i.prototype;return s.update=function(e){for(var t in this.times){var i=this.times[t];i.timer.update(e)&&i.object[i.field]>0&&(i.object[i.field]--,0==i.object[i.field]?this.onTimerComplete(i):i.onSecond&&i.onSecond.call(i.object))}},s.onTimerComplete=function(e){e.onComplete&&e.onComplete.call(e.object),e.event&&this.node.dispatchEvent(e.event),delete this.times[e.id]},s.register=function(e,t,i,s){var n=new a;n.step=1;var r={};return r.id=o.guid(),r.timer=n,r.object=e,r.field=t,r.onSecond=i,r.onComplete=s,this.times[r.id]=r,r.id},s.unRegister=function(e){this.times[e]&&delete this.times[e]},s.setServerTime=function(e){this.polymeric_s=this.getTime(),this.date_s_start.setTime(e)},s.getServerTime=function(){return this.date_s_start.getTime()+this.getTime()-this.polymeric_s},s.getServerDate=function(){return this.date_s.setTime(this.getServerTime()),this.date_s},s.getClientTime=function(){return Date.now()},s.getClientDate=function(){return this.date_c.setTime(this.getClientTime()),this.date_c},s.getTime=function(){return n.totalTime},s.save=function(){for(var e in this.times)this.times[e].startTime=this.getTime()},s.load=function(){for(var e in this.times){var t=Math.floor((this.getTime()-(this.times[e].startTime||this.getTime()))/1e3),i=this.times[e];i.object[i.field]=i.object[i.field]-t,i.object[i.field]<=0?(i.object[i.field]=0,this.onTimerComplete(i)):this.times[e].startTime=null}},i}(r));var a=e("Timer",function(){function e(e){void 0===e&&(e=0),this.callback=null,this._elapsedTime=0,this._step=-1,this.step=e}var t=e.prototype;return t.update=function(e){return!(this.step<=0)&&(this._elapsedTime+=e,this._elapsedTime>=this._step&&(this._elapsedTime-=this._step,null==(t=this.callback)||t.call(this),!0));var t},t.reset=function(){this._elapsedTime=0},t.stop=function(){this._elapsedTime=0,this.step=-1},i(e,[{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"step",get:function(){return this._step},set:function(e){this._step=e,this._elapsedTime=0}},{key:"progress",get:function(){return this._elapsedTime/this._step}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TimeUtil.ts",["cc","./NumberUtil.ts"],(function(t){var e,r;return{setters:[function(t){e=t.cclegacy},function(t){r=t.number_util}],execute:function(){e._RF.push({},"6d030jhh2dOdYStStZGn8Ze","TimeUtil",void 0);var i=t("TimeUtil",function(){function t(){}var e=t.prototype;return e.timeStampToDuration=function(t,e){void 0===e&&(e=1);var i=Math.floor(t/1e3),n=Math.floor(i/3600);n=r.fillNum(n,2);var o=Math.floor(i%3600/60);o=r.fillNum(o,2);var u=i%3600%60;u=r.fillNum(u,2);var a="";return 1==e?a=n+"小时"+o+"分"+u+"秒":2==e&&(a=n+":"+o+":"+u),a},e.getCurrFormatTime=function(t){void 0===t&&(t="yyyy-MM-dd hh:mm:ss");var e=new Date;return this.formatTime(e,t)},e.timeStampToDate=function(t,e,r){void 0===e&&(e="yyyy-MM-dd hh:mm:ss"),void 0===r&&(r=!1);var i=new Date(t);return this.formatTime(i,e,r)},e.formatTime=function(t,e,i){void 0===e&&(e="yyyy-MM-dd hh:mm:ss"),void 0===i&&(i=!1);for(var n=0,o=0,u=0;u<e.length;u++){var a=e[u];"M"==a&&n++,"d"==a&&o++}var l=t.getFullYear().toString(),m=t.getMonth(),s=t.getDate(),h={"M+":r.fillNum(m+1,n),"d+":r.fillNum(s,o),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};i&&(l=(~~l-1970).toString(),h["M+"]=(~~h["M+"]-1).toString(),h["d+"]=(~~h["d+"]-1).toString(),h["q+"]=h["q+"]-8,h["h+"]=h["h+"]-8);for(var f in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,l.substr(4-RegExp.$1.length))),h)new RegExp("("+f+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?h[f]:("00"+h[f]).substr((""+h[f]).length)));return e},t}());t("timeUtil",new i);e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-renderer.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"fde9fE7dZFPk50Ja2o3Z1nF","ui-renderer",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ui-transform.ts",["cc"],(function(){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.UITransform}],execute:function(){t._RF.push({},"3a4815a7zVMI5bpd6WmADYr","ui-transform",void 0),"sortingPriority"in r.prototype||(Object.defineProperty(r.prototype,"sortingPriority",{get:function(){return this._sortingPriority},set:function(t){this._sortingPriority=t},enumerable:!0}),Object.defineProperty(r.prototype,"sortingEnabled",{get:function(){return this._sortingEnabled},set:function(t){this._sortingEnabled=t},enumerable:!0})),t._RF.pop()}}}));

System.register("chunks:///_virtual/ui.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,a,n,o,s,h,c,l;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,i=e.gfx,a=e.clamp,n=e.UI,o=e.Label,s=e.Sprite,h=e.sp,c=e.MeshRenderer,l=e.StencilManager}],execute:function(){e("updateOpacity",p),t._RF.push({},"bd85bM1FAZPrrA1HEXzOdV0","ui",void 0);var d=e("_cocos_2d_renderer_stencil_manager__Stage",function(e){return e[e.DISABLED=0]="DISABLED",e[e.CLEAR=1]="CLEAR",e[e.ENTER_LEVEL=2]="ENTER_LEVEL",e[e.ENABLED=3]="ENABLED",e[e.EXIT_LEVEL=4]="EXIT_LEVEL",e[e.CLEAR_INVERTED=5]="CLEAR_INVERTED",e[e.ENTER_LEVEL_INVERTED=6]="ENTER_LEVEL_INVERTED",e}({}));function p(e,r){for(var t,n,o,s=e.vertexFormat,h=e.chunk.vb,c=0,l=0;l<s.length;++l){if(t=s[l],(n=i.FormatInfos[t.format]).hasAlpha)if(o=e.floatStride,n.size/n.count==1)for(var d=~~a(Math.round(255*r),0,255),p=c;p<h.length;p+=o)h[p]=(4294967040&h[p]|d)>>>0;else if(n.size/n.count==4)for(var f=c+3;f<h.length;f+=o)h[f]=r;c+=n.size>>2}}function f(e,r,t,i,a){void 0===r&&(r=-1),void 0===t&&(t=[]),void 0===a&&(a=""),-1!=r&&(t[r]||(t[r]=[]),e.attr({mDepth:r}),t[r].push(e));for(var n=e.children,o=(""!=a||e.name,0);o<n.length;o++){var s=n[o].name,h=i.get(s);null!=h?(a=s,f(n[o],h,t,i,a)):(r=t.length,i.set(s,r),a=s,f(n[o],r,t,i,a))}return t}n.prototype.flushRendererCache=function(){var e=this.rendererCache;if(e.length>0){this.rendererOrder&&e.sort((function(e,r){return e.renderPriority-r.renderPriority}));for(var t,i=r(e);!(t=i()).done;){var a=t.value;if(a.fillBuffers(this),a.renderOpacity>=0){p(a.renderData,a.renderOpacity);var n=a.renderData.getMeshBuffer();n&&n.setDirty()}}e.length=0}this.rendererOrder=!1},n.prototype.update=function(){var e;this.rendererCache=null!=(e=this.rendererCache)?e:[],this.rendererOrder=!1;for(var r=this._screens,t=0,i=0;i<r.length;++i){var a=r[i],n=a._getRenderScene();if(a.enabledInHierarchy&&n){this._opacityDirty=0,this._pOpacity=1,this.walk(a.node),this.flushRendererCache(),this.autoMergeBatches(this._currComponent),this.resetRenderStates();var o=0;if(this._batches.length>t)for(;t<this._batches.length;++t){var s=this._batches.array[t];if(s.model)for(var h=s.model.subModels,c=0;c<h.length;c++)h[c].priority=o++;else s.descriptorSet=this._descriptorSetCache.getDescriptorSet(s);n.addBatch(s)}}}},n.prototype.walk=function(e,r,t){if(void 0===r&&(r=0),void 0===t&&(t=0),e.activeInHierarchy){var i=e.children,a=e._uiProps,n=a.uiComp,u=n&&(n.stencilStage===d.ENTER_LEVEL||n.stencilStage===d.ENTER_LEVEL_INVERTED),E=a.uiTransformComp;t=E&&E._sortingEnabled?E._sortingPriority:t;var _=this._pOpacity,g=_,y=n&&n.color?n.color.a/255:1;if(this._pOpacity=g*=y*a.localOpacity,a._opacity=g,a.colorDirty&&this._opacityDirty++,n&&n.enabledInHierarchy)if(u){if(this.flushRendererCache(),n.fillBuffers(this),this._opacityDirty&&n&&!n.useVertexOpacity&&n.renderData&&n.renderData.vertexCount>0){p(n.renderData,g);var v=n.renderData.getMeshBuffer();v&&v.setDirty()}}else this.rendererCache.push(n),n.renderPriority=t,0!=t&&(this.rendererOrder=!0),this._opacityDirty&&n&&!n.useVertexOpacity&&n.renderData&&n.renderData.vertexCount>0?n.renderOpacity=g:n.renderOpacity=-1;if(e.openGroupRendering){if(i.length>0&&!e._static)for(var D=f(e,-1,[],new Map),L=D.length,R=0;R<L;R++)for(var C=D[R],m=C.length,O=0;O<m;O++){var S=r;(!(C[O].children.length>0)||C[O].getComponent(o)||C[O].getComponent(s)||!h||C[O].getComponent(h.Skeleton)||C[O].getComponent(c)||C[O].active)&&(C[O].attr({hePiGuo:1}),this.walk(C[O],r,t),r=S)}}else{var I=e;if(i.length>0&&!I._static&&!I.hePiGuo)for(var V=i.length,M=0;M<V;++M){var b=i[M];this.walk(b,r,t)}}a.colorDirty&&(this._opacityDirty--,a.colorDirty=!1),this._pOpacity=_,n&&n.enabledInHierarchy&&(n.postUpdateAssembler(this),u&&l.sharedManager.getMaskStackSize()>0&&(this.flushRendererCache(),this.autoMergeBatches(this._currComponent),this.resetRenderStates(),l.sharedManager.exitMask())),r+=1}},t._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./Config.ts","./platform.ts","./PlatformModel.ts","./GameConfig2.ts"],(function(t){var e,o,a,s,r,n,i;return{setters:[function(t){e=t.createClass},function(t){o=t.cclegacy},function(t){a=t.GameApp},function(t){s=t.EventName},function(t){r=t.platform},function(t){n=t.platformModel},function(t){i=t.GamePropMode}],execute:function(){o._RF.push({},"c872bNuxplEiJPjab8Ak/51","UserModel",void 0);var p="game_user_data",u=t("userModel",new(function(){function t(){this._game_pass=1,this._prop=[]}var o=t.prototype;return o.load=function(){var t=a.storage.getJson(p);t&&(this._game_pass=t.game_pass,this._prop=t.prop),this._prop||(this._prop=[])},o.save=function(){var t={game_pass:this._game_pass,prop:this._prop};a.storage.set(p,t)},o.upDataProp=function(){this.save(),a.event.emit(s.PROP_UPDATE)},o.addProp=function(t){var e,o=this._prop.findIndex((function(e){return e.id==t.id}));-1==o?this._prop.push(t):this._prop[o].num+=t.num,this.upDataProp(),n.addPassData({videoNum:1}),t.id==i.hammer?e="remove":t.id==i.optional?e="tailor":t.id==i.magnet?e="magnetic":t.id==i.resurgence?e="revive":t.id==i.remove_bottom&&(e="removeBottom"),r.trackEvent("getProp",{level:u.game_pass,prop:e,useTime:n.getPassTime()})},o.decProp=function(t){if(null!=t){var e,o=this._prop.findIndex((function(e){return e.id==t}));-1!=o&&(this._prop[o].num--,this._prop[o].num<=0&&(this._prop[o].num=0),this.upDataProp()),t==i.hammer?(e="remove",n.addPassData({useRemoveCnt:1})):t==i.optional?(e="tailor",n.addPassData({useTailorCnt:1})):t==i.magnet?(e="magnetic",n.addPassData({magneticCnt:1})):t==i.resurgence?(n.addPassData({reviveCnt:1}),e="revive"):t==i.remove_bottom&&(n.addPassData({removeBottom:1}),e="removeBottom"),r.trackEvent("useProp",{level:u.game_pass,prop:e,useTime:n.getPassTime()})}},o.getPropToID=function(t){return this._prop.find((function(e){return e.id==t}))},o.isExistsProp=function(t){var e=this.getPropToID(t);return e&&e.num>0},e(t,[{key:"game_pass",get:function(){return this._game_pass},set:function(t){this._game_pass=t,this.save(),r.trackUserSet({maxLevel:this._game_pass-1})}},{key:"prop",get:function(){return this._prop}}]),t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/Vec3Util.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,r=n.Vec3}],execute:function(){e._RF.push({},"aa19fxwEERJ561e+G4Pynh2","Vec3Util",void 0);n("Vec3Util",function(){function n(){}return n.onGetVector=function(n,t){var e=new r;return r.subtract(e,t,n),e},n.getCoordinateByDistance=function(n,t,e){var a=t.subtract(n),u=e/a.length();return new r(n.x+a.x*u,n.y+a.y*u,n.z+a.z*u)},n.calculateNewPoint=function(n,t,e){var r=t.normalize();return n.add(r.multiplyScalar(e))},n.calculateNewCoordinate=function(n,t,e){var r=t.subtract(n).normalize();return n.add(r.multiplyScalar(e))},n.reflectVector=function(n,t){var e=n.x*t.x+n.y*t.y+n.z*t.z,a=new r(2*t.x*e,2*t.y*e,2*t.z*e);return new r(n.x-a.x,n.y-a.y,n.z-a.z).normalize()},n.findPointOnRay=function(n,t,e,a){var u=new r;r.subtract(u,t,n);var i=new r;r.normalize(i,u);var l=r.len(u),c=r.dot(t,e),o=r.dot(n,e),f=r.dot(i,e);if(0===f)return null;var s=(a+(c-o))/f;if(s<0||s>l)return null;var y=new r;return r.scaleAndAdd(y,n,i,s),y},n.restrictMax=function(n,t){var e=Math.sqrt(n.x*n.x+n.z*n.z);if(e>t){var r=t/e;n.x*=r,n.z*=r}return n},n.limitMinLength=function(n,t){return n.length()<t&&n.normalize().multiplyScalar(t),n},n.limitMaxLength=function(n,t){return n.length()>t&&n.normalize().multiplyScalar(t),n},n.calculateCircleCenterAtCollision=function(n,t,e){var a=t/2,u=e.length(),i=new r(e.x/u,e.y/u,e.z/u),l=n.x+a*i.x,c=n.y+a*i.y,o=n.z+a*i.z;return new r(l,c,o)},n.getCenterPoint=function(n,t){return new r((n.x+t.x)/2,(n.y+t.y)/2,(n.z+t.z)/2)},n.calculateExtendedPoint=function(n,t,e){var a=new r;r.subtract(a,t,n);var u=new r;r.normalize(u,a);var i=new r;return r.scaleAndAdd(i,t,u,e),i},t(n,null,[{key:"x",get:function(){return new r(1,0,0)}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/VibrateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./platform.ts"],(function(t){var e,i,n,a;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.GameApp},function(t){a=t.platform}],execute:function(){i._RF.push({},"6dee2yMUrNPVpNsiRPTrDAk","VibrateManager",void 0);var r="game_vibrate";t("VibrateManager",function(){function t(){this._switcg_vibrate=!0}t.getInstance=function(){return null==this._instance&&(this._instance=new t,this._instance.load()),this._instance};var i=t.prototype;return i.save=function(){var t={vibrate:this._switcg_vibrate};n.storage.set(r,t)},i.load=function(){var t=n.storage.getJson(r);t&&(this._switcg_vibrate=t.vibrate)},i.play=function(t){this._switcg_vibrate&&a.vibrate(t)},e(t,[{key:"switcg_vibrate",get:function(){return this._switcg_vibrate},set:function(t){this._switcg_vibrate=t}}]),t}())._instance=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/video-button.ts",["./rollupPluginModLoBabelHelpers.js","cc","./platform-const.ts","./platform.ts","./GameApp.ts","./NodeUtil.ts"],(function(e){var t,n,i,o,r,c,a,l,u,s,h,d,f,p,v,b,m,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.Button,l=e.CCString,u=e.Enum,s=e.EventHandler,h=e.CCBoolean,d=e.Component},function(e){f=e.VideoUnitType,p=e.VideoUnit,v=e.VideoFailCode},function(e){b=e.platform},function(e){m=e.GameApp},function(e){C=e.node_util}],execute:function(){var E,y,g,k,D,W,T,x,w,z,A,H,L,B;r._RF.push({},"ca7f5u7iiFOxKqe6kL8uOEZ","video-button",void 0);var I=c.ccclass,S=c.property,_=c.requireComponent,V=c.disallowMultiple,F=c.menu;e("default",(E=_(a),y=F("button/VideoButton"),g=S(l),k=S({type:u(f)}),D=S([s]),W=S(l),T=S(h),I(x=E(x=V(x=y((z=t((w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"videoSource",z,o(t)),i(t,"videoDuration",A,o(t)),i(t,"onWatchEndEvent",H,o(t)),i(t,"curItem",L,o(t)),i(t,"isChick",B,o(t)),t.cancelText="",t.beforeWatchCheckHandler=null,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.isChick&&this.node.on("click",this.onClick,this),b.preloadVideo(p[this.videoDuration])},r.setCurItem=function(e){this.curItem=e},r.setCancelText=function(e){this.cancelText=e},r.onClick=function(e){var t=this;if(console.log("点击视频按钮"),(!e||e.interactable)&&null!=this.onWatchEndEvent&&(null==this.beforeWatchCheckHandler||this.beforeWatchCheckHandler())){if(m.config.game.isTest)return console.log("测试版本不响应"),void(this.onWatchEndEvent&&s.emitEvents(this.onWatchEndEvent,e));var n=C.tempDisableButton(this.node,1);b.doWatchAD({videoSource:this.videoSource,videoDuration:this.videoDuration,item:this.curItem}).then((function(){n(),t.onWatchEndEvent&&s.emitEvents(t.onWatchEndEvent,e)})).catch((function(e){n(),e===v.NO_AD?(console.log("--暂无视频可看--"),m.Layer.toast("暂无视频可看")):e===v.CANCELED&&""!=t.cancelText&&(console.log(t.cancelText),m.Layer.toast(t.cancelText))}))}},r.setBeforeWatchCheckHandler=function(e){this.beforeWatchCheckHandler=e},t}(d)).prototype,"videoSource",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),A=t(w.prototype,"videoDuration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.RANDOM}}),H=t(w.prototype,"onWatchEndEvent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=t(w.prototype,"curItem",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=t(w.prototype,"isChick",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=w))||x)||x)||x)||x));r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts"],(function(e){var n,o,t,r,a,i,c,u,f,l,d,s,p;return{setters:[function(e){n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){t=e.cclegacy,r=e.Vec3,a=e.Vec2,i=e.UITransform,c=e.v3,u=e.Size,f=e.Prefab,l=e.instantiate,d=e.Animation,s=e.AnimationClip},function(e){p=e.GameApp}],execute:function(){t._RF.push({},"8dab3eCuY1IF5Z2SBGhH1bW","ViewUtil",void 0);e("ViewUtil",function(){function e(){}return e.nodeTreeInfoLite=function(n,o){for(var t=o||new Map,r=n.children,a=0;a<r.length;a++){var i=r[a];i.name.indexOf(" ")<0&&t.set(i.name,i),e.nodeTreeInfoLite(i,t)}return t},e.findNodes=function(n,o,t){for(var r=t||[],a=o.children,i=0;i<a.length;i++){var c=a[i].name;n.test(c)&&r.push(a[i]),e.findNodes(n,a[i],r)}return r},e.isPointInNodeBB=function(e,n){return e instanceof r&&(e=new a(e.x,e.y)),n.getComponent(i).getBoundingBoxToWorld().contains(e)},e.calculateWorldToNodePos=function(e,n){return e instanceof a&&(e=new r(e.x,e.y,0)),n.getComponent(i).convertToNodeSpaceAR(e)},e.isNodeBBIntersect=function(e,n){return e.getComponent(i).getBoundingBoxToWorld().intersects(n.getComponent(i).getBoundingBoxToWorld())},e.calculateNodeToWorldPos=function(e,n){return n instanceof a&&(n=new r(n.x,n.y,0)),e.getComponent(i).convertToWorldSpaceAR(n)},e.calculateASpaceToBSpacePos=function(e,n,o){var t=e.getComponent(i).convertToWorldSpaceAR(o);return n.getComponent(i).convertToNodeSpaceAR(t)},e.calculateScreenPosToSpacePos=function(e,n){var o=e.getUILocation(),t=c(o.x,o.y);return n.getComponent(i).convertToNodeSpaceAR(t)},e.uniformScale=function(e,n,o,t){var r,a=o/e,i=t/n;return r=a<i?a:i,new u(Math.floor(e*r),Math.floor(n*r))},e.createPrefabNode=function(e,n){var o=p.res.get(e,f,n);return o?l(o):null},e.createPrefabNodeAsync=function(e,t,r){var a=this;return void 0===r&&(r=!1),new Promise(n(o().mark((function n(i,c){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:p.res.load(t,e,f,(function(n,o){if(n)return console.error("名为【"+e+"】的资源加载失败"),void(r&&c());var u=a.createPrefabNode(e,t);i(u)}));case 1:case"end":return n.stop()}}),n)}))))},e.loadPrefabNode=function(e,n){var o=this;p.res.load(e,f,(function(t,r){if(t)console.error("名为【"+e+"】的资源加载失败");else{var a=o.createPrefabNode(e);n(a)}}))},e.addNodeAnimation=function(e,n,o,t){if(void 0===o&&(o=!0),void 0===t&&(t=!1),n&&n.isValid){var r=n.getComponent(d);null==r&&(r=n.addComponent(d));var a=p.res.get(e,s);if(a&&!(o&&r.getState(a.name)&&r.getState(a.name).isPlaying)){if(t)return r.defaultClip=a,void r.play();r.once(d.EventType.FINISHED,(function(){r.defaultClip&&r.play()}),this),r.getState(a.name)||r.createState(a,a.name),r.play(a.name)}}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/web.ts",["./rollupPluginModLoBabelHelpers.js","cc","./platform-const.ts"],(function(n){var t,r,e,o,u,a,c,i,s,f,p;return{setters:[function(n){t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){e=n.cclegacy,o=n.log,u=n.game,a=n.Game,c=n.sys,i=n.Rect},function(n){s=n.PlatformCode,f=n.DefaultSystemInfo,p=n.LogTag}],execute:function(){e._RF.push({},"b31e4PyCpZBYagX/DQIbCUN","web",void 0);n("WebPlatform",function(){function n(){this.menuBounding=void 0}var e=n.prototype;return e.string=function(){return s.Web},e.initSDK=function(){o("webPlatform does not support sdk"),new URLSearchParams(location.search).forEach((function(n,t){})),this.initListener()},e.initListener=function(){u.on(a.EVENT_HIDE,(function(){})),u.on(a.EVENT_SHOW,(function(){}))},e.login=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.getStorage=function(n){var t=c.localStorage.getItem(n);return null==t||""==t?null:JSON.parse(t)},e.setStorage=function(n,t){c.localStorage.setItem(n,JSON.stringify(t)),t||this.trackEvent("error",{type:"setStorage",message:"value error:"+t,item:n})},e.clearStorage=function(){c.localStorage.clear()},e.removeStorage=function(n){c.localStorage.removeItem(n)},e.preloadVideo=function(n){return!0},e.doWatchAD=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.doShare=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.getSystemData=function(){return f},e.vibrate=function(n){},e.refreshGame=function(){location.reload()},e.showLoading=function(){},e.hideLoading=function(){},e.showModal=function(){var n=t(r().mark((function n(t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",!0);case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),e.log=function(n){for(var t,r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];(t=console).log.apply(t,[p,n].concat(e))},e.getMenuBounding=function(){return null==this.menuBounding&&(this.menuBounding=new i(650,0,100,50)),this.menuBounding},e.createShareImage=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return","");case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.preloadInterstitialAD=function(n){console.log("preload inter ad",n)},e.showInterstitialAD=function(){var n=t(r().mark((function n(t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("show inter ad",t.adUnit);case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),e.getSubscribeCnt=function(){var n=t(r().mark((function n(t){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",0);case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),e.subscribe=function(){var n=t(r().mark((function n(t){var e,o,u,a,c,i=arguments;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(e=i.length,o=new Array(e>1?e-1:0),u=1;u<e;u++)o[u-1]=i[u];return a=[t].concat(o),c={},a.forEach((function(n){c[n]=!0})),n.abrupt("return",c);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),e.startVideoRecord=function(){},e.pauseVideoRecord=function(){},e.resumeVideoRecord=function(){},e.stopVideoRecord=function(){},e.hasVideoRecord=function(){return!0},e.shareVideoRecord=function(){},e.addShortcut=function(){},e.getUserProfile=function(n,t){o("web not have getUserProfile")},e.postMessage=function(n,t){console.log("PostMessage....",n,t)},e.setUserCloudStorage=function(n){},e.trackLogin=function(){o("WebPlatform does not support tga")},e.trackUserSet=function(){o("WebPlatform does not support tga")},e.trackUserSetOnce=function(n){o("WebPlatform does not support tga")},e.trackEvent=function(n,t){o("打点...",n,JSON.stringify(t))},n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/wechat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./platform-const.ts","./Common.ts","./GameApp.ts","./PlatformModel.ts","./Config.ts"],(function(e){var n,t,o,i,r,c,s,a,u,d,l,h,f,g,p,m,w,v,y;return{setters:[function(e){n=e.extends,t=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){i=e.cclegacy,r=e.screen,c=e.rect,s=e.Rect},function(e){a=e.PlatformCode,u=e.LogTag,d=e.TgaConfig,l=e.VideoCoolTime,h=e.VideoUnit,f=e.VideoFailCode,g=e.DefaultSystemInfo,p=e.VibrateType},function(e){m=e.common},function(e){w=e.GameApp},function(e){v=e.platformModel},function(e){y=e.CDNAddr}],execute:function(){i._RF.push({},"96720FRMLtMi7sHTRSBUijV","wechat",void 0);e("WeChatPlatform",function(){function e(){this.systemInfoCache=void 0,this.videoCheckedMap={},this.videoCheckedLastT={},this.videoMap={},this.isSharing=!1,this.isLoading=!1,this.isLoggedIn=!1,this.menuBounding=void 0,this.onHideTime=0,this.tgaInited=!1}var i=e.prototype;return i.string=function(){return a.Wechat},i.canUse=function(e){return m.compareVersion(this.getSystemData().SDKVersion,e)>=0},i.initSDK=function(){this.initWechatListener(),this.initCommonSetting(),this.initTga()},i.initWechatListener=function(){var e=this;wx.onShow((function(n){var t=Date.now();console.log(u,"on show",t),v.syncLaunchOption(n),e.isSharing})),wx.onHide((function(){e.onHideTime=Date.now(),console.log(u,"on hide",e.onHideTime)})),wx.onError((function(e){w.config.game.isTest&&wx.showModal({title:e.message||"异常报错",content:e.stack||e+"",showCancel:!1,confirmText:"好的"})})),wx.onShareAppMessage((function(){var n=v.randomShareInfo("default"),t={title:n.text,imageUrl:y+"share/"+n.url,query:"type=default"};return e.trackEvent("share",{type:"default",url:n.url,success:!0}),t})),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.canUse("2.0.2")&&wx.onMemoryWarning((function(){wx.triggerGC()}));var n=wx.getUpdateManager();n.onCheckForUpdate((function(e){console.log(u,"update checked, hasUpdate="+e.hasUpdate)})),n.onUpdateFailed((function(){console.log(u,"update failed")})),n.onUpdateReady((function(){wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启游戏？",success:function(e){e.confirm&&n.applyUpdate()}})}))},i.initCommonSetting=function(){v.syncLaunchOption(wx.getLaunchOptionsSync())},i.initTga=function(){w.config.game.isTest||(TDAnalytics.init(d),TDAnalytics.setSuperProperties({ver:w.config.game.version,platform:this.string(),game:w.config.game.projectName,appName:"wechat"}),this.tgaInited=!0)},i.wechatLogin=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){wx.login({success:function(t){t&&t.code?(console.log("微信登陆成功：",t.code),e(t.code)):(console.warn("微信登陆失败：empty code"),n({errMsg:"empty code",errno:-1}))},fail:function(e){var t="";null!=e&&null!=e.errMsg&&(t=e.errMsg),console.warn("微信登陆失败：",t),n(e)}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.login=function(){var e=t(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.getStorage=function(e){try{return JSON.parse(wx.getStorageSync(e))}catch(e){return null}},i.setStorage=function(e,n){try{wx.setStorageSync(e,JSON.stringify(n))}catch(e){}},i.clearStorage=function(){try{wx.clearStorageSync()}catch(e){}},i.removeStorage=function(e){try{wx.removeStorageSync(e)}catch(e){}},i.preloadVideo=function(e){if(!this.canUse("2.0.4"))return!1;var n=this.videoCheckedMap[e];if(n)return n;var t=this.videoCheckedLastT[e],o=Date.now();if(!n&&(null==t||o-t>=l)){var i=this.videoMap[e];if(null==i){var r=this;i=wx.createRewardedVideoAd({adUnitId:e,multiton:!0}),this.videoMap[e]=i,i.onLoad((function(){console.log("<<<< preload video success"),r.videoCheckedMap[e]=!0,r.videoCheckedLastT[e]=Date.now()})),i.onError((function(n){console.log("<<<< preload video err: ",n),r.videoMap[e]=null,r.videoCheckedMap[e]=!1,r.videoCheckedLastT[e]=Date.now(),i.destroy()}))}null!=i&&i.load()}return!1},i.doWatchAD=function(e){var n;console.log("wechat:doWatchAD");var t=h[null!=(n=e.videoDuration)?n:6];if(!this.preloadVideo(t))return Promise.reject(f.NO_AD);var o=this.videoMap[t];if(null==o)return Promise.reject(f.NO_AD);this.showLoading();var i=this;return new Promise((function(n,r){o.onClose((function c(s){console.log("<<<< video onClose",s),null!=o&&o.offClose(c),null!=s&&s.isEnded?(i.trackEvent("video",{step:"complete",unit:t,type:e.videoSource}),n()):r(f.CANCELED)})),console.log("chat:显示视频"),o.show().then((function(){console.log("<<<< video show"),i.trackEvent("video",{step:"display",success:!0,unit:t,type:e.videoSource})})).catch((function(n){console.log("<<<< video err: ",n),i.trackEvent("video",{step:"display",success:!1,type:e.videoSource,unit:t}),o.destroy(),i.videoMap[t]=null,setTimeout((function(){i.preloadVideo(t)}),l),r(f.NO_AD)})).then((function(){console.log("<<<< hideLoading"),i.hideLoading()}))}))},i.doShare=function(e){return null},i.getSystemData=function(){if(null==this.systemInfoCache)try{this.systemInfoCache=wx.getSystemInfoSync(),this.systemInfoCache.appName="Wechat"}catch(e){return g}return this.systemInfoCache},i.vibrate=function(e){e==p.SHORT?wx.vibrateShort({type:"medium"}):e==p.LONG&&wx.vibrateLong({success:function(e){},fail:function(e){}})},i.refreshGame=function(){wx.exitMiniProgram()},i.showLoading=function(){console.log("wechat:showLoading"),this.canUse("1.1.0")&&(this.isLoading=!0,wx.showLoading({title:"加载中",mask:!0}))},i.hideLoading=function(){this.canUse("1.1.0")&&this.isLoading&&(wx.hideLoading(),this.isLoading=!1)},i.showModal=function(e){return new Promise((function(t){wx.showModal(n({},e,{success:function(e){e.confirm?t(!0):e.cancel&&t(!1)},fail:function(e){t(!1)}}))}))},i.log=function(e){},i.getMenuBounding=function(){if(null==this.menuBounding)if(this.canUse("2.1.0")){var e=wx.getMenuButtonBoundingClientRect(),n=this.getSystemData(),t=r.windowSize,o=t.width/n.screenWidth,i=t.height/n.screenHeight;this.menuBounding=c(e.left*o,e.top*i,e.width*o,e.height*i)}else this.menuBounding=new s(650,0,100,50);return this.menuBounding},i.createShareImage=function(e){return null},i.preloadInterstitialAD=function(e){},i.showInterstitialAD=function(e){return null},i.getSubscribeCnt=function(e){return null},i.subscribe=function(e){return null},i.startVideoRecord=function(){},i.pauseVideoRecord=function(){},i.resumeVideoRecord=function(){},i.stopVideoRecord=function(){},i.hasVideoRecord=function(){return!1},i.shareVideoRecord=function(){},i.addShortcut=function(){},i.getUserProfile=function(e,n){},i.postMessage=function(e,n){},i.setUserCloudStorage=function(e){},i.trackUserSet=function(e){this.tgaInited&&TDAnalytics.userSet({properties:e})},i.trackUserSetOnce=function(e){null!=e&&this.tgaInited&&TDAnalytics.userSetOnce({properties:e})},i.trackEvent=function(e,t){if(this.tgaInited){console.log("wechat:trackEvent",e,t);var o=n({},t);TDAnalytics.track({eventName:e,properties:o})}},e}());i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});